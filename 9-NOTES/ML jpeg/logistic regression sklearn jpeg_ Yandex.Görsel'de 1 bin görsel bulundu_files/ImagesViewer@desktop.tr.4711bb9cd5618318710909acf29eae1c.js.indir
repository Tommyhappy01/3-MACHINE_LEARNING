!function(e){function t(t){for(var n,r,i=t[0],a=t[1],c=0,s=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&s.push(o[r][0]),o[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);s.length;)s.shift()()}var n={},r={609:0},o={609:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{a959f1:1}[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="chunks/"+({}[e]||e)+"."+{a959f1:"3156a5fbda1fc4ae8088"}[e]+".css",a=i.p+o,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=(d=c[s]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===o||u===a))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){var d;if((u=(d=l[s]).getAttribute("data-href"))===o||u===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.request=o,delete r[e],f.parentNode.removeChild(f),n(i)},f.href=a,document.getElementsByTagName("head")[0].appendChild(f)}).then(function(){r[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=a);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"chunks/"+({}[e]||e)+"."+{a959f1:"3156a5fbda1fc4ae8088"}[e]+".js"}(e);var u=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var l=setTimeout(function(){c({type:"timeout",target:s})},12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://yastatic.net/s3/fiji-static/_/",i.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=c;i(i.s=1880)}([function(e,t){e.exports=React},function(e,t,n){"use strict";e.exports=n(142)},function(e,t,n){"use strict";e.exports=n(109)},function(e,t,n){"use strict";e.exports=n(98)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return c}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__createBinding",function(){return f}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return m}),n.d(t,"__spread",function(){return v}),n.d(t,"__spreadArrays",function(){return b}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return O}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return C}),n.d(t,"__importStar",function(){return j}),n.d(t,"__importDefault",function(){return E}),n.d(t,"__classPrivateFieldGet",function(){return S}),n.d(t,"__classPrivateFieldSet",function(){return k});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function c(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function b(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||c(e,t)})})}function c(e,t){try{!function(e){e.value instanceof g?Promise.resolve(e.value.v).then(s,u):l(i[0][2],e)}(o[e](t))}catch(e){l(i[0][3],e)}}function s(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}function O(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(86),i=n(87),a=n(88),c=n(89),s=n(90),u=n(91),l=n(92),d=n(93),f=n(94),p={be:o.default,en:i.default,id:a.default,kk:c.default,ru:s.default,tr:u.default,tt:l.default,uk:d.default,uz:f.default},h=["ru"];function m(e){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(e)?"ru":"en"}function v(e,t){for(var n=[],r=e.length,o=0;o<r;){var i=e.indexOf("{",o);if(-1===i)return n.push(e.substring(o)),n;var a=e.indexOf("}",i);if(-1===a)return n.push(e.substring(o)),n;n.push(e.substring(o,i),t[e.substring(i+1,a)]),o=a+1}return n}function b(e,t,n){void 0===n&&(n={});var o=function(e,t){var n,o,i;try{for(var a=r(h),c=a.next();!c.done;c=a.next())if((i=e[c.value])&&t in i)return i[t]}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return t}(e,t);return"string"===typeof o?v(o,n):function(e,t){var n=h.find(function(e){return Boolean(p[e])})||m(h[0]);return v((0,p[n])(t.count,e),t)}(o,n)}t.default=function(e){return function(t,n){return void 0===n&&(n={}),b(e,t,n).join("")}},t.i18nRaw=function(e){return function(t,n){return void 0===n&&(n={}),b(e,t,n)}},t.setI18nLang=function(e){h="string"===typeof e?[e,m(e),"ru"]:e},t.getI18nLang=function(){return h[0]},t.resolveI18nLang=function(e,t,n){var r=t;if(-1===e.indexOf(r))switch(n){case"com":r="en";break;case"com.tr":r="tr";break;default:r="ru"}return r}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(299)),r(n(300)),r(n(301)),r(n(198)),r(n(199)),r(n(302)),r(n(303)),r(n(200)),r(n(145)),r(n(308)),r(n(309)),r(n(144)),r(n(310)),r(n(311)),r(n(312)),r(n(73))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return window.Ya.reactBus}},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"i",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"l",function(){return y});var r=n(28),o=n(292),i=n(61),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var c=Object(i.d)(function(e){return s(e,e.currentItemIdx)});function s(e,t){return e.images[t]}Object(i.d)(function(e){return function(e,t){var n=s(e,t);if(n){if(n.loadedImage)return n.loadedImage;var r=e.loadedThumbs[n.id];return r&&(n.loadedImage=r),r}}(e,e.currentItemIdx)});var u=Object(i.d)(function(e){return Object(o.g)(e)||c(e)}),l=Object(i.a)("loadedThumbs"),d=Object(i.d)(function(e){var t=u(e),n=t&&t.id?l(e,t.id):void 0;return n&&n.data});var f=Object(i.a)("favicons");function p(e){var t=e&&e.snippet;if(t)return t.punycode?t.punycode.toLowerCase():t.domain&&t.domain.toLowerCase()}function h(e){return e.preloadImagesIndexes}function m(e,t){for(var n=Math.max(t-e.config.preloadLeftBorder,0),r=Math.min(t+e.config.preloadRightBorder,e.images.length),o=[],i=Math.max(t-n,r-t),a=1;a<=i;a++)t+a<=r&&o.push(t+a),t-a>=n&&o.push(t-a);return o}function v(e,t,n){return 1===e?t:t.slice(n)}function b(e){var t=Object(r.c)(e);return t&&t.__oldCounter__&&t.__oldCounter__.path||""}var g=function(e,t){var n=b(e);return a(a({},e),{__oldCounter__:a(a({},e.__oldCounter__),{path:n.replace(/\/$/,"")+"/"+t})})},y=function(e){var t=e.experiments,n=void 0===t?{}:t,r=e.globalContext,o=r.isCommercialEnabled||r.isCommercialQuery;if(n.commercialSideblockWidth&&o)return Number(n.commercialSideblockWidth)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n(28),o=n(11),i=function(e,t){var n=e.dtype,o=void 0===n?"iweb":n,i=e.path,a=e.vars,c=e.pid,s=e.cid;void 0===t&&(t=!0);var u={dtype:o,path:i,pid:c,cid:s},l=a&&Object(r.e)(a,t);return l&&(u.vars=l),u},a=function(){},c=o.a?function(e,t,n,r){var o,a=void 0===t?{}:t,c=a.reqid,s=a.dtype,u=a.vars,l=a.pid,d=a.cid,f=a.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,h=void 0===p?i:p;null===(o=window.c)||void 0===o||o.hit(h({path:e,reqid:c,dtype:s,vars:u,pid:l,cid:d},n),f?{href:f}:void 0)}:a,s=o.a?function(e,t,n,r){var o,a=void 0===t?{}:t,c=a.reqid,s=a.dtype,u=a.vars,l=a.pid,d=a.cid,f=a.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,h=void 0===p?i:p;null===(o=window.c)||void 0===o||o.hitDelayed(h({path:e,reqid:c,dtype:s,vars:u,pid:l,cid:d},n),f?{href:f}:void 0)}:a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement)},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r,o=n(4),i=n(0),a=n.n(i),c=n(3),s=n(27),u=n(21),l=(n(193),function(e){var t=e.side,n=e.provider,r=Object(o.__rest)(e,["side","provider"]);return n(f("Icon",{side:t},[r.className]))}),d=(n(194),function(e){var t=e.children,n=e.className,r=Object(o.__rest)(e,["children","className"]);return a.a.createElement("span",Object(o.__assign)({},r,{className:f("Text",null,[n])}),t)}),f=(n(192),Object(c.cn)("Button2")),p={autoComplete:"off",pressKeys:[u.a.SPACE,u.a.ENTER],prvntKeys:[],as:"button",type:"button"},h=((r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(i.createRef)(),t.onKeyDown=function(e){Object(u.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(u.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t.onBlur=function(e){t.setState({pressed:!1}),void 0!==t.props.onBlur&&t.props.onBlur(e)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,c=e.children,u=e.icon,p=e.iconLeft,h=e.iconRight,m=e.progress,v=e.disabled,b=e.as,g=e.type,y=e.className,O=e.innerRef,w=e.controlRef,C=e.title,j=e.role,E=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(o.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),S=this.state.pressed,k=b;E["string"===typeof b?"ref":"innerRef"]=Object(s.a)(this.internalInnerRef,O,w);var _=p||u;return a.a.createElement(k,Object(o.__assign)({},E,{type:g,disabled:Boolean(m||v),className:f({checked:i,progress:m,pressed:S},[y]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onBlur:this.onBlur,"aria-pressed":i,"aria-disabled":v,autoComplete:r,title:C,role:j,"aria-busy":m}),n,_&&a.a.createElement(l,{provider:_,side:c&&p?"left":void 0}),h&&a.a.createElement(l,{provider:h,side:c?"right":void 0}),c&&a.a.createElement(d,null,c),t)},t}(i.PureComponent)).displayName=f(),r.defaultProps=p,r)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(3),c=(n(174),Object(a.cn)("Icon")),s=function(e){var t=e.direction,n=e.size,o=e.url,a=e.style,s=void 0===a?{}:a,u=e.children,l=e.title,d=e.onClick,f=(e.type,e.glyph,Object(r.__rest)(e,["direction","size","url","style","children","title","onClick","type","glyph"])),p=c({direction:t,size:n},[f.className]);return void 0!==o&&(s.backgroundImage="url('"+o+"')"),i.a.createElement("span",Object(r.__assign)({},f,{"aria-hidden":!0,className:p,style:s,title:l,onClick:d}),u)};s.displayName=c()},,function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return v});var r=n(4),o=n(0),i=n.n(o),a=n(2),c=n(3),s=n(13);function u(e){var t={state:e,setState:function(e){t.state=e,t.setters.forEach(function(e){return e(t.state)})},setters:[]};return function(){var e=Object(r.__read)(Object(o.useState)(t.state),2),n=e[0],i=e[1];return Object(o.useEffect)(function(){return function(){t.setters=t.setters.filter(function(e){return e!==i})}},[]),function(e,t){Object(s.a)()?Object(o.useLayoutEffect)(e,t):Object(o.useEffect)(e,t)}(function(){-1===t.setters.indexOf(i)&&t.setters.push(i)}),[n,t.setState]}}function l(e,t){var n=Object(o.useRef)(u([e,t])).current,i=Object(r.__read)(n(),2)[1],a=Object(o.useRef)(function(e){var t=Object(r.__read)(n(),1)[0],i=Object(r.__read)(t||[],2),a=i[0],c=i[1];return void 0===t||void 0===c?Object(o.createElement)(a,e):c(e,a)}).current;return Object(o.useEffect)(function(){i([e,t])},[i,e,t]),a}var d=n(341),f=n(340),p=n(65);n(428);var h=Object(c.cn)("Textinput"),m=function(e){var t=e.addonAfter,n=e.addonBefore,c=e.className,s=e.disabled,u=e.focused,p=e.iconLeft,m=e.iconRight,v=e.innerRef,b=e.onMouseEnter,g=e.onMouseLeave,y=e.style,O=(e.pressed,e.view,e.pin,e.size,e.theme,e.hint),w=e.state,C=e.title,j=e.renderControl,E=Object(r.__rest)(e,["addonAfter","addonBefore","className","disabled","focused","iconLeft","iconRight","innerRef","onMouseEnter","onMouseLeave","style","pressed","view","pin","size","theme","hint","state","title","renderControl"]),S=Object(a.useComponentRegistry)(h()),k=S.Control,_=S.Box,P=S.Icon,I=S.Hint,x=l(k,j),R=Object(r.__read)(Object(o.useState)(O),2),N=R[0],M=R[1],T=Object(r.__read)(Object(o.useState)(!1),2),L=T[0],D=T[1],B=Object(o.useRef)(O),A=Object(d.a)("hint");Object(f.a)(function(){O?M(O):B.current&&D(!0),B.current=O},[O]);var F=Object(o.useCallback)(function(){O||(M(""),D(!1))},[O]);return i.a.createElement("span",{className:h({disabled:s,focused:u,iconRight:void 0!==m,iconLeft:void 0!==p,state:w},[c]),onMouseEnter:b,onMouseLeave:g,ref:v,style:y,title:C},n,p&&i.a.createElement(P,{side:"left",component:p}),m&&i.a.createElement(P,{side:"right",component:m}),i.a.createElement(x,Object(r.__assign)({},E,{"aria-invalid":"error"===w,disabled:s,"aria-describedby":N?A:void 0})),i.a.createElement(_,null),t,N&&i.a.createElement(I,{leave:L,onAnimationEnd:F,id:A},N))};m.displayName=h();var v=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={focused:e.props.focused,pressed:e.props.pressed,disabled:e.props.disabled},e.onMouseDown=function(t){3!==t.nativeEvent.which&&(e.setState({pressed:!0}),e.docOnMouseDown(),void 0!==e.props.onMouseDown&&e.props.onMouseDown(t))},e.onMouseUp=function(t){e.setState({pressed:!1}),void 0!==e.props.onMouseUp&&e.props.onMouseUp(t)},e.docOnMouseDown=function(){document.addEventListener("mouseup",e.docOnMouseUp),document.addEventListener("dragend",e.docOnMouseUp)},e.docOnMouseUp=function(){e.setState({pressed:!1}),document.removeEventListener("mouseup",e.docOnMouseUp),document.removeEventListener("dragend",e.docOnMouseUp)},e.onFocus=function(t){e.setState({focused:!0}),void 0!==e.props.onFocus&&e.props.onFocus(t)},e.onBlur=function(t){e.setState({focused:!1}),void 0!==e.props.onBlur&&e.props.onBlur(t)},e}return Object(r.__extends)(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.disabled!==e.disabled&&this.setState({disabled:e.disabled}),this.props.focused!==e.focused&&this.setState({focused:e.focused}),this.props.pressed!==e.pressed&&this.setState({pressed:e.pressed}),e.disabled&&this.setState({focused:!1,pressed:!1})},n.prototype.render=function(){var t=this.state,n=t.disabled,o=t.focused,a=t.pressed,c=e;return i.a.createElement(c,Object(r.__assign)({},this.props,{focused:n?void 0:o,pressed:n?void 0:a,onMouseDown:n?void 0:this.onMouseDown,onMouseUp:n?void 0:this.onMouseUp,onFocus:n?void 0:this.onFocus,onBlur:n?void 0:this.onBlur}))},n.displayName="WithControl("+Object(p.a)(e)+")",n}(o.PureComponent)}(m)},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMViewerButtons")},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"p",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"m",function(){return s}),n.d(t,"l",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"j",function(){return v}),n.d(t,"n",function(){return b}),n.d(t,"h",function(){return g}),n.d(t,"o",function(){return y}),n.d(t,"i",function(){return O});var r,o=n(30),i=n(210);!function(e){e.UPDATE_CONFIG="UPDATE_CONFIG",e.UPDATE_CONTEXT="UPDATE_CONTEXT",e.ADD_IMAGES_BY_THUMB="ADD_IMAGES_BY_THUMB",e.ADD_IMAGES_BY_POS="ADD_IMAGES_BY_POS",e.SET_IMAGES_BY_POS="SET_IMAGES_BY_POS",e.SET_CURRENT_ITEM_IDX="SET_CURRENT_ITEM_IDX",e.ADD_LOADED_THUMB_DATA="ADD_LOADED_THUMB_DATA",e.ADD_LOADED_RIM_THUMB_DATA="ADD_LOADED_RIM_THUMB_DATA",e.ADD_DIRECT_DATA="ADD_DIRECT_DATA",e.ADD_FAVICON_DATA="ADD_FAVICON_DATA",e.ADD_TAGS_DATA="ADD_TAGS_DATA",e.ADD_RIM_DATA="ADD_RIM_DATA",e.SET_SELECTED_RIM="SET_SELECTED_RIM",e.REQUEST_RIM_PAGE="REQUEST_RIM_PAGE",e.ADD_CROP_OBJECT="ADD_CROP_OBJECT",e.SET_TRIMMER_AREA="SET_TRIMMER_AREA",e.SET_IMAGES_BY_ID="SET_IMAGES_BY_ID",e.SET_SELECTED_COMMERCIAL_CROP="SET_SELECTED_COMMERCIAL_CROP"}(r||(r={}));var a=function(e){return{type:r.UPDATE_CONTEXT,context:e}},c=function(e){return{type:r.ADD_IMAGES_BY_POS,items:e}},s=function(e){return{type:r.SET_IMAGES_BY_POS,items:e}},u=function(e){return{type:r.SET_IMAGES_BY_ID,items:e}},l=function(e){return{type:r.SET_CURRENT_ITEM_IDX,index:e}},d=function(e,t,n){return{type:r.ADD_LOADED_THUMB_DATA,id:e,index:n,data:t}},f=function(e,t){return{type:r.ADD_LOADED_RIM_THUMB_DATA,id:e,data:t}},p=function(e,t){return{type:r.ADD_FAVICON_DATA,id:e,data:t}},h=function(e,t){return{type:r.ADD_TAGS_DATA,id:e,data:t}},m=function(e,t){return{type:r.ADD_RIM_DATA,id:e,data:t}},v=function(){return{type:r.REQUEST_RIM_PAGE}},b=function(e){return{type:r.SET_SELECTED_RIM,idx:e}},g=function(e){return{type:r.SET_SELECTED_COMMERCIAL_CROP,idx:e}},y=function(e){return{type:r.SET_TRIMMER_AREA,area:e}},O=function(e,t,n,a){if(n&&a){var c=t.cropObjects[n];if(!(c&&c.expireTime>Date.now())){var s=t.globalContext.tld;Object(o.get)(Object(i.a)("images",s,{rpt:"cv",url:a,format:"json",request:JSON.stringify({blocks:[{block:{block:"crop-objects",mods:{ajax:"yes"}},params:{},version:2}]})}),{format:"json"},{successCallback:function(t){var o=t&&t.blocks;if(o){for(var i,a=0;a<o.length;a++){var c=o[a];if("crop-objects"===(c.name&&c.name.block)){i=c;break}}if(i){var s=i.params&&i.params.objects;s&&e(function(e,t){return{type:r.ADD_CROP_OBJECT,data:t,imageId:e,timestamp:Date.now()}}(n,s))}}}})}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n(3),o="ProductCardVertical",i=Object(r.cn)("ProductCardVertical")},function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return w});var r,o,i=n(0),a=n.n(i),c=n(14),s=n.n(c),u=n(39),l=n.n(u),d=n(26),f=n(31),p=(n(48),n(7)),h=n(11);function m(e){var t=function(){return"undefined"!==typeof window&&(r=window.innerHeight,o=window.innerWidth),{height:r,width:o}}(),n=e.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!(n.bottom<=0||n.right<=0)&&(n.top<t.height&&n.left<t.width))}n(97),n(59);var v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object(d.b)({theme:f.theme});var b,g="Root",y=Object(d.a)(f.theme),O=g+"_inited";function w(e,t){void 0===t&&(t={});var n={},r=t.hydratePriority,o=void 0===r?b.force:r;return function(t){var r;if(h.a){var i=function(e,t,n){return function(r){for(var o=r?r.getElementsByClassName(g):document.getElementsByClassName(g),i=new RegExp("^"+t+"-"),a=0;a<o.length;a+=1){var c=o[a],s=c.id;s&&i.test(s)&&C(e,c,n)}}}(t,e,n);Object(p.a)()&&(Object(p.a)().on("react-adapter:unmount",function(e){return function(e,t){Object.keys(e).forEach(function(n){var r=e[n];t&&!t.contains(r)||(s.a.unmountComponentAtNode(r),r.classList.remove(O),delete e[n])})}(n,e)}),Object(p.a)().on("react-adapter:mount",function(e){return i(e)}));var c=(null===(r=window.Ya)||void 0===r?void 0:r.SerpContext)||{};(c&&c.expFlags||{}).react_init_on_page_load||c.reactInitOnPageLoad?"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",function(){return i()}):window.BEM&&BEM.DOM.ready(function(){return i()})}return function(n){return a.a.createElement("div",{className:g+" "+y,id:e+"-"+l()(),"data-state":JSON.stringify(n),"data-hydrate-priority":o},a.a.createElement(t,v({},n)))}}}function C(e,t,n){var r=function(e){return e.getAttribute("data-hydrate-priority")}(t),o=function(){return function(e,t,n){var r=t.id;if(n[r]||t.classList.contains(O))return;var o=function(e){return JSON.parse(e.getAttribute("data-state")||"{}")}(t);n[r]=t,Object(d.b)({theme:f.theme,root:t}),s.a.hydrate(a.a.createElement(e,v({},o)),t,function(){t.classList.add(O)})}(e,t,n)};if(r!==b.force)if(r!==b.checkVisible){if(r!==b.deferred)return o();window.requestAnimationFrame(o)}else{m(t)?o():window.requestAnimationFrame(o)}else o()}!function(e){e.force="force",e.checkVisible="check-visible",e.deferred="deferred"}(b||(b={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var r=n(3),o=n(13),i=Object(r.cn)("Theme"),a="",c=function(e){var t=e.theme,n=e.root,r=void 0===n?Object(o.a)()?document.body:null:n;if(Object(o.a)()){if(!r)throw new Error("Значение в root не является DOM-элементом, невозможно установить глобальную тему.");var c=r.className.replace(a,"");a=i(t),r.className=c+" "+a}}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(13),o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.a)()&&requestAnimationFrame(function(){t.forEach(function(t){void 0!==e&&void 0!==t&&("function"===typeof t?t(e.current):t.current=e.current)})}),e};function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return u});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function i(e,t){if("string"===typeof e||!e)return e||"";if(Array.isArray(e))return e.join(",");var n=t?"-":"";return Object.keys(e).filter(function(t){return void 0!==e[t]&&""!==e[t]}).map(function(t){return""+(n&&0===t.indexOf(n)?"":n)+t+"="+e[t]}).join(",")}function a(e){if(e)return e.logNode}function c(e,t,n,o){void 0===t&&(t={}),void 0===n&&(n={}),void 0===o&&(o={href:""});var a=s(e);if(!a||!a.__oldCounter__)return a;var c=a.__oldCounter__,l=i(r(r({},u(c.vars||{})),u(t)),!0);return r(r({},a),{__oldCounter__:r(r(r({},c),{vars:l}),n),node:o})}function s(e){if(e&&Array.isArray(e.counter)){var t=o(e.counter,2),n=t[0],r=t[1];return{__oldCounter__:{path:n||"",vars:r||""}}}return e||{}}function u(e){return void 0===e&&(e={}),"object"===typeof e?e:e.split(",").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("CommercialProduct")},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(455);t.appendQueryString=o.appendQueryString,t.stringifyUrlParams=o.stringifyUrlParams;var i,a=n(456),c="application/json; charset=utf-8",s={Accept:c},u=function(){};function l(e,t,n,o){void 0===t&&(t={});var i=r({},"json"===t.format?s:{},t.headers),a=t.body,u="";return Object.keys(i).some(function(e){return"content-type"===e.toLowerCase()})?u=String(a||""):(i["content-type"]=c,"string"!==typeof a&&(u=JSON.stringify(a))),d(e,r({},t,{method:o,headers:i}),n,u)}function d(e,t,n,r){var c=n.successCallback,s=void 0===c?u:c,l=n.failureCallback,d=void 0===l?u:l,f=t.headers,p=void 0===f?{}:f,h=t.queryParams,m=void 0===h?{}:h,v=t.timeout,b=void 0===v?3e4:v,g=t.credentials,y=void 0===g?"include":g,O=t.method,w=void 0===O?"GET":O,C=function(e,n){var r=e.response;if("json"===t.format)try{r=JSON.parse(r)}catch(t){return void d(i.JSON_PARSE_ERROR,e)}n?d(n,e,r):s(r,e)},j=new XMLHttpRequest;return j.open(w,o.appendQueryString(e,m)),j.withCredentials=a.shouldSendCredentials(e,y),j.timeout=b,Object.keys(p).forEach(function(e){return j.setRequestHeader(e,p[e])}),j.onload=function(){j.status>=200&&j.status<300?C(j):C(j,i.ERROR_STATUS_CODE)},j.onerror=function(){d(i.REQUEST_FAILED,j)},j.ontimeout=function(){d(i.TIMEOUT,j)},j.send(r),j}!function(e){e.TIMEOUT="TIMEOUT",e.REQUEST_FAILED="REQUEST_FAILED",e.JSON_PARSE_ERROR="JSON_PARSE_ERROR",e.ERROR_STATUS_CODE="ERROR_STATUS_CODE"}(i=t.AjaxError||(t.AjaxError={})),t.get=function(e,t,n){return void 0===t&&(t={}),d(e,r({},t,{method:"GET"}),n)},t.post=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"POST")},t.put=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"PUT")},t.del=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"DELETE")},t.sendRequest=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0,n(99),n(100),t.theme={color:"yandex-default",root:"default"}},function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return v});var r=n(4),o=n(0),i=n.n(o),a=n(14),c=n(2),s=n(3),u=n(13),l=n(27),d=(n(324),n(340)),f=n(366),p=n(341),h=function(e){var t=e.visible,n=e.onClose,a=e.children,c=e.essentialRefs,s=Object(p.a)("layer"),u=Object(f.a)(t),l=Object(f.a)(n),d=Object(o.useCallback)(function(e){var t=e.key;if("Escape"===t||"Esc"===t){var n=Object(r.__read)(h.stack[h.stack.length-1]||[],2),o=n[0],i=n[1];o===s&&void 0!==i&&i(e,"esc")}},[]),m=Object(o.useCallback)(function(e){var t=Object(r.__read)(h.stack[h.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===s&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&h.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(h.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(h.stack.push([s,n,c]),document.addEventListener("keyup",d),document.addEventListener("mousedown",m)):(Object(r.__read)(h.stack[h.stack.length-1]||[],1)[0]===s&&requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)}},[]),i.a.createElement(i.a.Fragment,null,a)};h.stack=[],h.displayName="LayerManager";var m=Object(s.cn)("Popup2"),v=function(e){var t=e.addonAfter,n=e.addonBefore,s=e.children,f=e.className,p=e.direction,v=e.forceRender,b=e.hasTail,g=e.innerRef,y=e.keepMounted,O=void 0===y||y,w=e.position,C=e.scope,j=void 0===C?{current:Object(u.a)()?document.body:null}:C,E=e.style,S=e.tailPosition,k=e.tailRef,_=e.tailSize,P=e.visible,I=e.zIndex,x=e.unstable_onRenderTail,R=e.onClose,N=e.unstable_essentialRefs,M=void 0===N?[]:N,T=e.unstable_hostRef,L=e.onOutsideClick,D=e.onEscapeKeyDown,B=e.onClick,A=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),F=Object(r.__read)(Object(o.useState)(!0),2),U=F[0],z=F[1],H=Object(o.useRef)(null);Object(d.a)(function(){U&&P&&z(!1)},[]),Object(o.useEffect)(function(){console.assert(void 0===L||void 0===D,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),U&&(v||P)&&z(!1)},[]);var q=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==D&&D(e):void 0!==L&&L(e),void 0!==R&&R(e,t)},[D,L,R]),W=Object(c.useComponentRegistry)(m()).Tail,V=T||H;return!P&&!O||!Object(u.a)()||null===j.current||U?null:Object(a.createPortal)(i.a.createElement(h,{visible:P,onClose:q,essentialRefs:Object(r.__spread)([V],M)},i.a.createElement("div",Object(r.__assign)({},A,{className:m({visible:P,direction:p},[f]),ref:Object(l.a)(H,g),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},E),w),{zIndex:I}),onClick:B}),n,"function"===typeof s?s({tailRef:k}):s,t,x&&x(i.a.createElement(W,{innerRef:k,style:Object(r.__assign)(Object(r.__assign)({},S),{height:_,width:_})})),!x&&b&&i.a.createElement(W,{innerRef:k,style:Object(r.__assign)(Object(r.__assign)({},S),{height:_,width:_})}))),j.current)};v.displayName=m()},,function(e,t,n){"use strict";n.d(t,"c",function(){return ie}),n.d(t,"b",function(){return ae}),n.d(t,"e",function(){return ue}),n.d(t,"d",function(){return le}),n.d(t,"a",function(){return fe});var r=n(0),o=n.n(r),i=n(2),a=n(30),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=function(){function e(e){this.isLoading=!1,this.chain=[];var t=e.forceFailedReload,n=void 0!==t&&t,r=e.multiRequestLimit,o=void 0===r?1:r,i=e.requestFunction,s=void 0===i?a.get:i,u=e.storeGetter,l=e.storeSetter,d=c(e,["forceFailedReload","multiRequestLimit","requestFunction","storeGetter","storeSetter"]);this.request=s,this.ajaxOptions=d,this.storeGetter=u,this.storeSetter=l,this.loadingParams={forceFailedReload:n},this.multiRequestLimit=o>1?Math.floor(o):1}return e.prototype.precache=function(e,t){var n=this;e.forEach(function(e,r){var o=n.getItemID(e);n.getFromStore(o)||n.chain.push({id:o,data:e,opts:t&&t[r]})}),this.isLoading||this.loadChainItem()},e.prototype.load=function(e,t){void 0===t&&(t={});var n=this.getItemID(e);this.getFromStore(n)||(this.isLoading&&this.currentLoadingItems&&this.currentLoadingItems.some(function(e){return e.id===n})||(t.cleanChain&&this.cleanChain(),t.preempt?(this.chain.unshift({id:n,data:e,opts:t}),this.currentRequest&&(this.currentRequest.abort(),this.loadChainItem())):this.chain.push({id:n,data:e,opts:t}),this.isLoading||this.loadChainItem()))},e.prototype.cleanChain=function(){this.chain.length=0},e.prototype.getFromStore=function(e){return this.storeGetter(e)},e.prototype.setInStore=function(e,t){return this.storeSetter(e,t)},e.prototype.onRequestFinish=function(e,t){var n=this;this.currentRequest=void 0,this.currentLoadingItems=void 0,e.forEach(function(e,r){var o=t[r];n.setInStore(e.id,o);var i=e.opts&&e.opts.callback;i&&i(o)})},e.prototype.extractNextChainItems=function(){for(var e,t=this.multiRequestLimit,n=[],r={};this.chain.length&&n.length<t;)if(e=this.chain.shift()){var o=this.getFromStore(e.id),i=!(!o||!o.isFailed)&&Boolean(this.loadingParams.forceFailedReload||(e.opts||{}).forceFailedReload);o&&!i&&(e=void 0),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n},e.prototype.loadChainItem=function(){var e=this,t=this.extractNextChainItems();if(!t.length)return this.isLoading=!1,this.currentLoadingItems=void 0,void(this.currentRequest=void 0);this.isLoading=!0,this.currentLoadingItems=t;var n=this.getUrl(t);this.currentRequest=this.request(n,this.ajaxOptions,{successCallback:function(n){var r=e.extractResponseData(n).map(function(e){return{data:e,isFailed:!1}});e.onRequestFinish(t,r),e.loadChainItem()},failureCallback:function(){var n=t.map(function(){return{isFailed:!0}});e.onRequestFinish(t,n),e.loadChainItem()}})},e}(),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.instagramUrl=/^https:\/\/(www\.)?instagram.com\//,n.path=t.path,n.config=t.config,n}return u(t,e),t.prototype.getItemID=function(e){return e},t.prototype.isDownloadNotAvailable=function(e){return this.instagramUrl.test(e)},t.prototype.extractResponseData=function(e){var t=this;if(!e.rld||!e.rld.length)return[];var n=this.config.justifier.baseRowHeight;return[e.rld.map(function(e,r){var o=e.s[0],i=e.s[0],a=t.isDownloadNotAvailable(o.pu),c=e.bid&&e.btw&&e.bth?[{w:e.btw,h:e.bth,url:t.buildThumbUrl(e.bid,{n:13,w:e.btw,h:e.bth}),origin:a?void 0:{w:i.iw,h:i.ih,url:i.iu},isMixedImage:!0}]:null,s=e.tw,u=e.th,l=n*t.getPixelDensity(),d=t.thumbSize33(s,u,l),f=e.s.map(function(e){return{w:e.iw,h:e.ih,url:e.iu}}),p=c||f;return a&&c&&f.length&&(f[0].origin=c[0]),{id:e.id,rimid:e.id,pos:r,docid:e.zid,thumb:{url:t.buildThumbUrl(e.mid||e.tid,{n:33,w:d.width,h:d.height},Boolean(e.mid)),size:{w:e.tw,h:e.th}},width:e.bth,height:e.btw,preview:p,dups:f,images:[],origOnlyOpen:a,snippet:{text:"",title:o.t,url:o.pu,domain:o.ph,hasTitle:!0}}})]},t.prototype.buildThumbUrl=function(e,t,n){var r=this.config,o=this.getThumbHostNum(r),i=n?r.thumb.mtHost:r.thumb.hosts[o],c=t||r.thumb.params;return Object(a.appendQueryString)("https://"+i+"/i",l({id:e,ref:"rim"},c))},t.prototype.getThumbHostNum=function(e){return e.thumb.hosts.length>=2?1:0},t.prototype.getUrl=function(e){var t=this.config,n=t.loader.tld||"ru",r=t.loader.host||"yandex."+n+"/images-apphost";return Object(a.appendQueryString)("https://"+r+"/"+this.path,l({docid:e[0].data,lang:n},t.loader.urlParams))},t.prototype.thumbSize33=function(e,t,n){var r=Math.max(e/480,t/n);return{width:Math.round(e/r),height:Math.round(t/r)}},t.prototype.getPixelDensity=function(){return window.devicePixelRatio||1},t}(s),f=n(363),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.uniqueHandler=!0,n.tagsCount=5,n.params={text:t.text,tld:t.tld,duckParams:t.duckParams},n}return p(t,e),t.prototype.updateParams=function(e){this.params=Object.assign(this.params,e)},t.prototype.getUrl=function(e){var t=this.params,n=t.tld,r=void 0===n?"ru":n,o=t.text,i=this.params.duckParams||{},c=i.urlParams||void 0,s={};return void 0!==i.family&&(s.family=i.family,s.pornowhitelist=i.isPornoWhitelistQuery?1:0,s.ipnd=this._getIpnd()),Object(a.appendQueryString)("https://yandex."+r+"/images-apphost/duck",h(h({docid:e[0].data,count:this.tagsCount,lang:r,text:o},s),c))},t.prototype.extractResponseData=function(e){return Array.isArray(e)?[e.filter(function(e){return"string"===typeof e})]:[]},t.prototype.getItemID=function(e){return e},t.prototype._getIpnd=function(){return f.get("ipnd")||"1"},t}(s),v=n(61),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){var n=t.storeGetter,r=t.storeSetter,o=t.multiRequestLimit,i=e.call(this,{credentials:"omit",format:"json",storeGetter:n,storeSetter:r,multiRequestLimit:o})||this;return i.getItemID=Object(v.d)(i.getItemID),i}return b(t,e),t.prototype.getItemID=function(e){return e.toLowerCase()},t.prototype.getUrl=function(e){return"https://favicon.yandex.net/favicon/"+e.map(function(e){return e.data}).join("/").toLowerCase()+"?size=16&json=1"},t.prototype.extractResponseData=function(e){return e.map(function(e){var t=e.image;return t?"data:image/png;base64,"+t:null})},t}(s),y=n(248),O=new i.Registry({id:Object(y.a)()});function w(e,t){O.set(e,t)}w("RimLoader",d),w("TagsLoader",m),w("FaviconLoader",g);var C=n(292),j=n(348),E=n(186),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=/^(https?:)?\/\/(avatars\.mds\.yandex|im[0-9]+-tub-ru\.yandex)\.net/i,_=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.idx=0,o.validateImages=!r||void 0===r.validateImages||r.validateImages,o.onImageSizeError=r&&r.onImageSizeError,o.onImageFileSizeError=r&&r.onImageFileSizeError,o.item=t,o.startLoading(),o}return S(t,e),t.prototype.getUrlFromItem=function(){return this.currentThumb=this.switchToNextThumb(),this.currentThumb?this.currentThumb.url:void 0},t.prototype.getResultData=function(){return this.currentThumb},t.prototype.onLoad=function(){return this.validateImages&&this.loader&&this.currentThumb&&!this.isValidImage(this.loader,this.currentThumb)?this.onError():e.prototype.onLoad.call(this)},t.prototype.onError=function(){if(!this.tryLoadNext()){if(this.thumbWithWrongFileSize)return this.currentThumb=this.thumbWithWrongFileSize,e.prototype.onLoad.call(this);this.onResult(E.b.error)}},t.prototype.isValidImage=function(e,t){var n=this.getImageInfo(e);return this.isSizeMatch(n,t,2)?(this.currentThumb&&(this.currentThumb.noncachable=!j.a.instance().isUrlCachable(n.url)),!!(t.isMixedImage||this.isWhiteListUrl(n.url)||this.isFileSizeMatch(e,t.fileSizeInBytes))||(this.onImageFileSizeError&&this.onImageFileSizeError(n.url),this.currentThumb&&(this.thumbWithWrongFileSize=this.currentThumb),!1)):(this.onImageSizeError&&this.onImageSizeError(n.url),!1)},t.prototype.getImageInfo=function(e){return{url:e.src,w:e.width,h:e.height}},t.prototype.isFileSizeMatch=function(e,t){if(!t||!window.yandex)return!0;var n,r=window.yandex.publicFeature;if(!r||!r.getImageOriginalSize||!r.getImageSize)return!0;try{n=r.getImageOriginalSize(e)}catch(t){try{n=r.getImageSize(e)}catch(e){return!0}}return n===t},t.prototype.isSizeMatch=function(e,t,n){return void 0===n&&(n=0),!t.w&&!t.h||Math.abs(e.w-t.w)<=n&&Math.abs(e.h-t.h)<=n},t.prototype.isWhiteListUrl=function(e){return k.test(e)},t.prototype.switchToNextThumb=function(){var e,t=this.idx;if(this.item.preview){if(t<(e=this.item.preview.length))return this.idx++,this.item.preview[t];for(t-=e;t<e;){var n=this.item.preview[t].origin;if(this.idx++,n)return n;t++}t-=e}if(t<(e=this.item.dups.length))return this.idx++,this.item.dups[t];for(t-=e;t<e;){n=this.item.dups[t].origin;if(this.idx++,n)return n;t++}},t}(E.a),P=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.resultHandler=this.resultHandler.bind(this),this.validateImages=e&&e.validateImages,this.onImageLoaded=e&&e.onImageLoaded,this.onImageSizeError=e&&e.onImageSizeError,this.onImageFileSizeError=e&&e.onImageFileSizeError,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this,r=this.imagesCache[e.id];if(!this.currentWorkersData.some(function(t){return t.item.id===e.id})&&!r){var o;this.stop();o={item:e,onResultHandler:t,loader:new _(e,function(e,t){n.resultHandler(e,t,o)},{itemTimeout:15e3,timeout:9e4,validateImages:this.validateImages,onImageSizeError:this.onImageSizeError,onImageFileSizeError:this.onImageFileSizeError,onImageError:this.onImageError})},this.currentWorkersData.push(o)}},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item,o=n.onResultHandler;if(this.removeItemFromQueue(n),!e&&t&&(this.imagesCache[r.id]=t),this.onImageLoaded&&this.onImageLoaded(r,t),o)return e||!t?o(e||E.b.error):void o(void 0,t)},e}(),I=n(8),x=n(23),R=6;function N(e,t){var n=Object(I.j)(t),r=void 0!==t.rimSelectedIdx,o=t.config.imagesLoadingParams.numImagesPreload||0;if(n){if(n&&!t.loadedThumbs[n.id])return e.rimThumbsLoader&&e.rimThumbsLoader.stop(),L(e,n,r?void 0:t.currentItemIdx);var i=t.config.imagesLoadingParams.rimPreloadImagesCount||0;if(!T(e,t,t.rimForItem))for(var a=1;a<=o;a++){var c=t.currentItemIdx+a,s=Object(I.f)(t,c);if(s){if(!t.loadedThumbs[s.id])return L(e,s,c);if(a<=i&&M(e,t,s))return}}}}function M(e,t,n){if(!e.rimThumbsLoader)return!1;var r=Object(C.d)(t,Object(C.e)(n));if(!r||!r.data)return!1;var o=t.config.imagesLoadingParams.rimPreloadPerImage||R;return T(e,t,r.data,o)}function T(e,t,n,r){if(!e.rimThumbsLoader)return!1;var o=Object(C.f)(n,t.loadedRimThumbs,r);return!!o.length&&(e.rimThumbsLoader.precache(o),!0)}function L(e,t,n){e.imageLoader.load(t,function(r,o){e.dispatch(Object(x.e)(t.id,{data:o,isFailed:!o},n))})}var D=function(e,t){var n=Object(I.c)(t);if(n){var r=B(t,n);r.length&&e.faviconLoader&&(e.faviconLoader.cleanChain(),r.forEach(function(t){var n;null===(n=e.faviconLoader)||void 0===n||n.load(t)}))}};function B(e,t,n){var r;void 0===n&&(n={isPreloading:!1});var o=Object(I.e)(t),i=[];return i.push(o),t&&t.schemaOrgSnippet&&i.push(t.schemaOrgSnippet.punycode||t.schemaOrgSnippet.domain),t&&t.marketSnippet&&i.push(t.marketSnippet.punycode||t.marketSnippet.domain),t&&(null===(r=e.experiments)||void 0===r?void 0:r.similarOffersFavicons)&&t.similarOffers&&!n.isPreloading&&t.similarOffers.forEach(function(e){i.push(e.domain)}),t&&t.otherOffers&&t.otherOffers.forEach(function(e){i.push(e.punycode||e.domain)}),i.filter(function(e){return null!=e})}var A=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},F=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e};function U(e,t){var n=Object(I.c)(t),r=Object(C.e)(n);D(e,t),r&&e.tagsLoader&&e.tagsLoader.load(r,{preempt:!0,cleanChain:!0})}function z(e,t,n){var r=e.rimLoader;if(r){var o=t.rimData[n];o?e.dispatch(Object(x.f)(n,o)):r.load(n,{preempt:!0})}}function H(e,t){var n=Object(I.c)(t),r=Object(C.e)(n);r&&z(e,t,r)}function q(e,t){for(var n=Object(I.i)(t),r=t.images,o=[],i=[],a=0;a<n.length;a++){var c=r[n[a]];if(c){var s=Object(C.e)(c),u=B(t,c,{isPreloading:!0});u&&i.push.apply(i,F(u)),s&&o.push(s)}}e.faviconLoader&&e.faviconLoader.precache(i),e.tagsLoader&&e.tagsLoader.precache(o),e.rimLoader&&(e.rimLoader.cleanChain(),e.rimLoader.precache(o))}var W=n(124);function V(e,t){return function(e,t,n,r){if(!r)return{images:t.concat(n),loadedPagesCount:e+1};var o=t.slice(0);return n.forEach(function(e){var t=r[e.docid];"undefined"!==typeof t?(o[t]=e,delete r[e.docid]):o.push(e)}),{loadedPagesCount:e+1,images:o,emptyImagesMap:Object.keys(r).length?r:void 0}}(e.loadedPagesCount,e.images,Object(I.h)(e.config.viewerDataLoadingType||0,t,e.images.length),e.emptyImagesMap)}var G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=5,K=Z("favicons"),X=Z("tags"),Q=Z("rimData");var J=3e5;function Z(e){return function(t,n,r){var o,i;return(o={})[e]=G(G({},t[e]),((i={})[n]=r,i)),o}}var $,ee=function(e,t){switch(void 0===e&&(e=ie),t.type){case x.a.UPDATE_CONFIG:return function(e,t){return{config:G(G({},e.config),t)}}(e,t.config);case x.a.UPDATE_CONTEXT:return function(e,t){return{globalContext:G(G({},e.globalContext),t)}}(e,t.context);case x.a.ADD_FAVICON_DATA:return K(e,t.id,t.data);case x.a.ADD_TAGS_DATA:return X(e,t.id,t.data);case x.a.ADD_RIM_DATA:return function(e,t,n){var r=e.imagesByRimId,o=e.rimForItem,i=e.rimLoadingId,a=e.rimPageItems,c=e.rimPageItemsMap,s=e.rimLoadingIdx,u=e.rimPagesCount,l=e.loadedRimThumbs,d=e.rimEmptyPageLoadCount,f=Q(e,t,n),p=Object(C.e)(Object(I.c)(e)),h=Object(C.a)(n&&n.data||[],c,l);if(p===t){var m=Object(I.c)(e);m&&(c=Object(W.c)([m],c)),c=Object(W.c)(h,c),o=h,u++}else if(i===t){var v=e.config.rim,b=v?v.loader.itemsOnPage:8;a=a.concat(h),c=Object(W.c)(h,c),a.length>=b?(o=o.concat(a),a=[],i="",u++):(s++,i=Object(C.e)(o[s])||"")}return r=Object(W.c)(h,r),G(G({},f),{rimForItem:o,rimPageItems:a,rimPageItemsMap:c,rimPagesCount:u,rimLoadingId:i,rimLoadingIdx:s,imagesByRimId:r,rimEmptyPageLoadCount:h.length>0||i!==t?0:d+1})}(e,t.id,t.data);case x.a.REQUEST_RIM_PAGE:return function(e){var t=e.config.rim;if(!t)return null;var n=t.loader.pagesMaxCount,r=e.rimLoadingIdx,o=e.rimLoadingId,i=e.rimForItem,a=e.rimPagesCount,c=e.rimEmptyPageLoadCount;return o||a>n||c>Y?null:(r++,{rimLoadingId:o=Object(C.e)(i[r])||"",rimLoadingIdx:r})}(e);case x.a.SET_SELECTED_RIM:return function(e,t){var n,r=Object(C.c)(e,t),o={rimSelectedIdx:t,commercialCropSelectedIdx:void 0};if(r){var i=e.loadedThumbs[r.id];i&&!i.data&&(o.loadedThumbs=G(G({},e.loadedThumbs),((n={})[r.id]=void 0,n)))}return o}(e,t.idx);case x.a.SET_CURRENT_ITEM_IDX:return function(e,t){var n,r=t!==e.currentItemIdx;if(!r)return{rimSelectedIdx:void 0,commercialCropSelectedIdx:void 0};var o={currentItemIdx:t,rimSelectedIdx:void 0,rimForItem:[],rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimEmptyPageLoadCount:0,rimPageItemsMap:{}};r&&(o.preloadImagesIndexes=Object(I.g)(e,t),o.commercialCropSelectedIdx=void 0);var i=Object(I.f)(e,t),a=i&&e.loadedThumbs[i.id];return a&&!a.data&&(o.loadedThumbs=G(G({},e.loadedThumbs),((n={})[i.id]=void 0,n))),o}(e,t.index);case x.a.ADD_IMAGES_BY_THUMB:return V(e,t.items);case x.a.ADD_IMAGES_BY_POS:return function(e,t){return{images:Object(W.b)(t,e.images),imagesByRimId:Object(W.c)(t,e.imagesByRimId)}}(e,t.items);case x.a.SET_IMAGES_BY_POS:return function(e,t){return{images:Object(W.b)(t),imagesByRimId:Object(W.c)(t)}}(0,t.items);case x.a.SET_IMAGES_BY_ID:return function(e,t){return{images:Object(W.a)(t,e.images),imagesByRimId:Object(W.c)(t,e.imagesByRimId)}}(e,t.items);case x.a.ADD_LOADED_THUMB_DATA:return function(e,t,n,r){var o,i={loadedThumbs:G(G({},e.loadedThumbs),(o={},o[t]=n,o))};if(void 0===r)return i;var a=e.images[r];return a&&(i.images=e.images.slice(),i.images[r]=G(G({},a),{loadedImage:n})),i}(e,t.id,t.data,t.index);case x.a.ADD_CROP_OBJECT:return function(e,t){var n;return{cropObjects:G(G({},e.cropObjects),(n={},n[t.imageId]={data:t.data,expireTime:t.timestamp+J},n))}}(e,t);case x.a.SET_TRIMMER_AREA:return function(e,t){return{trimmerArea:t}}(0,t.area);case x.a.ADD_LOADED_RIM_THUMB_DATA:return function(e,t,n){var r,o=G(G({},e.loadedRimThumbs),((r={})[t]=n,r)),i={loadedRimThumbs:o};return i.rimForItem=Object(C.a)(e.rimForItem,void 0,o),i}(e,t.id,t.data);case x.a.SET_SELECTED_COMMERCIAL_CROP:return function(e,t){return{commercialCropSelectedIdx:t}}(0,t.idx);default:return e}},te={reqid:"#invalid-value-error",query:"#invalid-value-error",yandexuid:"#invalid-value-error",lr:-100500,tld:"#invalid-value-error",lang:"#invalid-value-error"},ne=(($=r.createContext(te)).Provider,$.Consumer,n(49)),re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(){return(oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ie={images:[],loadedThumbs:{},loadedRimThumbs:{},imagesByRimId:{},currentItemIdx:-1,preloadImagesIndexes:[],loadedPagesCount:0,wizardThumbs:[],favicons:{},tags:{},rimData:{},rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimForItem:[],rimPageItems:[],rimPageItemsMap:{},rimEmptyPageLoadCount:0,config:{preloadLeftBorder:1,preloadRightBorder:5,imagesCbirSearchUrl:"",openServiceOnNewTab:!1,imagesLoadingParams:{},rim:{justifier:{baseRowHeight:150},loader:{pagesMaxCount:1,itemsOnPage:8,preloadCountOnInit:5,preloadCountOnMore:1},thumb:{hosts:["im0-tub-ru.yandex.net"],mtHost:"avatars.mds.yandex.net"}}},globalContext:te,cropObjects:{}},ae=Object(r.createContext)({cache:{},updateCache:ne.a}),ce=o.a.createContext({state:ie,dispatch:function(){return{}}});function se(e,t){if(e===t)return!0;if(null===e||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return e[n]===t[n]})}function ue(e){return function(t){var n=function(n){function r(t){var r=n.call(this,t)||this;return r.state=e(t.state,t.dispatch,t.ownProps),r}return re(r,n),r.prototype.shouldComponentUpdate=function(e,t){return!se(t,this.state)||!se(e.ownProps,this.props.ownProps)},r.prototype.render=function(){return o.a.createElement(t,oe({},this.props.ownProps,this.state))},r.getDerivedStateFromProps=function(t,n){var r=e(t.state,t.dispatch,t.ownProps);return Object.keys(n).forEach(function(e){void 0===r[e]&&void 0!==n[e]&&(r[e]=void 0)}),r},r.displayName="Connected-"+(t.displayName||t.name||"Component"),r}(o.a.Component);return function(e){return o.a.createElement(ce.Consumer,null,function(t){var r=t.state,i=t.dispatch;return o.a.createElement(n,{state:r,dispatch:i,ownProps:e})})}}}var le=function(e){var t=o.a.useContext(ce);return e(t.state,t.dispatch)},de=function(e){function t(t){var n=e.call(this,t)||this;n.componentIsMounted=!1,n.state=oe(oe({},ie),t.initialState);var r=n.state.config;n.props.TagsLoader||(r.isDuckEnabled=!1),n.props.RimLoader||(r.rim=void 0),n.dispatch=n.dispatch.bind(n);var o=r.imagesLoadingParams;n.imageLoader=new P(o),void 0!==o.rimPreloadImagesCount&&n.props.ThumbsLoader&&(n.rimThumbsLoader=new n.props.ThumbsLoader({onImageError:o.onRimLoadingError,onImageLoaded:function(e,t){n.dispatch(Object(x.d)(e.url,{data:t,isFailed:!t}))}})),!1!==r.isDuckEnabled&&n.props.TagsLoader&&(n.tagsLoader=new n.props.TagsLoader(oe(oe({},Object(C.j)(n.state.globalContext)),{duckParams:r.duckParams,storeGetter:function(e){return Object(C.h)(n.getState(),e)},storeSetter:function(e,t){var r=t&&t.data||[];n.dispatch(Object(x.g)(e,{data:r}))}}))),n.props.FaviconLoader&&(n.faviconLoader=new n.props.FaviconLoader({multiRequestLimit:r.preloadRightBorder+r.preloadLeftBorder,storeGetter:function(e){return n.getState().favicons[e]},storeSetter:function(e,t){n.dispatch(Object(x.b)(e,t))}}));var i=r.rim;return i&&n.props.RimLoader&&(n.rimLoader=new n.props.RimLoader({path:"rim",config:i,storeGetter:function(e){return n.getState().rimData[e]},storeSetter:function(e,t){t&&!t.isFailed&&t.data&&(t.data=Object(v.b)("docid",t.data)),n.dispatch(Object(x.f)(e,t))}})),n}return re(t,e),t.prototype.render=function(){return o.a.createElement(ce.Provider,{value:{state:this.getState(),dispatch:this.dispatch}},this.props.children)},t.prototype.componentDidMount=function(){var e;this.componentIsMounted=!0;var t=this.getState();(null===(e=t.experiments)||void 0===e?void 0:e.preloadImagesOnMount)&&(N(this,t),H(this,t))},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1},t.prototype.componentDidUpdate=function(e,t){var n=this.getState(),r=n.currentItemIdx!==t.currentItemIdx,o=void 0!==n.rimSelectedIdx,i=n.globalContext!==t.globalContext,a=!r&&n.rimLoadingId!==t.rimLoadingId,c=n.rimPagesCount!==t.rimPagesCount,s=Boolean(n.rimForItem.length);n.loadedThumbs===t.loadedThumbs&&n.loadedRimThumbs===t.loadedRimThumbs&&n.rimForItem===t.rimForItem&&n.images===t.images||(N(this,n),U(this,n),q(this,n)),r&&(this.rimThumbsLoader&&this.rimThumbsLoader.stop(),N(this,n),U(this,n),s||H(this,n),q(this,n)),o&&(!function(e,t){var n=Object(I.j)(t);if(n){var r={preempt:!0},o=Object(C.e)(n),i=Object(I.e)(n);o&&e.tagsLoader&&e.tagsLoader.load(o,r),i&&e.faviconLoader&&e.faviconLoader.load(i,r)}}(this,n),N(this,n)),i&&function(e,t){e.tagsLoader&&e.tagsLoader.updateParams(Object(C.j)(t.globalContext))}(this,n),a&&function(e,t){var n=t.rimLoadingId;n&&z(e,t,n)}(this,n),(a||c)&&(!function(e,t){var n=e.rimLoader;if(n){var r=t.config.rim;if(r&&r.loader.pagesMaxCount){var o=r.loader,i=o.preloadCountOnInit,a=void 0===i?1:i,c=o.preloadCountOnMore,s=void 0===c?1:c,u=t.rimPagesCount,l=t.rimLoadingIdx,d=t.rimLoadingId,f=t.rimForItem,p=!d&&1===u,h=p?a:s,m=p?0:a+l,v=Object(C.b)(f,m,h);v.length&&n.precache(v)}}}(this,n),T(this,n,n.rimForItem)),this.props.onStateChange&&this.props.onStateChange(n,t)},t.prototype.dispatch=function(e){this.componentIsMounted&&this.setState(ee(this.getState(),e))},t.prototype.getState=function(){return this.state},t}(o.a.Component),fe=Object(i.withRegistry)(O)(function(e){return o.a.createElement(i.ComponentRegistryConsumer,{id:Object(y.a)()},function(t){var n=t.RimLoader,r=t.TagsLoader,i=t.FaviconLoader,a=t.ThumbsLoader;return o.a.createElement(de,oe({ref:e.forwardRef,RimLoader:n,TagsLoader:r,FaviconLoader:i,ThumbsLoader:a},e))})})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("Carousel")},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e){var t={};return function(n,r){var a=function(e,t){return e.reduce(function(e,n){return n in t&&e.push(n+"="+t[n]),e},[]).join(".")}(e,n);return t[a]||(t[a]=function(e){return o.a.createElement(r,i({className:e},n))}),t[a]}}},function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,a={},c=0,s=0;function u(e){var t="";do{t=o[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function l(){var e=u(+new Date);return e!==r?(c=0,r=e):e+"."+u(c++)}for(;s<i;s++)a[o[s]]=s;l.encode=u,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=t*i+a[e.charAt(s)];return t},e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BaobabContext=r.createContext(void 0),t.Provider=t.BaobabContext.Provider,t.Consumer=t.BaobabContext.Consumer},,function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"h",function(){return c}),n.d(t,"e",function(){return s}),n.d(t,"g",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"j",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"i",function(){return p}),n.d(t,"a",function(){return h});var r=n(3),o=Object(r.cn)("OtherOffers"),i=(o(),o({fold:!0})),a=(o("Table"),o("Offer")),c=o("OfferInfo"),s=o("OfferDetails"),u=o("OfferGreenUrl"),l=o("OfferShopRating"),d=o("OfferPrice"),f=o("OfferFavicon"),p=o("OfferMarketFavicon"),h=2},,,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=function(e){var t=e.dataSource,n=e.clickSource,r=e.clickArea,o=e.actionType;return{"action-type":void 0===o?"greenurl":o,"click-source":n,"click-area":r,"data-source":t,"decoded-url":e.decodedUrl,pos:e.pos}},o=function(e){var t=e.dataSource,n=e.decodedUrl,r=e.decodedUrls,o=e.pos;return{"data-source":t,url:n,urls:function(e){if(e)return e.filter(Boolean).map(function(e,t){return t+":"+e}).join(";")}(r),pos:o}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return f});var r=n(0),o=n(239),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=r.createContext({}),c=a.Provider,s=a.Consumer;function u(e){var t=function(t){return r.createElement(s,null,function(n){return r.createElement(e,i({},t,{counters:n}))})};return t.displayName=Object(o.getDisplayName)(e)+":withImageCounters",t}var l=function(){return r.useContext(a)},d=function(e){return function(t){var n=function(n){var o=l(),a=r.useMemo(function(){return"string"===typeof e?o[e]:e(o)},[e,o]);return r.createElement(t,i({},n,{counters:a}))};return n.displayName=Object(o.getDisplayName)(t)+":withImageCounters",n}},f=function(e){return function(t){return t.counters?r.createElement(c,{value:t.counters},r.createElement(e,i({},t))):r.createElement(e,i({},t))}}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=n(0),o=n(3),i=(n(545),Object(o.cn)("MMIcon")),a=function(e){var t=e.className;return r.createElement("i",{className:i(null,[t])})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(){return window.Ya.SerpContext}()[e]}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},function(e,t,n){"use strict";var r,o,i,a;n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e[e.disabled=0]="disabled",e[e.top=1]="top",e[e.middle=2]="middle"}(r||(r={})),function(e){e.full="full",e.short="short"}(o||(o={})),function(e){e.normal="normal",e.block="block"}(i||(i={})),function(e){e.compact="compact",e.twoLines="two-lines"}(a||(a={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMSidebar")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("CarouselArrow")},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s});var r,o=n(0),i=n(3),a=n(6);n(805);!function(e){e.default="",e.link="link"}(r||(r={}));var c=Object(i.cn)("MMButton"),s=Object(a.withBaobab)({name:"MMButton",events:{onClick:Object(a.logClick)()}})(function(e){var t=e.text,n=e.title,r=e.icon,i=e.rightIcon,a=e.rightText,s=e.onClick,u=e.className,l=e.forwardRef,d=e.onLog,f=e.counter,p=e.onContextMenuCapture,h=e.onMouseEnter,m=e.onMouseLeave;return o.createElement("button",{className:c({},[u]),onClick:function(e){s&&s(e),d&&d(f)},onMouseEnter:h,onMouseOut:m,onContextMenuCapture:p,title:n,ref:l},r&&o.createElement("span",{className:c("Icon")},r),o.createElement("span",{className:c("Text")},t),a&&o.createElement("span",{className:c("RightText")},a),i&&o.createElement("span",{className:c("RightIcon")},i))})},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(0),o=n.n(r),i=n(3),a=n(118),c=n(5),s=n.n(c),u=Object(i.cn)("Rouble"),l=(n(219),function(){return o.a.createElement("span",{className:u()},"₽")}),d=n(221),f=s()(d),p={RUR:"RUB",BYR:"BYN"},h={RUB:"₽",EUR:"€",USD:"$",UAH:"₴",KZT:"₸"},m={RUB:f("руб."),EUR:f("евро"),USD:f("долл."),UAH:f("грн."),KZT:f("тнг."),BYN:f("б.p."),TRY:"TL"},v=function(e){return m[e]||e},b=Object(i.cn)("PriceCurrency"),g=function(e){var t,n=e.currency,r=e.showAbbr,i=p[n]||n;return t=void 0!==r&&r?v(i):"RUB"===i?o.a.createElement(l,null):h[i]||v(i),o.a.createElement("span",{className:b()},t)},y=Object(i.cn)("Price"),O=function(e){var t=e.className,n=e.value,r=e.withMinLabel,i=e.currency,c=e.showAbbr,s=e.groupLength,u=e.groupSeparator,l=void 0===u?" ":u,d=e.largeSeparator,f=e.isCrossed,p=void 0!==f&&f;return o.a.createElement("span",{className:y(null,[t])},o.a.createElement(a.a,{isCrossed:p,value:n,withMinLabel:r,groupLength:s,largeSeparator:d}),l,o.a.createElement(g,{currency:i,showAbbr:c}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(258),i=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(e){void 0===e&&(e=!1);var t=i(Object(o.a)(e),2),n=t[0],a=t[1];return[n,Object(r.useCallback)(function(){return a(!0)},[a]),Object(r.useCallback)(function(){return a(!1)},[a]),a]}},,function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var r,o=n(0),i=n.n(o),a=n(6),c=n(40),s=n(120);function u(e,t,n,r){return e.parentNode?function(e,t,n){void 0===n&&(n={});var r=Object(a.createChildData)(e,t,n);return"title"===r.name&&(r.events||(r.events={}),r.events.onSearchinderSwipe=Object(a.logClick)({swipe:1})),r}(t,n,r):function(e,t,n,r){var o=Object(a.createChildData)(e,t,n);return o.attrs=o.attrs||{},o.attrs.service=o.attrs.service||r&&r.service,o.attrs.ui=o.attrs.ui||r&&r.ui,o.attrs.react=o.attrs.reactReady||r&&r.react,o}(t,n,r,{ui:e.logger.ui,service:e.logger.service,react:e.logger.reactReady})}!function(e){e[e.Partial=.5]="Partial",e[e.Full=1]="Full"}(r||(r={}));var l=function(e){return e.stopPropagation()};function d(e,t,n){if(t){var r=n&&n.indexOf("/jsredir")>0?"rc":"b";e["data-counter"]=e["data-counter"]||(n?'["'+r+'","'+n+'"]':'["b"]'),e["data-log-node"]=e["data-log-node"]||t.id,e.onMouseDown=function(e){return e?function(t){l(t),e(t)}:l}(e.onMouseDown)}return e}n(136);var f={theme:1,counter:1,children:1,url:1,logNode:1,fontWeight:1,baobabNode:1,baobabId:1,logHref:1},p=function(e){return function(t){var n=Object(o.useContext)(c.BaobabContext),r=i.a.useMemo(function(){return n?u(n,t,{name:"link"},t.logNode):{}},[]),l=Object(a.useBaobab)(r),p=l.nextContext,h=l.node,m=l.logEvent,v=Object(o.useMemo)(function(){return function(e){var n,o=null===(n=null===r||void 0===r?void 0:r.events)||void 0===n?void 0:n.onClick;if("boolean"!==typeof o||o)if("object"===typeof o&&o.data){var i=o.data;"function"===typeof i&&(i=i({props:t},e)),m(Object(a.logClick)(i),[e],t)}else m(Object(a.logClick)(),[e],t);t.onClick&&t.onClick(e)}},[m,t,r]),b=function(e,t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}(t,f),g=t.url,y=t.target;return d(b,h,t.logHref),b.className=Object(s.b)({theme:t.theme,fontWeight:t.fontWeight},[t.className]),b.href=g,b.target=void 0===y?"_blank":y,b.onClick=v,i.a.createElement(c.BaobabContext.Provider,{value:p},i.a.createElement(e,b,t.children))}},h=p(s.a);h.isBaobabNode=!0},function(e,t,n){"use strict";"function"===typeof Element&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},,function(e,t,n){"use strict";function r(e){return function(t,n){return n?t[e][n]:{data:void 0,isFailed:!1}}}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};return t.reduce(function(t,n){return n.reduce(function(t,n){var o=String(n[e]);return r[o]||(r[o]=!0,t.push(n)),t},t)},[])}function i(e){var t,n;return function(){if(!n||n.length!==arguments.length)return n=arguments,t=e.apply(this,arguments);for(var r=0;r<n.length;r++)if(n[r]!==arguments[r])return n=arguments,t=e.apply(this,arguments);return t}}function a(e,t){var n,r;return function(){var o=e.apply(this,arguments);if(!r||r.length!==o.length)return r=o,n=t.apply(this,o);for(var i=0;i<r.length;i++)if(r[i]!==o[i])return r=o,n=t.apply(this,o);return n}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a});var r=n(84),o="object"===typeof window,i=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)};n.n(r).a},,function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return c});var r=n(3),o=Object(r.cn)("Path"),i=o(),a=o("Item"),c=o("Separator")},function(e,t,n){"use strict";function r(e){return e.displayName||e.name||"Component"}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(3),o=Object(r.cn)("MMSimilarOffers"),i="MMSimilarOffersId"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(437);var r={open:"images-viewer:open",beforeOpened:"images-viewer:beforeOpened",opened:"images-viewer:opened",close:"images-viewer:close",beforeClosed:"images-viewer:beforeClosed",closed:"images-viewer:closed",mounted:"images-viewer:mounted",unmounted:"images-viewer:unmounted",fill:"images-viewer:fill",cbirCrop:"images-viewer:cbirCrop",selectItem:"images-viewer:selectItem",imageShow:"images-viewer:imageShow",listOut:"images-viewer:listOut",rimClick:"images-viewer:rimClick",fullscreenEnter:"images-viewer:fullscreenEnter",fullscreenExit:"images-viewer:fullscreenExit"}},,function(e,t,n){"use strict";e.exports=n(143)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,n){var r,o=0,i=n&&n.delayedLastCall;function a(){o&&(clearTimeout(o),o=0)}var c=function(){var n=Date.now(),c=arguments,s=function(){e.apply(void 0,c),r=Date.now(),o=0};a(),void 0===r||n-r>t?s():i&&(o=setTimeout(s,t-(n-r)))};return c.cancel=a,c}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(3),c=(n(377),Object(a.cn)("Spin2")),s=function(e){var t=e.className,n=e.innerRef,o=e.progress,a=(e.view,e.position,e.size,Object(r.__rest)(e,["className","innerRef","progress","view","position","size"]));return i.a.createElement("div",Object(r.__assign)({},a,{ref:n,className:c({progress:o},[t])}))};s.displayName=c()},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(4),o=n(0),i=n.n(o),a=n(2),c=n(3),s=(n(511),Object(c.cn)("Modal")),u=function(e){var t=e.children,n=e.className,c=e.contentVerticalAlign,u=void 0===c?"middle":c,l=e.hasAnimation,d=void 0===l||l,f=e.visible,p=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(a.useComponentRegistry)(s()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:s({visible:f,hasAnimation:d},[n]),visible:f,unstable_hostRef:m,onClick:p}),i.a.createElement("div",{className:s("Table")},i.a.createElement("div",{className:s("Cell",{align:u})},i.a.createElement("div",{ref:m,className:s("Content")},t))),i.a.createElement("div",{className:s("Overlay")}))};u.displayName=s()},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(304)),r(n(305)),r(n(306)),r(n(307))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n.n(r),i=n(3),a=n(9),c=(n(133),Object(i.cn)("NativeScroll")),s=Object(r.forwardRef)(function(e,t){var n=e.className,i=e.innerClassName,s=e.children,u=e.withVerticalGaps,l=void 0!==u&&u,d=e.locked,f=void 0!==d&&d,p=e.disableScrollPolyfill,h=void 0!==p&&p,m=e.onScroll,v=void 0===m?a.a:m,b=Object(r.useRef)(!1),g=Object(r.useRef)(null),y=Object(r.useRef)(null),O=Object(r.useCallback)(function(){var e=g.current,t=y.current;return{clientWidth:(null===e||void 0===e?void 0:e.clientWidth)||0,scrollWidth:(null===t||void 0===t?void 0:t.scrollWidth)||0,scrollLeft:(null===t||void 0===t?void 0:t.scrollLeft)||0}},[]),w=Object(r.useCallback)(function(){return v(O())},[v,O]),C=Object(r.useCallback)(function(e){var t=e.currentTarget,n=e.target;if(!f&&y.current&&t.contains(n)&&Math.abs(e.deltaY)>Math.abs(e.deltaX)){var r=y.current.scrollLeft;y.current.scrollLeft+=e.deltaY,b.current=r!==y.current.scrollLeft}},[f]);Object(r.useEffect)(function(){var e=function(e){b.current&&(e.preventDefault(),b.current=!1)};return document.addEventListener("wheel",e,{passive:!1}),function(){return document.removeEventListener("wheel",e)}},[]);var j=Object(r.useCallback)(function(e){y.current&&(y.current.scrollLeft=e)},[]);return Object(r.useImperativeHandle)(t,function(){return{scroll:j,getScrollData:O}}),o.a.createElement("div",{className:c({"vertical-gaps":l,locked:f},[n]),ref:g},o.a.createElement("div",{className:c("Container")},o.a.createElement("div",{className:c("Inner",[i]),ref:y,onScroll:w,onWheel:h?void 0:C},s)))})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(3),i=(n(327),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),a=Object(o.cn)("MMFavicon"),c=function(e){var t=e.favicon,n=e.url,o=e.className,c=-1===t.indexOf("data:image/"),s={backgroundImage:"url("+t+")"},u=i(r.useState(c),2),l=u[0],d=u[1],f=l?a({hidden:!0}):"",p=a({},[o,f]),h=r.useRef(null);function m(e){e.target.height>1&&d(!1)}return r.useEffect(function(){var e=h&&h.current;if(c&&e)return e.naturalHeight>1&&d(!1),e.addEventListener("load",m),function(){e.removeEventListener("load",m)}},[h,c]),n?r.createElement("a",{href:n,className:p,rel:"noopener",target:"_blank",style:s,onClick:e.onClick}):c?r.createElement("img",{className:p,src:t,ref:h,onClick:e.onClick}):r.createElement("div",{className:p,style:s,onClick:e.onClick})}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){Object(r.useEffect)(e,[])}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e){return function(t){var n;return(n=Array.isArray(e)?function(n){return function(e,t){return t.every(function(t){return void 0!==e[t]})}(n,e)?r.createElement(t,o({},n)):null}:function(n){return e(n)?r.createElement(t,o({},n)):null}).displayName=t.displayName||t.name||"Component",n}}},,,function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(152),o=function(e,t){return void 0===t&&(t=0),Object(r.a)(100*e,t)+"%"}},function(e,t,n){n.r(t);var r=n(5);Object(r.setI18nLang)("tr")},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var a=i[o];if(("_owner"!==a||!t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?1===e?t.one:t.some:t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?t.some:t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},,,function(e,t,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var r=Object(e);return t.forEach(function(e){e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);void 0!==n&&n.enumerable&&(r[t]=e[t])})}),r}})},function(e,t,n){"use strict";function r(e){var t=e.n||"",n=e.v||e.m;function r(r,o,i,a){var c=o?t+r+e.e+o:t+r,s=c;if(i){var u=" "+s+e.m;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];!0===d?s+=u+l:d&&(s+=u+l+n+d)}}if(void 0!==a)for(var f=0,p=a.length;f<p;f++){var h=a[f];if("string"==typeof h&&h)for(var m=h.split(" "),v=0;v<m.length;v++){var b=m[v];b!==c&&(s+=" "+b)}}return s}return function(e,t){return function(n,o,i){return"string"==typeof n?Array.isArray(o)?r(e,n,void 0,o):r(e,n,o,i):r(e,t,n,o)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r({e:"-",m:"_"});t.cn=o,t.withNaming=r},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n(159)()},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.useCallback)(function(n){return e.apply(void 0,i([n],t))},i([e],t))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={lt:"<",gt:">",quot:'"',apos:"'",amp:"&",raquo:"»",laquo:"«",ndash:"–",mdash:"—",lsquo:"‘",lsaquo:"‹",rsquo:"’",rsaquo:"›",acute:"´",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",prime:"′",Prime:"″",deg:"°",reg:"®",copy:"©",trade:"™",sup2:"²",nbsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",middot:"·",hellip:"…",Oslash:"Ø","#8381":"₽","#039":"'","#8203":"​","#092":"\\"},o=new RegExp("&(("+Object.keys(r).join("|")+")|#(x[0-9A-Fa-f]+|[0-9]+));","g");function i(e){try{return String.fromCodePoint(e)}catch(e){return""}}function a(e){if(isNaN(e)||e<0)return"";if(e>65535){if(e>1114111)return"";var t=e-65536;return String.fromCharCode(55296+(t>>10),56320+(1023&t))}return String.fromCharCode(e)}t.parseCodeToCharNative=i,t.parseCodeToCharFallback=a;var c="function"===typeof String.fromCodePoint?i:a;t.decodeHTMLEntities=function(e){return e.replace(o,function(e,t,n,o){return n?r[n]||"":o?c(Number("0"+o)):""})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var r,o=n(0),i=n(3);n(802);!function(e){e.xs="xs",e.s="s",e.n="n",e.m="m",e.l="l",e.xl="xl"}(r||(r={}));var a=Object(i.cn)("Spinner");function c(e){var t=e.size,n=e.className,r=void 0===n?"":n,i=e.type,c=e.theme,s=void 0===c?"yellow":c;return o.createElement("div",{className:a({size:t,type:i,theme:s},[r])})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMGallery")},,function(e,t,n){"use strict";function r(e){var t=function(){throw new Error("Not found base component for enhance HOC: "+e.toString())};return t.$symbol=d,t.hoc=e,t}function o(e){return e.$symbol===d}Object.defineProperty(t,"__esModule",{value:1});var i=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=i.createContext({}),s=c.Provider,u=c.Consumer,l=function(){return i.useContext(c)},d="RegistryHoc",f=function(){function e(e){var t=e.id,n=e.overridable,r=void 0===n?1:n;this.components={},this.id=t,this.overridable=r}return e.prototype.set=function(e,t){return this.components[e]=t,this},e.prototype.extends=function(e,t){return this.components[e]=r(t),this},e.prototype.fill=function(e){for(var t in e)this.components[t]=e[t];return this},e.prototype.get=function(e){return this.components[e]},e.prototype.snapshot=function(){return this.components},e.prototype.merge=function(t){var n=new e({id:this.id,overridable:this.overridable});if(n.fill(this.components),!t)return n;var r=t.snapshot();for(var o in r)r.hasOwnProperty(o)&&(n.components[o]=this.mergeComponents(n.components[o],r[o]));return n},e.prototype.mergeComponents=function(e,t){return o(t)&&e?o(e)?r(function(n){return t.hoc(e.hoc(n))}):t.hoc(e):t},e}();t.ComponentRegistryConsumer=function(e){return i.createElement(u,null,function(t){return e.children(t[e.id].snapshot())})},t.Registry=f,t.RegistryConsumer=u,t.registryContext=c,t.useComponentRegistry=function(e){return l()[e].snapshot()},t.useRegistries=l,t.withRegistry=function(){var e=[].slice.call(arguments);return function(t){return function(n){var r=i.useRef(null);return i.createElement(u,null,function(o){if(null===r.current){for(var c=a({},o),u=0;u<e.length;u++){var l=e[u],d=o[l.id];c[l.id]=l.overridable?d?l.merge(d):l:l&&d?d.merge(l):l}r.current=c}return i.createElement(s,{value:r.current},i.createElement(t,n))})}}}},,,function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n(3),a=(n(232),Object(i.cn)("Link")),c=function(e){var t=e.as,n=e.children,i=e.controlRef,c=e.disabled,s=e.innerRef,u=e.role,l=(e.pseudo,e.view,Object(r.__rest)(e,["as","children","controlRef","disabled","innerRef","role","pseudo","view"])),d=t||(l.href?"a":"span"),f=l.rel;return"_blank"===l.target&&void 0!==f&&-1===f.indexOf("noopener")&&(f+=" noopener"),Object(o.createElement)(d,Object.assign(l,{"aria-disabled":c,className:a(null,[l.className]),ref:s||i,rel:f,role:u,tabIndex:c?-1:l.tabIndex}),n)};c.displayName=a()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("CommercialProducts")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e};t.linear=r,t.easeInOutQuad=function(e){return e<.5?2*e*e:-2*(e*(e-2)+.5)},t.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},t.animate=function(e,t,n,o){var i;void 0===n&&(n=r);var a=!1,c=function(r){if(!a){i||(i=r);var s=(r-i)/e;s>1&&(s=1);var u=n(s);t(u),s<1?requestAnimationFrame(c):o&&o()}};return requestAnimationFrame(c),function(){return a=!0}}},,function(e,t,n){"use strict";var r=n(0),o=n.n(r);t.a=o.a.createContext(null)},,function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var r=n(0),o=n.n(r),i=n(5),a=n.n(i),c=n(3),s=n(220),u=(n(218),a()(s)),l=function(e,t,n){void 0===n&&(n=4);var r=e.toFixed();if(r.length<=n)return r;for(var o="",i=r.length;i>0;i-=3){var a=Math.max(0,i-3),c=r.slice(a,i);o=o?""+c+t+o:c}return o},d=Object(c.cn)("PriceValue"),f=function(e){var t=e.value,n=e.withMinLabel,r=void 0!==n&&n,i=e.groupLength,a=e.largeSeparator,c=e.isCrossed,s=l(Math.floor(t),a?" ":" ",i);return o.a.createElement("span",{className:d({isCrossed:c})},c&&" ",r?u("от {value}",{value:s}):s,c&&" ")}},,function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n(3),a=(n(137),Object(i.cn)("Link")),c=function(e){var t=e.as,n=e.children,i=e.controlRef,c=e.disabled,s=e.innerRef,u=e.role,l=(e.pseudo,e.view,Object(r.__rest)(e,["as","children","controlRef","disabled","innerRef","role","pseudo","view"])),d=t||(l.href?"a":"span"),f=l.rel;return"_blank"===l.target&&void 0!==f&&-1===f.indexOf("noopener")&&(f+=" noopener"),Object(o.createElement)(d,Object.assign(l,{"aria-disabled":c,className:a(null,[l.className]),ref:s||i,rel:f,role:u,tabIndex:c?-1:l.tabIndex}),n)};c.displayName=a()},function(e,t,n){"use strict";var r=n(76);t.a=function(e){Object(r.a)(function(){e()})}},,,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});function r(e,t){void 0===t&&(t=[]);var n=[].concat(t);return e.forEach(function(e){void 0===e.pos||n[e.pos]||(n[e.pos]=e)}),n}function o(e,t){void 0===t&&(t=[]);var n=[].concat(t);return e.forEach(function(e){e.pos&&((!n[e.pos]||n[e.pos].id!==e.id)&&(n[e.pos]=e))}),n}function i(e,t){return void 0===t&&(t={}),e&&e.forEach(function(e){e.rimid&&!t[e.rimid]&&(t[e.rimid]=e)}),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e){return function(t){return function(n){var i=o(o({},e),n);return r.createElement(t,o({},i))}}}},function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"a",function(){return g});var r=n(4),o=n(0),i=n.n(o),a=n(14),c=n(2),s=n(3),u=n(190),l=n(211);n(824);function d(e){var t=Object(o.useRef)();return Object(o.useEffect)(function(){t.current=e}),t.current}var f=function(){return{value:1}},p=f(),h=Object(o.createContext)(f()),m=function(e){return Object(r.__read)(Object(o.useState)(function(e,t){return void 0===t&&(t=""),""+t+function(e){return e.value++}(e||p)}(Object(o.useContext)(h),e)),1)[0]},v=function(e){var t=e.visible,n=e.onClose,a=e.children,c=e.essentialRefs,s=m("layer-"),u=d(t),l=d(n),f=Object(o.useCallback)(function(e){if("Escape"===e.key){var t=Object(r.__read)(v.stack[v.stack.length-1]||[],2),n=t[0],o=t[1];n===s&&void 0!==o&&o(e,"esc")}},[]),p=Object(o.useCallback)(function(e){var t=Object(r.__read)(v.stack[v.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===s&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&v.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(v.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(v.stack.push([s,n,c]),document.addEventListener("keyup",f),document.addEventListener("mousedown",p)):(Object(r.__read)(v.stack[v.stack.length-1]||[],1)[0]===s&&requestAnimationFrame(function(){return v.stack.pop()}),document.removeEventListener("keyup",f),document.removeEventListener("mousedown",p)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return v.stack.pop()}),document.removeEventListener("keyup",f),document.removeEventListener("mousedown",p)}},[]),i.a.createElement(i.a.Fragment,null,a)};v.stack=[],v.displayName="LayerManager";var b=Object(s.cn)("Popup2"),g=function(e){var t=e.addonAfter,n=e.addonBefore,s=e.children,d=e.className,f=e.direction,p=e.forceRender,h=e.hasTail,m=e.innerRef,g=e.keepMounted,y=void 0===g||g,O=e.position,w=e.scope,C=void 0===w?{current:Object(u.a)()?document.body:null}:w,j=e.style,E=e.tailPosition,S=e.tailRef,k=e.tailSize,_=e.visible,P=e.zIndex,I=e.unstable_onRenderTail,x=e.onClose,R=e.unstable_essentialRefs,N=void 0===R?[]:R,M=e.unstable_hostRef,T=e.onOutsideClick,L=e.onEscapeKeyDown,D=e.onClick,B=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),A=Object(r.__read)(Object(o.useState)(!0),2),F=A[0],U=A[1],z=Object(o.useRef)(null);!function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)(function(){n.current?n.current=!1:e()},Object(r.__spread)([e],t))}(function(){F&&_&&U(!1)},[]),Object(o.useEffect)(function(){console.assert(void 0===T||void 0===L,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),F&&(p||_)&&U(!1)},[]);var H=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==L&&L(e):void 0!==T&&T(e),void 0!==x&&x(e,t)},[L,T,x]),q=Object(c.useComponentRegistry)(b()).Tail,W=M||z;return!_&&!y||!Object(u.a)()||null===C.current||F?null:Object(a.createPortal)(i.a.createElement(v,{visible:_,onClose:H,essentialRefs:Object(r.__spread)([W],N)},i.a.createElement("div",Object(r.__assign)({},B,{className:b({visible:_,direction:f},[d]),ref:Object(l.a)(z,m),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},j),O),{zIndex:P}),onClick:D}),n,"function"===typeof s?s({tailRef:S}):s,t,I&&I(i.a.createElement(q,{innerRef:S,style:Object(r.__assign)(Object(r.__assign)({},E),{height:k,width:k})})),!I&&h&&i.a.createElement(q,{innerRef:S,style:Object(r.__assign)(Object(r.__assign)({},E),{height:k,width:k})}))),C.current)};g.displayName=b()},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(164),i=n(121),a=n(223),c={width:0,height:0},s=function(e,t){void 0===t&&(t={});var n=t.timeout,s=void 0===n?500:n,u=t.shouldStartWaiting,l=void 0===u?function(){return!0}:u,d=Object(r.useRef)(c),f=Object(r.useRef)(!1),p=Object(r.useRef)(!1),h=Object(r.useRef)(0),m=Object(r.useCallback)(function(){d.current={width:window.innerWidth,height:window.innerHeight}},[]),v=Object(r.useCallback)(function(){if(f.current)p.current=!0;else if(l()){f.current=!0;var t=Date.now(),n=function(){if(function(){return Date.now()-t>=s}()||function(){return window.innerWidth!==d.current.width||window.innerHeight!==d.current.height}())return m(),f.current=!1,h.current=0,e(d.current),void(p.current&&(p.current=!1,v()));h.current=window.setTimeout(n)};h.current=window.setTimeout(n)}},[e,s,l,m]);Object(o.a)("resize",v),Object(o.a)("orientationchange",v),Object(i.a)(m),Object(a.a)(function(){return window.clearTimeout(h.current)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},function(e,t,n){"use strict";n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return h});var r=n(5),o=n.n(r),i=n(235),a=n(213),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=o()(a);function u(e,t,n,r){!r.strictShow&&i.a&&window.sessionStorage.setItem(n,String(l(n)+1)),t(c({visible:!0,title:s("Войдите в Яндекс, и поиск станет лучше",{context:"Надпись в попапе, предлагающим авторизоваться или зарегистрироваться"})},r)),e&&e.preventDefault()}function l(e){return i.a&&Number(sessionStorage.getItem(e))||0}function d(e,t){return void 0===t&&(t=1),l(e)<t}function f(){return encodeURIComponent(window.location.href)}function p(e,t){return"https://passport.yandex."+e+"/auth?retpath="+f()+"&origin="+t}function h(e,t){return"https://passport.yandex."+e+"/registration?retpath="+f()+"&origin="+t}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n(3),o=176,i=Object(r.cn)("MarketCartIframe")},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(544);function i(e,t){return e?r.createElement("b",{key:t},e):""}t.HIGHLIGHT_OPEN="[",t.HIGHLIGHT_CLOSE="]";var a=function(e){return e};function c(e,n){void 0===n&&(n={});var r={highlighter:n.highlighter||i,delimiters:n.delimiters||{start:t.HIGHLIGHT_OPEN,end:t.HIGHLIGHT_CLOSE},textPreprocessor:n.textPreprocessor||a};return o.markup(e,r)}t.markup=c,t.makeHighlighter=function(e){return function(t){return c(t,e)}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(171);function o(e,t){if(!e||!t)return e;var n=Object(r.a)(t);return n?""+e+(e.indexOf("?")>0?"&":"?")+n:e}},,function(e,t,n){"use strict";function r(e,t,n){var r,o,i,u=function(u){var l,d;return r=r||c.cn(e),o=o||r(),function(e){if((i=i||Object.keys(t)).every(function(n){var r=t[n],o=e[n];return r===o||"*"===r&&Boolean(o)})){var c=i.reduce(function(e,n){return"*"!==t[n]&&(e[n]=t[n]),e},{});d=d||r(c);var f=Object.assign({},e);return f.className=s.classnames(d,e.className).replace(o+" ",""),"function"==typeof n?void 0===l&&(l=n(u)):l=u,a.createElement(l,f)}return a.createElement(u,e)}},l=n||{},d=l.__passToProps,f=void 0===d?1:d,p=l.__simple,h=void 0===p?0:p,m=Object.keys(t),v=m[0],b=t[m[0]];return(u.__isSimple=!n&&1===m.length||h)&&(u.__blockName=e,u.__mod=v,u.__value=b,u.__passToProps=f),u}function o(e){for(var t={},n={},r=c.cn(e[0].__blockName),o=0,i=e;o<i.length;o++){var s=i[o],l=s.__mod,d=s.__value,f=s.__passToProps;t[l]=t[l]||[],n[l]=n[l]||[],t[l].push(d),n[l].push(f)}var p=Object.keys(t);return function(e){return function(o){for(var i={},c=u({},o),s=0,l=p;s<l.length;s++){var d=l[s],f=t[d],h=o[d],m=f.indexOf(h);-1===m&&1==f[0]&&0==h&&(m=0),-1!==m?(i[d]=h,n[d][m]||delete c[d]):c.hasOwnProperty(d)&&void 0===h&&delete c[d]}return c.className=r(i,[o.className]),a.createElement(e,c)}}}function i(){for(var e=[],t=[],n=0,r=[].slice.call(arguments);n<r.length;n++){var i=r[n];i.__isSimple?e.push(i):t.push(i)}return(e.length?[o(e)].concat(t):t).reduce(function(e,t){return function(){return e(t.apply(0,arguments))}},function(e){return e})}Object.defineProperty(t,"__esModule",{value:1});var a=n(0),c=n(3),s=n(69),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.compose=i,t.composeU=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(void 0,e)},t.createClassNameModifier=function(e,t){return r(e,t,{__passToProps:0,__simple:1})},t.withBemMod=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classnames=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=new Set,o=0,i=e.join(" ").split(" ");o<i.length;o++){var a=i[o];""===a||r.has(a)||(r.add(a),n.length>0&&(n+=" "),n+=a)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(198);t.BaobabComponents=r.createContext({BaobabNode:o.BaobabNode})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),i=n(197),a=n(200);t.SCHEMA_VER=0;var c=function(){function e(e,t){var n=this,r=e.prefix,o=e.senderParams;this.nextEventId=0,this.nextNodeId=0,this.rootNodes=[],this.listeners={createnode:[],removenode:[],actionnode:[]},this.childrenCreatedPerLoop={},this.resolveEvent=function(){n.actualEvent=void 0},this.baobabSender=new t(o),this.prefix=r}return e.prototype.getRootNodes=function(){return this.rootNodes},e.prototype.getRootSendNodes=function(){var e=this;return this.rootNodes.map(function(t){return e.encodeNode(t)})},e.prototype.addEventListener=function(e,t){this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this.listeners[e]=this.listeners[e].filter(function(e){return e!==t})},e.prototype.prepareRoot=function(e){var t=this.createRootNode(e);return this.rootNodes.push(t),t},e.prototype.prepareChild=function(e,t){var n=this.createChildNode(t,e);return e.flags.logged&&!n.flags.logged&&this.appendToSubresult(n,e),n},e.prototype.attachNode=function(e){var t=this;e.flags.attached=!0,this.markAttachedNodeAsCreated(e),e.flags.logged?this.baobabSender.attachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}}):o.isChildNode(e)?setTimeout(function(){return t.logChildNodes(e)},0):(this.markNodeAsLogged(e),this.baobabSender.createTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(r){return r.call(t,{logger:t,target:e,create:e,on:null,sendInfo:n})})}))},e.prototype.logChildNodes=function(e){var t=this;if(!e.flags.logged){var n=e.parent.id,r=this.childrenCreatedPerLoop[n];r&&(this.childrenCreatedPerLoop[n]=void 0,r.children.map(function(e){return t.markNodeAsLogged(e)}),this.baobabSender.appendTree({node:this.encodeNode(r),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(o){return o.call(t,{logger:t,target:e,create:r,on:e.parent,sendInfo:n})})}))}},e.prototype.detachNode=function(e){var t=this;e.flags.attached&&(e.flags.attached=!1,this.markNodeAsDestroyed(e),this.baobabSender.detachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.removenode.forEach(function(r){return r.call(t,{logger:t,target:e,remove:e,sendInfo:n,from:o.isChildNode(e)?e.parent:null})})}))},e.prototype.dispatchEvent=function(e,t){var n=this;this.baobabSender.clientAction({node:this.encodeNode(e),eventData:t},function(r){n.listeners.actionnode.forEach(function(o){return o.call(n,{logger:n,target:e,action:t,sendInfo:r})})})},e.prototype.logTechEventForRoot=function(e,t){var n=this.getRootNodes(),r=n[n.length-1];if(!r)throw new i.BaobabNotInitError;var o=a.logTech(e,t),c=this.createEvent(r,o,[],{});this.dispatchEvent(r,c)},e.prototype.createEvent=function(e,t,n,r){var o={cts:Date.now(),id:this.generateEventId(),event:t.event,data:t.data,service:e.context.service,subservice:e.context.subservice};return t.type&&(o.type=t.type),t.behaviour&&(o.behaviour=t.behaviour),o},e.prototype.withEvent=function(e,t){this.lastEvent=e,this.actualEvent=e,t(this.resolveEvent)},e.prototype.encodeNode=function(e,t){var n=this;void 0===t&&(t=!1);var i={id:e.id,name:e.name},a=!t&&o.isTreeNode(e)&&!e.flags.attached;return e.attrs&&Object.keys(e.attrs).length&&(i.attrs=e.attrs),a&&(i.attrs=r(r({},i.attrs),{hidden:!0})),e.children.length&&(i.children=e.children.map(function(e){return n.encodeNode(e,a)})),i},e.prototype.generateEventId=function(){return Date.now().toString(36)+(this.nextEventId++).toString(36)},e.prototype.generateNodeId=function(){return this.prefix+(this.nextNodeId++).toString(36)},e.prototype.markAttachedNodeAsCreated=function(e){var t=this;e.flags.attached&&(e.flags.created=!0,e.children.forEach(function(e){return t.markAttachedNodeAsCreated(e)}))},e.prototype.markNodeAsDestroyed=function(e){var t=this;e.flags.created=!1,e.children.forEach(function(e){return t.markNodeAsDestroyed(e)})},e.prototype.markNodeAsLogged=function(e){var t=this;e.flags.logged=!0,e.children.forEach(function(e){return t.markNodeAsLogged(e)})},e.prototype.appendToSubresult=function(e,n){var r=this.childrenCreatedPerLoop[n.id];if(!r){var o={id:this.generateNodeId(),name:"$subresult",attrs:{"schema-ver":t.SCHEMA_VER,ui:e.context.ui,subservice:e.context.subservice,"parent-id":n.id,"trigger-event-id":this.actualEvent||this.lastEvent,"trigger-event-trusted":Boolean(this.actualEvent),"main-search":n.context.subservice!==e.context.subservice},children:[e]};return this.childrenCreatedPerLoop[n.id]=o,o}return r.children.push(e),r},e.prototype.createChildNode=function(e,t){var n={key:e.key,parent:t,id:this.generateNodeId(),name:e.name,attrs:e.attrs,children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createNodeContext(e,t)};return t.children.push(n),n},e.prototype.createRootNode=function(e){return{key:e.key,id:this.generateNodeId(),name:e.name,attrs:r({},e.attrs),children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createRootContext(e)}},e.prototype.createNodeContext=function(e,t){var n=r(r({},t.context),{path:t.context.path.concat(e.name)});return e.attrs&&e.attrs.subservice&&(n.subservice=e.attrs.subservice),n},e.prototype.createRootContext=function(e){var t={path:[e.name],service:e.attrs.service,ui:e.attrs.ui};return e.attrs.subservice&&(t.subservice=e.attrs.subservice),t},e}();t.Logger=c},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMViewerModal")},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),o=n(0),i=n.n(o),a=n(2),c=n(6),s=n(64),u=i.a.createElement("span",{className:s.d},"›"),l=Object(c.withBaobab)({name:"path"})(function(e){var t=e.items,n=e.boldCount,o=void 0===n?1:n,c=Object(a.useComponentRegistry)(s.c).Link,l=t&&t[t.length-1],d=e.link||l||{};return i.a.createElement("div",{className:Object(s.a)(null,[e.className])},i.a.createElement(c,{theme:"outer",className:s.b,url:d.url,logNode:Object(r.__assign)({name:"urlnav"},d.logNode),counter:d.counter,onClick:d.onClick},e.favicon,t.map(function(e,t){return i.a.createElement(i.a.Fragment,{key:t},t>0&&u,t<o?i.a.createElement("b",null,e.text):e.text)})))})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("ImagesViewer")},function(e,t,n){"use strict";function r(e,t){return parseFloat(e.toFixed(t))}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("CommercialCropOverlay")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!1),t=Object(r.useCallback)(function(){return e.current},[]);return Object(r.useEffect)(function(){return e.current=!0,function(){e.current=!1}}),t}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},,function(e,t,n){var r,o,i;!function(n,a){o=[t],void 0===(i="function"===typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),i=[],a=!1,c=-1,s=void 0,u=void 0,l=function(e){return i.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},d=function(e){var t=e||window.event;return!!l(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},f=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0)})};e.disableBodyScroll=function(e,r){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!i.some(function(t){return t.targetElement===e})){var f={targetElement:e,options:r||{}};i=[].concat(t(i),[f]),e.ontouchstart=function(e){1===e.targetTouches.length&&(c=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,o,i;1===t.targetTouches.length&&(r=e,i=(n=t).targetTouches[0].clientY-c,!l(n.target)&&(r&&0===r.scrollTop&&0<i?d(n):(o=r)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&i<0?d(n):n.stopPropagation()))},a||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),a=!0)}}else{h=r,setTimeout(function(){if(void 0===u){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(u=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")});var p={targetElement:e,options:r||{}};i=[].concat(t(i),[p])}var h},e.clearAllBodyScrollLocks=function(){o?(i.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),a&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1),i=[],c=-1):(f(),i=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,i=i.filter(function(t){return t.targetElement!==e}),a&&0===i.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1)}else(i=i.filter(function(t){return t.targetElement!==e})).length||f()}})?r.apply(t,o):r)||(e.exports=i)}()},,function(e,t,n){"use strict";var r=n(160);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(52),o=(n(680),Object(r.a)("Section"))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("ImagesViewerGallery")},,function(e,t,n){"use strict";var r=n(0),o=n(62).a?window:null,i=function(e){return!!e.addEventListener},a=function(e){return!!e.on};t.a=function(e,t,n,c){void 0===n&&(n=o),Object(r.useEffect)(function(){if(t&&n)return i(n)?n.addEventListener(e,t,c):a(n)&&n.on(e,t,c),function(){i(n)?n.removeEventListener(e,t,c):a(n)&&n.off(e,t,c)}},[e,t,n,JSON.stringify(c)])}},,function(e,t,n){n.r(t);var r=n(3044);n.d(t,"tr",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMRelatedImages")},,,,function(e,t,n){"use strict";function r(e,t){return e?Object.keys(e).filter(function(t){return void 0!==e[t]}).map(function(t){var n=encodeURIComponent(t);return""!==e[t]?n+"="+encodeURIComponent(String(e[t])):n}).join((null===t||void 0===t?void 0:t.separator)||"&"):""}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return u});var r=n(3),o=Object(r.cn)("Fold"),i=o(),a=o("Body"),c=o("MoreBtn"),s=o("MoreArrow"),u=o("MoreIcon")},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=/^(?:https?:)?\/\/(?:m.)?market.yandex./,o=/^(?:https?:)?\/\/(?:m.)?(?:pokupki.)?market.yandex./,i=/^(?:https?:)?\/\/(?:m.)?pokupki.market.yandex./;function a(e,t){switch(null===t||void 0===t?void 0:t.checkPokupki){case"no":return r.test(e);case"only":return i.test(e);case"with":default:return o.test(e)}}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(114),i=n(9);function a(){var e=Object(r.useRef)(i.a),t=Object(r.useCallback)(function(t){return function(){t(),e.current=i.a}},[]);return Object(r.useCallback)(function(n){var r=n.duration,a=n.draw,c=n.onFinish,s=void 0===c?i.a:c;e.current(),e.current=Object(o.animate)(r,a,o.linear,t(s))},[t])}},function(e,t,n){"use strict";var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var i=function(e){var t=e.animate,n=e.backgroundColor,i=e.backgroundOpacity,a=e.baseUrl,c=e.children,s=e.foregroundColor,u=e.foregroundOpacity,l=e.gradientRatio,d=e.uniqueKey,f=e.interval,p=e.rtl,h=e.speed,m=e.style,v=e.title,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),g=d||function(){return Math.random().toString(36).substring(6)}(),y=g+"-diff",O=g+"-animated-diff",w=g+"-aria",C=p?{transform:"scaleX(-1)"}:null,j="0; "+f+"; 1",E=h+"s";return Object(r.createElement)("svg",o({"aria-labelledby":w,role:"img",style:o(o({},m),C)},b),v?Object(r.createElement)("title",{id:w},v):null,Object(r.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+a+"#"+y+")",style:{fill:"url("+a+"#"+O+")"}}),Object(r.createElement)("defs",{role:"presentation"},Object(r.createElement)("clipPath",{id:y},c),Object(r.createElement)("linearGradient",{id:O},Object(r.createElement)("stop",{offset:"0%",stopColor:n,stopOpacity:i},t&&Object(r.createElement)("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:j,dur:E,repeatCount:"indefinite"})),Object(r.createElement)("stop",{offset:"50%",stopColor:s,stopOpacity:u},t&&Object(r.createElement)("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:j,dur:E,repeatCount:"indefinite"})),Object(r.createElement)("stop",{offset:"100%",stopColor:n,stopOpacity:i},t&&Object(r.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:j,dur:E,repeatCount:"indefinite"})))))};i.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var a=function(e){return e.children?Object(r.createElement)(i,o({},e)):Object(r.createElement)(c,o({},e))},c=function(e){return Object(r.createElement)(a,o({viewBox:"0 0 476 124"},e),Object(r.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(r.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(r.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(r.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(r.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(r.createElement)("circle",{cx:"20",cy:"20",r:"20"}))};t.a=a},,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var r,o=n(348),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.timeout=0]="timeout",e[e.error=1]="error",e[e.canceled=2]="canceled"}(r||(r={}));var a=function(){},c=function(){function e(e,t){this.startLoadTime=0,this.onResult=e,this.timeout=t&&t.timeout,this.itemTimeout=t&&t.itemTimeout,this.onImageError=t&&t.onImageError}return e.prototype.stop=function(){this.destroyLoaderElement(),this.watchdog&&clearTimeout(this.watchdog),this.onResult=a},e.prototype.startLoading=function(){var e=this;this.startWatchdog(),this.tryLoadNext()||setTimeout(function(){return e.onResult(r.error)},0)},e.prototype.onLoad=function(){var e,t=this.getResultData();this.loader&&this.loader.src&&o.a.instance().addToHistory(this.loader.src),t&&!t.loadTime&&(e=i(i({},t),{loadTime:Date.now()-this.startLoadTime})),this.onResult(void 0,e),this.stop()},e.prototype.onError=function(){this.tryLoadNext()||this.onResult(r.error)},e.prototype.onItemLoadingError=function(){this.onImageError&&this.loader&&this.loader.src&&this.onImageError(this.loader.src),this.onError()},e.prototype.tryLoadNext=function(){var e=this.getUrlFromItem();return this.destroyLoaderElement(),!!e&&(this.createLoaderElement(e),!0)},e.prototype.createLoaderElement=function(e){var t=this;this.itemTimeout&&(this.itemWatchdog=window.setTimeout(function(){return t.onError()},this.itemTimeout));var n=this.loader=new Image;n.onload=function(){return t.onLoad()},n.onerror=function(){return t.onItemLoadingError()},n.src=e,this.startLoadTime=Date.now()},e.prototype.destroyLoaderElement=function(){var e=this.loader;e&&(this.itemWatchdog&&clearTimeout(this.itemWatchdog),e.onload=a,e.onerror=a,e.src="",this.loader=void 0)},e.prototype.startWatchdog=function(){var e=this;this.timeout&&!this.watchdog&&(this.watchdog=window.setTimeout(function(){var t=e.onResult;e.stop(),t(r.timeout)},this.timeout))},e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(4),o=n(0),i=n.n(o),a=n(3),c=(n(820),Object(a.cn)("UserPic")),s=function(e,t,n){return void 0===e&&(e="https://avatars.mds.yandex.net"),void 0===t&&(t="0/0-0"),e+"/get-yapic/"+t+"/"+(n?"islands-retina-middle":"islands-middle")},u=function(e){var t=e.host,n=e.avatarId,a=e.lodpiUrl,u=e.hidpiUrl,l=e.plus,d=e.className,f=e.innerRef,p=e.addonAfter,h=e.size,m=Object(r.__rest)(e,["host","avatarId","lodpiUrl","hidpiUrl","plus","className","innerRef","addonAfter","size"]);Object(o.useEffect)(function(){console.assert(void 0!==h,"Модификатор size скоро станет обязательным, добавьте пожалуйста размер")},[]),a||(a=s(t,n,!1),u=s(t,n,!0));var v=u?a+" 1x, "+u+" 2x":void 0;return i.a.createElement("div",{className:c({hasPlus:l},[d]),ref:f},i.a.createElement("img",Object(r.__assign)({},m,{src:a,className:c("Image"),srcSet:v})),p)};u.displayName=c()},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(1),i=n(6),a=n(54),c=Object(o.compose)(Object(i.withBaobab)({name:"button"}),Object(o.withBemMod)(Object(a.c)(),{type:a.a.link},function(){return function(e){return r.createElement("a",{className:Object(a.c)({},[e.className]),href:e.url,rel:"noopener",ref:e.forwardRef,target:e.target||"_blank",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenuCapture:e.onContextMenuCapture},e.icon&&r.createElement("span",{className:Object(a.c)("Icon")},e.icon),r.createElement("span",{className:Object(a.c)("Text")},e.text),e.rightText&&r.createElement("span",{className:Object(a.c)("RightText")},e.rightText))}}))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n.n(o),a=n(32),c=(n(325),function(e){var t=e.className,n=e.innerRef,o=e.children,c=Object(r.__rest)(e,["className","innerRef","children"]);return i.a.createElement("div",Object(r.__assign)({},c,{className:Object(a.b)("Tail",null,[t]),ref:n}),o)})},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.message="Баобаб-нода не инициализирована!",t}return r(t,e),t}(Error);t.BaobabNotInitError=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),c=n(40),s=n(6);function u(e,t,n,o){return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=e.current.childProps,l=u[t],d=r({},n);s.isEventDataAttrsConstructor(n.data)&&(d.data=n.data({props:u},a));var f,p=o(d,a,r(r({},e.current.childProps),e.current.extraChildProps));if("function"===typeof l)f=l.call.apply(l,i([this],a,[{withEvent:p}]));else if("undefined"!==typeof l)throw new Error("Вы пытаетесь вызвать событие "+t+". Но это "+typeof l+', со значением "'+l+'"');return f}}function l(e,t){var n={},r=e.current.nodeData.events;for(var o in r){var i=r[o];s.isEventDeclaration(i)&&(n[o]=u(e,o,i,t))}return n}function d(e,t,n){return!e||!s.areEqualsNodes(e,t,n)}t.wrapActions=l,t.shouldRecreateNode=d,t.BaobabNode=function(e){var t,n,o=e.nodeDeclaration,i=e.logNode,u=e.children,f=e.childProps,p=a.useContext(c.BaobabContext),h=p?function(e,t,n,r){return e.parentNode?s.createChildData(t,n,r):s.createRootData(t,n,r)}(p,f,o,i):{},m=a.useRef({node:void 0,childProps:f,extraChildProps:{},nodeData:h}),v=d(m.current.node,h,null===(t=p)||void 0===t?void 0:t.parentNode);v&&(m.current.nodeData=h),m.current.childProps=f;var b=s.useBaobab(m.current.nodeData);if(v){var g=b.node,y=b.logEvent;m.current.node=g,m.current.extraChildProps=m.current.nodeData.events?l(m,y):{};var O=o.extra;O&&(O.id&&(m.current.extraChildProps.baobabId=g&&g.id,m.current.extraChildProps.baobabNode=g),O.withLogger&&(m.current.extraChildProps.baobabNodeLogger=null===(n=p)||void 0===n?void 0:n.logger))}return p?a.createElement(c.BaobabContext.Provider,{value:b.nextContext},u(Object.assign({},f,m.current.extraChildProps))):a.createElement(a.Fragment,null,u(r({},f)))},t.BaobabNode.isBaobabNode=!0},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(40),a=function(e){function t(t){var n=e.call(this,t)||this,r=t.Logger,o=t.Sender,i=t.loggerProps,a=t.onLoggerInit,c=new r(i,o);return n.nextContext={logger:c},a&&a(c),n}return r(t,e),t.prototype.render=function(){var e=this.props.children;return o.createElement(i.BaobabContext.Provider,{value:this.nextContext},e)},t}(o.Component);t.BaobabRoot=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73);t.logClick=function(e){return e?{event:r.BaobabLogEventType.Click,data:e}:{event:r.BaobabLogEventType.Click}},t.logScroll=function(e){return e?{event:r.BaobabLogEventType.Scroll,data:e}:{event:r.BaobabLogEventType.Scroll}},t.logTech=function(e,t){return t?{event:r.BaobabLogEventType.Tech,type:e,data:t}:{event:r.BaobabLogEventType.Tech,type:e}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(140),o={wizard:"971",organic:"972",snippet:"973",banner:"978",similar:"974",crop:"975",otherOffers:"976",cbir:"932",cbirApp:"931",tab:"526",headerCart:"958"};function i(e){var t=e.iCookieEncrypted,n=e.reqid,r=e.srcPofSource;return{utm_source_service:"img",icookie:t,wprid:n,src_pof:r?function(e){return o[e]}(r):void 0}}var a=/^(?:https?:)?\/\/market-click.*\/redir/;var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function u(e,t,n){void 0===t&&(t={});var o=t.checkEncryption,u=s(t,["checkEncryption"]);if(o&&function(e){return a.test(e)}(e))return e;var l=i(u),d=n?c(c({},l),n):l;return Object(r.a)(e,d)}},,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(2),o=n(37),i=function(){return new r.Registry({id:Object(o.a)()})},a=function(){return Object(r.useComponentRegistry)(Object(o.a)())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(543);t.default=function(e,t){var n=o.useFirstMountState();r.useEffect(function(){if(!n)return e()},t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("CommercialCropShape")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(582),o=function(e,t){var n=Object(r.a)(t);n&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,t)||e()}},,function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(1),o=n(34),i=n(8),a=n(77),c=n(251),s=function(e){var t=Object(i.j)(e),n=Object(i.c)(e),r=e.config,o=r.loggedIn,a=r.imagesCbirSearchUrl,c=r.openServiceOnNewTab,s=r.isFavoritesDisabled,u=r.isDiskShareEnabled,l=r.unauthPopupButtonsDisable,d=e.globalContext,f=d.tld,p=d.isQueryPorn,h=d.isCommercialQuery,m=d.isCommercialEnabled,v=h||m?"secondary":"primary";return{tld:f,image:t,loadedThumb:Object(i.k)(e),reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,loggedIn:o,imagesCbirSearchUrl:a,openServiceOnNewTab:c,isQueryPorn:p,isFavoritesDisabled:s,isDiskShareEnabled:u,unauthPopupButtonsDisable:l,experiments:e.experiments,mainButtonTheme:v}},u=Object(r.compose)(Object(o.e)(s),Object(a.a)(["image"]))(c.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(30),o=n(313),i=n(129),a={images:"/images/search",video:"/video/search"};function c(e,t){if(!i.a)return"";var n=window.location.protocol,r=Object(o.getOrigin)(window.location);return new RegExp("https?://([a-z0-9-]+.)*yandex."+e+"(:[0-9]+)?").test(r)?""+r+t:""+(n+"//yandex."+e)+t}function s(e,t,n){var o=a[e];return c(t,Object(r.appendQueryString)(o,n))}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(190);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},function(e,t,n){n.r(t);var r=n(3071);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3089);n.d(t,"tr",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(2),o=n(54),i=n(521),a=n(353),c=n(354),s=n(352),u=n(0),l=n(6),d=n(5),f=n(1),p=n(47),h=(n(857),Object(f.createClassNameModifier)(Object(p.b)(),{type:"photostock"})),m=n(46),v=n(28),b=n(189),g=n(355),y=n(22),O=n(166),w=(n(856),Object(d.i18nRaw)(O)),C=Object(b.a)(o.b),j=h(p.a),E=u.memo(function(e){var t=e.onClick,n=e.onShow,r=e.photostockUrl,i=u.useRef(""),a=u.useRef(null);n&&i.current!==r&&(i.current=r,n(r));var c=u.useCallback(function(e){return function(n){e(),t&&t(n)}},[t,r]);return u.createElement(g.a,{text:w("На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование",{br0:u.createElement("br",{key:"0"}),br1:u.createElement("br",{key:"1"}),context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),anchor:a,directions:["left-center"],mainOffset:7,hasTail:!0},function(e,t){return u.createElement(C,{forwardRef:a,className:Object(y.a)("Photostock"),text:w("Купить оригинал картинки",{context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),onClick:c(t),onMouseEnter:e,onMouseLeave:t,url:r,icon:u.createElement(j,{type:"photostock"}),type:o.a.link})})});function S(e){return function(t){var n=t.props;if(n.counters&&n.counters[e]&&n.photostockUrl){var r=encodeURIComponent(n.photostockUrl);return Object(v.b)(n.counters[e],{url:r},{href:r})}}}var k=Object(m.d)(Object(l.withBaobab)({name:"MMPhotostockButton",events:{onShow:Object(l.logTech)("show",S("photostockShown")),onClick:Object(l.logClick)(S("photostockClick"))}})(E)),_=new r.Registry({id:Object(y.a)()});_.set(Object(o.c)(),o.b),_.set(Object(y.a)("AddToCollection"),i.a),_.set(Object(y.a)("OpenImage"),a.a),_.set(Object(y.a)("SearchByImage"),c.a),_.set(Object(y.a)("Photostock"),k),_.set(Object(y.a)("Share"),s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n.n(r),i=n(128),a=n(180),c=n(74),s=n(204),u=n(37),l=(n(333),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a});function d(e,t){if(!e)return null;var n=e.querySelectorAll("."+Object(u.a)("Item"));if(!n.length)return null;for(var r=0;r<n.length;r++){if(n[r].getBoundingClientRect().left>t)return n[Math.max(0,r-1)]}return n[n.length-1]}var f=function(e){var t=e.className,n=e.innerClassName,f=e.children,p=e.apiRef,h=e.offsetLeft,m=void 0===h?0:h,v=e.offsetRight,b=void 0===v?0:v,g=e.itemHorizontalMargins,y=void 0===g?0:g,O=e.withArrows,w=e.withArrowsFade,C=e.onScroll,j=e.disableScrollPolyfill,E=Object(s.b)().CarouselArrow,S=Object(a.a)(),k=Object(r.useRef)(null),_=Object(r.useRef)(null),P=Object(r.useRef)(null),I=Object(r.useRef)(null),x=l(Object(r.useState)(!1),2),R=x[0],N=x[1],M=l(Object(r.useState)(!1),2),T=M[0],L=M[1],D=Object(r.useCallback)(function(e){if(I.current){var t=I.current.getScrollData().scrollLeft,n=e.scrollLeft,r=e.scrollDeltaX,o=void 0===r?0:r,i=e.behavior,a="number"===typeof n?n:t-o;if("smooth"===i){var c=t-a;S({duration:300,draw:function(e){var n;null===(n=I.current)||void 0===n||n.scroll(t-c*e)}})}else I.current.scroll(a)}},[S]),B=Object(r.useCallback)(function(){if(I.current&&k.current&&P.current){var e=P.current.getBoundingClientRect(),t=k.current.getBoundingClientRect(),n=d(k.current,e.left+y);if(n){var r=I.current.getScrollData().scrollLeft,o=n.getBoundingClientRect(),i=I.current.getScrollData().scrollLeft+(o.left-t.left)-e.width-y-1;r===i&&(i+=o.width),D({scrollLeft:i,behavior:"smooth"})}}},[y,D]),A=Object(r.useCallback)(function(){if(I.current&&k.current&&_.current){var e=_.current.getBoundingClientRect(),t=k.current.getBoundingClientRect(),n=d(k.current,e.right);if(n){var r=n.getBoundingClientRect(),o=k.current.clientWidth,i=I.current.getScrollData().scrollLeft-o+(r.right-t.left)+e.width+y+1;D({scrollLeft:i,behavior:"smooth"})}}},[y,D]),F=Object(r.useCallback)(function(){if(I.current&&k.current){var e=I.current.getScrollData(),t=e.clientWidth,n=e.scrollLeft,r=e.scrollWidth;L(Math.ceil(n)>m),N(t<Math.floor(r-n-b))}},[m,b]),U=Object(r.useCallback)(function(e){F(),C&&C(e)},[C,F]);return Object(r.useEffect)(F,[f]),Object(i.a)(F),Object(r.useImperativeHandle)(p,function(){return{scroll:D,updateButtons:F}}),o.a.createElement("div",{className:Object(u.a)({},[t]),ref:k},O&&o.a.createElement(E,{forwardRef:_,align:"left",visible:T,onClick:A,withFade:w}),o.a.createElement(c.a,{className:Object(u.a)("Scroll"),innerClassName:n,ref:I,onScroll:U,withVerticalGaps:!0,disableScrollPolyfill:j},f(Object(u.a)("Item"))),O&&o.a.createElement(E,{forwardRef:P,align:"right",visible:R,onClick:B,withFade:w}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(298),a=n(703),c=n(38),s=n(2),u=n(53),l=(n(334),Object(c.a)(["type","size"])),d=function(e){var t,n=e.align,r=e.visible,c=e.onClick,d=e.withFade,f=e.forwardRef,p=function(){return Object(s.useComponentRegistry)(Object(u.a)())}(),h=p.Button,m=p.Icon,v=Object(a.a)(f);return o.a.createElement(i.a,{in:r,timeout:100,classNames:Object(u.a)(),nodeRef:v},o.a.createElement("div",{className:Object(u.a)({align:n}),ref:v},d&&o.a.createElement("div",{className:Object(u.a)("Fade",(t={},t[d]=!0,t))}),o.a.createElement(h,{className:Object(u.a)("Button"),size:"l",view:"raised",pin:"circle-circle",icon:l({type:"arrow",size:"m"},m),onClick:c})))}},,function(e,t,n){},function(e,t,n){},function(e,t,n){n.r(t);var r=n(2611);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(2620);n.d(t,"tr",function(){return r.a})},,function(e,t,n){"use strict";var r=n(0),o=n(76);t.a=function(e){var t=Object(r.useRef)(e);t.current=e,Object(o.a)(function(){return function(){return t.current()}})}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},,function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a});var r=n(3),o=Object(r.cn)("ShopRating"),i=o(),a=o("Icon")},,,function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(11),o=n(10),i=n(48),a="fiji:ls-availability-test",c=!1;if(r.a)try{localStorage.setItem(a,"1"),localStorage.removeItem(a),c=!0}catch(e){var s=Object(i.a)("project");Object(o.a)("/"+s+"/no-localstorage")}var u=c},function(e,t,n){"use strict";n.d(t,"d",function(){return ut}),n.d(t,"c",function(){return lt}),n.d(t,"a",function(){return dt}),n.d(t,"b",function(){return ft});var r=n(2),o=n(52),i=n(517),a=n(22),c=n(214),s=n(248),u=n(186),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.loadStarted=!1,o.item=t,o.startLoading(),o}return l(t,e),t.prototype.getUrlFromItem=function(){if(!this.loadStarted)return this.loadStarted=!0,this.item.url},t.prototype.getResultData=function(){return this.item},t}(u.a),f=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.onImageLoaded=e&&e.onImageLoaded,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this;if(void 0===t&&(t=!0),!this.imagesCache[e.url]&&!this.currentWorkersData.some(function(t){return t.item.url===e.url})){var r;t&&this.stop();r={item:e,loader:new d(e,function(e,t){n.resultHandler(e,t,r)},{itemTimeout:15e3,timeout:9e4,onImageError:this.onImageError})},this.currentWorkersData.push(r)}},e.prototype.precache=function(e){var t=this;e.forEach(function(e){return t.load(e,!1)})},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item;this.removeItemFromQueue(n),this.imagesCache[r.url]=!0,this.onImageLoaded&&this.onImageLoaded(r,t)},e}(),p=n(1),h=n(465),m=n(6),v=n(28),b=n(460),g=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},y=Object(m.withBaobab)({name:"Fold",events:{onUnfoldedToggle:Object(m.logClick)(function(e,t){var n=e.props,r=g(t,1)[0];return Object(v.b)(n.counters,{action:r?"expand":"collapse"})})}})(b.a),O=n(42),w=n(45),C=n(463),j=n(1017),E=n(388),S=n(1024),k=n(55),_=n(125),P=n(612),I=n(47),x=n(75),R=n(316),N=n(315),M=Object(j.a)(E.a),T=Object(N.a)(R.a),L=Object(p.compose)(P.a)(I.a),D=new r.Registry({id:O.d}).set("Link",M).set("Path",S.a).set("Favicon",x.a).set("ShopRating",T).set("Price",k.a).set("Icon",Object(_.a)({type:"market-logo"})(L)),B=Object(p.compose)(Object(m.withBaobab)({name:"OtherOffers-Offer",events:{onClick:Object(m.logClick)(function(e){var t=e.props,n=t.source,r=t.counters,o=t.url,i=t.decodedUrl;return Object(v.b)(null===r||void 0===r?void 0:r.click,Object(w.a)({actionType:"greenurl",clickSource:"other_offers",dataSource:n,decodedUrl:i}),void 0,{href:o})}),onShow:Object(m.logTech)("show",function(e){var t=e.props,n=t.source,r=t.counters,o=t.url,i=t.decodedUrl;return Object(v.b)(null===r||void 0===r?void 0:r.show,Object(w.b)({dataSource:n,decodedUrl:i||o}))})}}),Object(r.withRegistry)(D))(C.a),A=n(464),F=Object(A.a)(B),U=new r.Registry({id:O.c}).set("OtherOffersFold",y).set("Offer",F),z=Object(p.compose)(Object(r.withRegistry)(U))(h.a),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},q=Object(m.withBaobab)({name:"OtherOffers",events:{onShow:Object(m.logTech)("show",function(e){var t,n=e.props;return Object(v.b)(null===(t=n.counters)||void 0===t?void 0:t.show,H(H({},function(e){return e.offers.reduce(function(e,t,n){var r="all_items_"+t.source,o="initially_visible_items_"+t.source;return e[r]=(e[r]||0)+1,n<O.a&&(e[o]=(e[o]||0)+1),e},{})}(n)),Object(w.b)({decodedUrls:n.offers.map(function(e){return e.decodedUrl||e.url})})))})}}),W=n(34),V=n(61),G=n(8),Y=n(77),K=n(46),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Q=Object(V.c)(function(e){var t=Object(G.j)(e);return[t&&t.otherOffers,e.favicons]},function(e,t){return{offers:(e||[]).map(function(e){var n;return X(X({},e),{favicon:null===(n=t[e.punycode||e.domain])||void 0===n?void 0:n.data})})}}),J=Object(p.compose)(Object(K.e)("otherOffers"),Object(W.e)(Q),Object(Y.a)(["offers"])),Z=Object(p.compose)(J,q)(z),$=n(0),ee=n.n($),te=n(3),ne=n(15),re=n(205),oe=n.n(re),ie=n(56),ae=n(405),ce=(n(774),Object(p.withBemMod)(Object(ne.b)(),{type:"moreVertical"})),se=n(528),ue=n(529),le=n(420),de=(n(770),Object(te.cn)("ExtraLinksPopup")),fe=Object(p.compose)(se.a,ue.a)(le.a),pe=function(e){var t=e.visible,n=e.anchor,r=e.scope,o=e.onClose,i=e.children;return ee.a.createElement(fe,{className:de(),target:"anchor",view:"default",directions:["bottom-right"],zIndex:1001,visible:t,anchor:n,scope:r,onClose:o},i)},he=n(5),me=n.n(he),ve=n(9),be=n(7),ge=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ye=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ge(arguments[t]));return e},Oe=function(){function e(){}return e.show=function(e){Object(be.a)().emit("feedback:show",{urls:function(e){var t,n=((t={})[we(e.preview[0])]=!0,t);e.imgHref&&(n[e.imgHref]=!0);return ye(e.dups,e.preview).forEach(function(e){n[we(e)]=!0}),Object.keys(n)}(e)})},e}();function we(e){return e.origin?e.origin.url:e.url}n(772);var Ce=Object(p.withBemMod)(Object(ne.b)(),{type:"errorOutline"}),je=(n(771),Object(te.cn)("ExtraLinksItem")),Ee=Object($.memo)(function(e){var t=e.title,n=e.icon,r=e.onClick,o=e.className;return ee.a.createElement("button",{className:je(null,[o]),onClick:r},ee.a.createElement("span",{className:je("Icon")},n),t)}),Se=n(908),ke=Ce(ne.a),_e=me()(Se),Pe=Object(te.cn)("ExtraLinksComplain"),Ie=Object($.memo)(function(e){var t=e.imageItem,n=e.onClick,r=void 0===n?ve.a:n,o=Object($.useCallback)(function(){Oe.show(t),r()},[t,r]),i=_e("Пожаловаться",{context:"Надпись на кнопке, позволяющей пожаловаться на содержимое страницы или конкретную картинку"}),a=ee.a.createElement(ke,{size:"s",type:"errorOutline"});return ee.a.createElement(Ee,{className:Pe(),title:i,icon:a,onClick:o})}),xe=(n(773),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),Re=Object(te.cn)("ExtraLinks"),Ne=Object(p.compose)(ce,ae.a)(ne.a),Me=Object($.memo)(function(e){var t=e.scope,n=e.scrollArea,r=e.imageItem,o=Object($.useRef)(null),i=xe(Object(ie.a)(!1),3),a=i[0],c=i[1],s=i[2];return oe()(s,[r]),Object($.useEffect)(function(){if(a&&n&&n.current){var e=n.current;return e.addEventListener("scroll",s),function(){e.removeEventListener("scroll",s)}}},[a,n,s]),ee.a.createElement("div",{className:Re()},ee.a.createElement("div",{className:Re("Icon"),onClick:a?s:c,ref:o},ee.a.createElement(Ne,{size:"m",type:"moreVertical",tone:"gray"})),ee.a.createElement(pe,{visible:a,onClose:s,anchor:o,scope:t},ee.a.createElement(Ie,{onClick:s,imageItem:r})))}),Te=n(522),Le=n(107),De=n(337),Be=n(514),Ae=n(162),Fe=Object(p.compose)(Object(r.withRegistry)(Te.a))(function(e){var t=e.unfocused,n=e.vertical,o=e.selectedIdx,i=e.onClick,a=e.onScroll,c=e.thumbSize,s=void 0===c?80:c,u=e.lowThumbMarginsExp,l=e.forwardRef,d=e.items,f=Object(r.useComponentRegistry)(Object(Ae.a)()).Gallery,p=s+32,h=Object($.useMemo)(function(){return d.map(function(e){return ee.a.createElement(Be.a,{thumb:e.thumb,targetSize:80,isMarket:"market"===e.commercialSource,key:e.id})})},[d]);return ee.a.createElement(f,{className:Object(Le.a)({unfocused:t,vertical:n,lowThumbMarginsExp:u},[Object(Ae.a)()]),forwardRef:l,selectedIdx:o,fixedPositionOnUpdate:!0,edgeCentered:"left",onClick:i,vertical:n,onScroll:a,autoScroll:De.b.fijiStyle,thumbSize:s,width:n&&s?p:void 0},h)}),Ue=n(151),ze=n(515),He=n(251),qe=n(209),We=n(516),Ve=(n(871),Object(p.compose)(Object(W.e)(qe.b),Object(Y.a)(["image"]),We.b)(He.a)),Ge=n(353),Ye=n(131),Ke=n(213),Xe=function(){return(Xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Je=me()(Ke),Ze="openImagePopupShown";var $e=function(e){return function(t){var n=Qe(t,[]),r=n,o=ee.a.useCallback(function(e,t,r){e.preventDefault(),e.stopPropagation(),n.isOpenImageUnauthPopupEnabled&&n.showUnauthPopup&&n.showUnauthPopup(e,Ze,{strictShow:n.isOpenImageUnauthPopupStrictEnabled,loginUrl:Object(Ye.a)(n.tld||"ru","images_viewer_open_image"),registrationUrl:void 0,skipUrl:t,skipText:Je("Не сейчас",{context:"Кнопка отказа от залогина на сервисе. Кнопка закрывает попап."}),baobabLogOnClose:"object"===typeof r?r:void 0,onCloseClick:function(o){n.isOpenImageUnauthPopupEnabled&&(window.open(t,"_blank"),"function"===typeof r&&r(e),o&&(o.preventDefault(),o.stopPropagation()))}})},[n]);return n.isOpenImageUnauthPopupEnabled&&n.showUnauthPopup&&(r=Xe(Xe({},r),{onOpenButtonClick:o,onSizeClick:o})),ee.a.createElement(e,Xe({},r))}}(Ge.a),et=n(351),tt=n(352),nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},rt=me()(Ke);var ot=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.diskShareDirectoryName,o=rt("Мои Яндекс.Картинки",{context:"Название папки на Яндекс.Диске, куда загружаются картинки"});return ee.a.createElement(e,nt({},t,{isDiskShareEnabled:n,diskShareDirectoryName:r||o}))}}(tt.a),it=function(){return(it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},at=me()(Ke),ct="shareDiskShown";var st=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.isDiskShareUnauthPopupEnabled,o=t.showUnauthPopup,i=t.tld,a=void 0===i?"ru":i,c=t.loggedIn,s=ee.a.useCallback(function(){r&&o&&o(null,ct,{loginUrl:Object(Ye.a)(a,"images_disk"),registrationUrl:Object(Ye.b)(a,"images_disk"),title:at("Войдите в Яндекс, чтобы сохранить картинку",{context:'Надпись в диалоговом окне с логином при клике на кнопку "сохранить на Яндекс.Диск"'})})},[r,o,a]);return ee.a.createElement(e,it({},t,{requestAuthorization:s,isDiskShareEnabled:c?n:n&&r&&Boolean(o)}))}}(ot),ut=new r.Registry({id:Object(Ue.a)()});ut.set("MMSidebar",i.a),ut.set("Gallery",Fe),ut.set("ImagesViewerApp",ze.a);var lt=new r.Registry({id:Object(s.a)()});lt.set("ThumbsLoader",f);var dt=new r.Registry({id:Object(o.a)()}).fill({ExtraLinks:Me,MMViewerButtons:Ve,OtherOffers:Z}),ft=new r.Registry({id:c.a.id});ft.set(Object(a.a)("OpenImage"),$e),ft.set(Object(a.a)("SearchByImage"),et.a),ft.set(Object(a.a)("Share"),st)},,,function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(void 0,o(n)))}})}t.getDisplayName=function(e){return e.displayName||e.name||"Component"},t.compose=a,t.useHocks=function(e){return i.useMemo(function(){return a.apply(void 0,o(e))},[e])}},,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(271),Object(r.withBemMod)(Object(o.b)(),{view:"raised"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=void 0,t.canUseDOM=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},,function(e,t,n){"use strict";function r(e){return e.schemaOrgSnippet?e.schemaOrgSnippet:e.snippet}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMImageStore")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(6),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=Object(o.withBaobab)({name:"div"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("div",i({},n,{ref:t}),n.children)});Object(o.withBaobab)({name:"img"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("img",i({},n,{ref:t}))})},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(3),c=(n(832),Object(a.cn)("Spin2")),s=function(e){var t=e.className,n=e.innerRef,o=e.progress,a=(e.view,e.position,e.size,Object(r.__rest)(e,["className","innerRef","progress","view","position","size"]));return i.a.createElement("div",Object(r.__assign)({},a,{ref:n,className:c({progress:o},[t])}))};s.displayName=c()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(2),o=n(0),i=n(210),a=n(46),c=n(247),s=n(28),u=function(e){return e.w+"×"+e.h};var l=n(22),d=n(50),f=(n(870),n(214)),p=Object(r.withRegistry)(f.a)(function(e){var t=e.image,n=e.imagesCbirSearchUrl,f=e.onLog,p=e.loggedIn,h=e.pos,m=e.rimPos,v=e.reqid,b=e.loginUrl,g=e.view,y=e.isFavorite,O=e.mainButtonTheme,w=t.preview&&t.preview[0]||t.dups&&t.dups[0],C=t.extraOrigin&&t.extraOrigin.url||w&&(w.origin?w.origin.url:w.url),j=Boolean(t.origOnlyOpen),E={pos:h},S=t.imgHref||C,k=function(e,t){if(!e)return[];var n,r=e.dups,o=e.extraOrigin||t,i={},a=(o?[o].concat(r):r).reduce(function(e,t){var r=t&&t.origin||t;if(!r||!r.w||!r.h||!r.url)return e;var a=u(r);if(!i[a]){i[a]=!0;var c={w:r.w,url:r.url,text:a};if(o===t)return n=c,e;e.push(c)}return e},[]);return a.length>1&&a.sort(function(e,t){return e.w&&t.w?t.w-e.w:0}),n&&a.unshift(n),a}(t,e.loadedThumb);return"undefined"!==typeof m&&(E.rim_id=t.rimid,E.rim_index=m),o.createElement(a.a,null,function(a){return o.createElement(r.ComponentRegistryConsumer,{id:Object(l.a)()},function(r){var u=r[Object(l.a)("OpenImage")],h=r[Object(l.a)("SearchByImage")],m=r[Object(l.a)("Photostock")],w=r[Object(l.a)("AddToCollection")],_=r[Object(l.a)("Share")],P=function(){if(t.previewUrl&&_)return o.createElement(_,{view:g,link:Object(i.b)(e.tld,t.previewUrl),snippetUrl:Object(c.a)(t).url,loggedIn:p,originalUrl:C,shareClick:Object(s.b)(a.shareClick,"",{reqid:t.reqid}),popupScope:e.popupScope,popupScrollArea:e.popupScrollArea,tld:e.tld,isDiskShareEnabled:e.isDiskShareEnabled,diskShareDirectoryName:e.diskShareDirectoryName,isDiskShareUnauthPopupEnabled:e.isDiskShareUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup})},I=function(){if(C&&w&&!e.isFavoritesDisabled)return o.createElement(w,{view:g,isFavorite:y,loggedIn:p,loginUrl:b,image:t,reqid:v,onLog:f,tld:e.tld,scope:e.popupScope,avatarId:e.avatarId,showUnauthPopup:e.showUnauthPopup})},x=function(){if(C&&h)return o.createElement(h,{view:g,imagesCbirSearchUrl:n,openServiceOnNewTab:e.openServiceOnNewTab,onClickCounter:Object(s.b)(a.similar,E,{reqid:v},{href:S}),onClickLogNode:Object(s.a)(a.similar),image:t,onLog:f,tld:e.tld,isSimilarUnauthPopupEnabled:e.isSimilarUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup,experiments:e.experiments})};return o.createElement("div",{className:Object(l.a)({view:g})},function(){if(C&&u)return o.createElement(u,{view:g,url:j?t.snippet.url:C,dups:k,link:Object(i.b)(e.tld,t&&t.previewUrl||""),downloadCounter:Object(s.b)(a.buttonOpen,E,{reqid:v}),downloadLogNode:Object(s.a)(a.buttonOpen),otherSizeCounter:Object(s.b)(a.otherSize,E,{reqid:v}),otherSizeLogNode:Object(s.a)(a.buttonOpen),onLog:f,popupScope:e.popupScope,popupScrollArea:e.popupScrollArea,tld:e.tld,isOpenImageUnauthPopupEnabled:e.isOpenImageUnauthPopupEnabled,isOpenImageUnauthPopupStrictEnabled:e.isOpenImageUnauthPopupStrictEnabled,showUnauthPopup:e.showUnauthPopup,theme:O})}(),function(){if(m&&g!==d.b.compact&&t.photostockUrl)return o.createElement(m,{photostockUrl:t.photostockUrl})}(),g===d.b.twoLines?o.createElement("div",{className:Object(l.a)("Inline")},x(),P(),I()):o.createElement(o.Fragment,null,x(),I(),P()))})})})},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=n(1),o=n(420),i=(n(814),Object(r.withBemMod)(Object(o.b)(),{view:"tooltip"})),a=(n(815),Object(r.withBemMod)(Object(o.b)(),{tone:"dark"}))},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=Object(r.useRef)(e);return t.current=e,t}},function(e,t,n){"use strict";n.r(t);var r=n(340);n.d(t,"useUpdateEffect",function(){return r.a})},function(e,t,n){"use strict";n.r(t);var r=n(341);n.d(t,"useUniqId",function(){return r.a})},,,function(e,t,n){"use strict";var r=n(0),o=function(e,t){return"boolean"===typeof t?t:!e};t.a=function(e){return Object(r.useReducer)(o,e)}},,,,function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return y});var r=n(0),o=n(5),i=n.n(o),a=n(2),c=n(125),s=n(317),u=n(161),l=n(66),d=n(266),f=(n(689),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},v=i()(d),b=function(e){function t(t){var n=e.call(this,t)||this;return n.loadedCount=0,n.shownCounted=!1,n.onErrorHandler=n.onErrorHandler.bind(n),n.onLoadHandler=n.onLoadHandler.bind(n),n.onImageLoadingResult=n.onImageLoadingResult.bind(n),n.state={banned:{},clearOffers:t.offers},n}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.offers,n=e.theme,o=e.className;this.prevOffers!==t&&(this.prevOffers=t,this.loadedCount=0,this.shownCounted=!1);var i=this.getRenderedOffersList();if(!i)return null;if(!1===this.props.renderContainer)return i;var a=r.createElement("div",{className:Object(l.b)({withMarket:this.props.isMarket,offersInRow:this.props.offersInRow||2,theme:n},[u.a,o])},this.props.title&&r.createElement("div",{className:Object(l.b)("Header",[s.a])},this.props.title),r.createElement("div",{className:Object(l.b)("Content")},i));return"function"===typeof this.props.renderContainer?this.props.renderContainer(a):a},t.prototype.getRenderedOffersList=function(){var e=this,t=this.state.banned,n=this.props,o=n.offers,i=n.theme,c=n.isMarket,s=n.deprecated,u=o.filter(function(e){return e.image&&e.image.url&&!t[e.image.url]});return u.length?r.createElement(a.ComponentRegistryConsumer,{id:l.a},function(t){var n=t.OfferCard;return r.createElement(r.Fragment,null,u.map(function(t,o){var a;return r.createElement(n,p({className:Object(l.b)("Offer"),key:t.link,theme:i,size:s?void 0:"m",withMarket:c,pos:o},t,{onTitleClick:e.bindHandler(e.props.onClick,t,"title"),onImageClick:e.bindHandler(e.props.onClick,t,"image"),onPathClick:e.bindHandler(e.props.onClick,t,"path"),onPriceClick:e.bindHandler(e.props.onClick,t,"price"),onError:e.onErrorHandler(t),extendedClickArea:e.props.extendedClickArea,enabledWhenExtendedClickArea:!s&&e.props.extendedClickArea,counters:null===(a=e.props.counters)||void 0===a?void 0:a.offer,onImageLoad:e.onLoadHandler}))}))}):null},t.prototype.bindHandler=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)return function(){return e.apply(void 0,m(t))}},t.prototype.onErrorHandler=function(e){var t=this;return function(){var n;return t.setState({banned:p(p({},t.state.banned),(n={},n[e.image&&e.image.url||""]=!0,n))},function(){t.onImageLoadingResult()})}},t.prototype.onLoadHandler=function(){this.loadedCount++,this.onImageLoadingResult()},t.prototype.onImageLoadingResult=function(){if(this.props.onShow&&!this.shownCounted){var e=this.props.offers,t=this.state.banned,n=e.reduce(function(e,n){return e+(t[n.image.url]?1:0)},0);this.loadedCount+n===e.length&&(this.shownCounted=!0,this.props.onShow({count:this.loadedCount,decodedUrls:e.map(function(e){return e.decodedLink||e.link})}))}},t}(r.PureComponent),g={title:v("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},y=Object(c.a)(g)(b)},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(24),i=Object(r.withBemMod)(Object(o.b)(),{size:"m"})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(2),i=n(105),a=n(75),c=n(10),s=n(45),u=n(24),l=(n(384),function(e){var t=e.className,n=e.image,l=e.title,d=e.domain,f=e.price,p=e.currency,h=void 0===p?"RUB":p,m=e.link,v=e.decodedLink,b=e.favicon,g=e.extendedClickArea,y=void 0===g||g,O=e.withMarket,w=void 0!==O&&O,C=e.counter,j=void 0===C?{}:C,E=e.source,S=e.onError,k=e.onImageLoad,_=e.onImageClick,P=e.onPathClick,I=e.onTitleClick,x=e.onContainerClick,R=e.onPriceClick,N=Object(o.useComponentRegistry)(u.a),M=N.Link,T=N.Price,L=N.Path,D=Object(i.decodeHTMLEntities)(l),B=r.useCallback(function(e){j.path&&Object(c.a)(e,{href:m,vars:Object(s.a)({clickSource:j.clickSource,dataSource:E,actionType:"greenurl",decodedUrl:v,pos:j.pos})})},[m,j.path,j.pos,j.clickSource,E,v]),A=r.useCallback(function(){B(j.path+"/click/item"),x&&x()},[j.path,x,B]),F=r.useCallback(function(e){B(j.path+"/click/thumb"),e.stopPropagation(),_&&_()},[j.path,_,B]),U=r.useCallback(function(e){B(j.path+"/click/title"),e.stopPropagation(),I&&I()},[j.path,I,B]),z=r.useCallback(function(e){B(j.path+"/click/url"),e.stopPropagation(),P&&P()},[j.path,P,B]),H=r.useCallback(function(e){B(j.path+"/click/price"),e.stopPropagation(),R&&R()},[j.path,R,B]),q=r.useMemo(function(){return[{url:y?void 0:m,text:d,onClick:z}]},[y,m,d,z]);return r.createElement(M,{className:Object(u.b)({extendedClickArea:y,withMarket:w},[t]),theme:y?"normal":void 0,url:y?m:void 0,onClick:y?A:void 0,as:y?"a":"div"},r.createElement(M,{className:Object(u.b)("ImageLink"),url:y?void 0:m,onClick:F,rel:"noopener",target:"_blank"},r.createElement("img",{className:Object(u.b)("Image"),key:n.url,src:n.url,alt:D,onError:S,onLoad:k})),r.createElement("div",{className:Object(u.b)("Content")},r.createElement(M,{className:Object(u.b)("Title"),theme:"normal",url:y?void 0:m,onClick:U},D),r.createElement(L,{favicon:b?r.createElement(a.a,{className:Object(u.b)("Favicon"),favicon:b}):void 0,className:Object(u.b)("GreenUrl"),items:q,boldCount:0}),r.createElement("div",{className:Object(u.b)("Spacer")}),f&&r.createElement("div",{className:Object(u.b)("Price"),onClick:H},r.createElement(T,{largeSeparator:!0,groupLength:3,value:f,currency:h}))))})},function(e,t,n){n.r(t);var r=n(2873);n.d(t,"tr",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(2),o=n(215),i=n(216),a=n(1),c=n(541),s=n(992),u=n(438),l=n(922),d=n(15),f=n(704),p=n(53),h=Object(a.compose)(c.a,s.a,u.a)(l.a),m=Object(f.a)(d.a),v=new r.Registry({id:Object(p.a)()}).fill({Button:h,Icon:m}),b=Object(r.withRegistry)(v)(i.a),g=n(37),y=new r.Registry({id:Object(g.a)()}).fill({CarouselArrow:b}),O=Object(r.withRegistry)(y)(o.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}},,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n.n(o),a=n(17),c=(n(430),function(e){var t=e.autoComplete,n=void 0===t?"off":t,o=e.autoFocus,c=e.className,s=e.controlRef,u=e.defaultValue,l=e.disabled,d=e.id,f=e.inputMode,p=e.max,h=e.maxLength,m=e.min,v=e.name,b=e.onBlur,g=e.onChange,y=e.onFocus,O=e.onKeyDown,w=e.onKeyPress,C=e.onKeyUp,j=e.pattern,E=e.placeholder,S=e.readOnly,k=e.required,_=e.tabIndex,P=e.type,I=e.value,x=Object(r.__rest)(e,["autoComplete","autoFocus","className","controlRef","defaultValue","disabled","id","inputMode","max","maxLength","min","name","onBlur","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","pattern","placeholder","readOnly","required","tabIndex","type","value"]);return i.a.createElement("input",Object(r.__assign)({},x,{autoComplete:n,autoFocus:o,className:Object(a.b)("Control",null,[c]),defaultValue:u,disabled:l,id:d,inputMode:f,max:p,maxLength:h,min:m,name:v,onBlur:b,onChange:g,onFocus:y,onKeyDown:O,onKeyPress:w,onKeyUp:C,pattern:j,placeholder:E,readOnly:S,ref:s,required:k,tabIndex:_,type:P,value:I}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n.n(o),a=n(17),c=(n(431),function(e){var t=e.className,n=Object(r.__rest)(e,["className"]);return i.a.createElement("span",Object(r.__assign)({},n,{className:Object(a.b)("Box",null,[t])}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),o=n(0),i=n(17),a=(n(432),n(433),n(434),function(e){var t=e.component,n=e.side,a=Object(r.__rest)(e,["component","side"]);return Object(o.cloneElement)(t,Object(r.__assign)(Object(r.__assign)({},a),{className:Object(i.b)("Icon",{side:n},[t.props.className])}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(17),a=(n(435),function(e){var t=e.leave,n=e.onAnimationEnd,r=e.children,a=e.id;return o.a.createElement("span",{className:Object(i.b)("Hint",{leave:t}),onAnimationEnd:n,id:a},r)})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(65),c=n(27),s=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.controlRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidUpdate=function(e){null!==this.controlRef.current&&this.props.focused!==e.focused&&(this.props.focused?this.controlRef.current.focus():this.controlRef.current.blur())},n.prototype.render=function(){var t=this.props.controlRef,n=void 0===t?null:t;return i.a.createElement(e,Object(r.__assign)({},this.props,{controlRef:Object(c.a)(this.controlRef,n)}))},n}(o.PureComponent)).displayName="withAutoFocus("+Object(a.a)(e)+")",t}},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(6),o=n(28),i=n(11),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getMethods=function(){return this.handlers?this.handlers:this.handlers={hit:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hit(c(c({},e),{vars:Object(o.e)(e.vars||"",!0)}),t)},hitDelayed:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hitDelayed(c(c({},e),{vars:Object(o.e)(e.vars||"",!0)}),t)}}},t.prototype.clientAction=function(t){var n=this.getMethods(),r=t.eventData;if(i.a)if(r.data&&r.data.__oldCounter__){var a=r.data,s=a.method,u=a.__oldCounter__,l=a.node;if(this.hrefPrefix){var d=Object(o.d)(u.vars||"");r.data=c(c({},d),{path:u.path}),d["-baobab-event-json"]=encodeURIComponent(JSON.stringify(r)),u.vars=Object(o.e)(d)}var f=n[s];f&&f(u,l)}else e.prototype.clientAction.call(this,t)},t.prototype.sendData=function(){if(this.hrefPrefix){this.events.length<=42&&e.prototype.sendData.call(this);for(var t=this.events;t.length;)this.events=t.splice(0,42),e.prototype.sendData.call(this)}},t.prototype.sendByAjax=function(t){return!!this.hrefPrefix&&e.prototype.sendByAjax.call(this,t)},t}(r.Sender),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createEvent=function(t,n,r,o){var i=e.prototype.createEvent.call(this,t,n,r,o),a=o.counter;return a&&(i.data=a),i},t}(r.Logger)},function(e,t,n){"use strict";n.d(t,"a",function(){return r.a});n(37);var r=n(267)},,function(e,t,n){"use strict";var r=n(13),o=function(){function e(){var e=this;this.onKeyDown=function(){window.clearTimeout(e.timeoutId),e.isPointer=!1},this.onMouseDown=function(){e.isPointer=!0,window.clearTimeout(e.timeoutId),e.timeoutId=window.setTimeout(function(){return e.isPointer=!1},600)},this.onFocus=function(){e.isPointer?(window.document.body.classList.add("pointerfocus"),window.document.body.classList.remove("utilityfocus")):(window.document.body.classList.add("utilityfocus"),window.document.body.classList.remove("pointerfocus"))},this.onBlur=function(){window.addEventListener("focus",e.setIsPointerOnTabFocus,!0)},this.setIsPointerOnTabFocus=function(){window.removeEventListener("focus",e.setIsPointerOnTabFocus,!0),window.document.body.classList.contains("pointerfocus")&&(e.isPointer=!0,window.setTimeout(function(){return e.isPointer=!1}))},this.timeoutId=0,this.isPointer=!1,window.addEventListener("blur",this.onBlur),window.document.addEventListener("keydown",this.onKeyDown),window.document.addEventListener("mousedown",this.onMouseDown),window.document.addEventListener("mouseup",this.onMouseDown),window.document.addEventListener("focusin",this.onFocus),window.document.body.classList.contains("pointerfocus")||window.document.documentElement.classList.contains("pointerfocus")||window.document.body.classList.add("utilityfocus")}return e.create=function(){return new e},e.prototype.dispose=function(){window.removeEventListener("blur",this.onBlur),window.document.removeEventListener("keydown",this.onKeyDown),window.document.removeEventListener("mousedown",this.onMouseDown),window.document.removeEventListener("mouseup",this.onMouseDown),window.document.removeEventListener("focusin",this.onFocus),window.document.body.classList.remove("pointerfocus","utilityfocus")},e}(),i=null;Object(r.a)()&&null===i&&(i=o.create())},,,function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.soldOut="soldOut",e.inStock="inStock",e.preOrder="preOrder"}(r||(r={}))},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n.n(r),i=n(3),a=n(82),c=(n(436),Object(i.cn)("CropMarkerShape")),s=Object(r.forwardRef)(function(e,t){var n=e.className,r=e.x,i=e.y,s=e.hidden,u=void 0!==s&&s,l=e.active,d=void 0!==l&&l,f=e.onMouseEnter,p=e.onMouseLeave,h=e.onClick;return o.a.createElement("button",{ref:t,type:"button",className:c({hidden:u,active:d},[n]),style:{left:Object(a.a)(r,3),top:Object(a.a)(i,3)},onMouseEnter:f,onMouseLeave:p,onClick:h})})},function(e,t,n){"use strict";n.d(t,"h",function(){return a}),n.d(t,"i",function(){return c}),n.d(t,"j",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h}),n.d(t,"f",function(){return m});var r=n(8),o=n(61),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=Object(o.a)("tags");function c(e){return e&&e.rimid}function s(e){var t=e.query;return{tld:e.tld,text:t}}var u=Object(o.a)("rimData"),l=c;var d=Object(o.d)(function(e,t){if(void 0!==t){var n=e.rimForItem;return n&&n[t]}}),f=Object(o.c)(function(e){var t=d(e,e.rimSelectedIdx);return[t,Object(r.c)(e),t?e.loadedThumbs[t.id]:void 0]},function(e,t,n){if(e)return i(i({},e),{isRim:!0,parentPos:t&&t.pos,loadedImage:n})});function p(e,t,n){for(var r=[],o=t+n,i=t;i<o;i++){var a=l(e[i]);a&&r.push(a)}return r}function h(e,t,n){void 0===t&&(t={});var r=e.filter(function(e){var r=n&&n[e.thumb.url];return e.rimid&&(!t||!t[e.rimid])&&(!r||!r.isFailed)});return r.length===e.length?e:r}function m(e,t,n){for(var r=[],o=0;o<e.length&&(!n||r.length<n);o++){var i=e[o];i&&i.thumb&&!t[i.thumb.url]&&r.push(i.thumb)}return r}},function(e,t,n){n.r(t);var r=n(3008);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3116);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3125);n.d(t,"tr",function(){return r.a})},,,function(e,t,n){"use strict";var r=n(155),o=n(80),i=n(81);n(101);function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var c=n(0),s=n.n(c),u=n(14),l=n.n(u),d=!1,f=n(116),p="unmounted",h="exited",m="entering",v="entered",b=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=h,r.appearStatus=m):o=v:o=t.unmountOnExit||t.mountOnEnter?p:h,r.state={status:o},r.nextCallback=null,r}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===p?{status:h}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==m&&n!==v&&(t=m):n!==m&&n!==v||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===m?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===h&&this.setState({status:p})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[l.a.findDOMNode(this),r],i=o[0],a=o[1],c=this.getTimeouts(),s=r?c.appear:c.enter;!e&&!n||d?this.safeSetState({status:v},function(){t.props.onEntered(i)}):(this.props.onEnter(i,a),this.safeSetState({status:m},function(){t.props.onEntering(i,a),t.onTransitionEnd(s,function(){t.safeSetState({status:v},function(){t.props.onEntered(i,a)})})}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:l.a.findDOMNode(this);t&&!d?(this.props.onExit(r),this.safeSetState({status:"exiting"},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:h},function(){e.props.onExited(r)})})})):this.safeSetState({status:h},function(){e.props.onExited(r)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:l.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===p)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(o.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.a.createElement(f.a.Provider,{value:null},"function"===typeof n?n(e,r):s.a.cloneElement(s.a.Children.only(n),r))},t}(s.a.Component);function g(){}b.contextType=f.a,b.propTypes={},b.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},b.UNMOUNTED=p,b.EXITED=h,b.ENTERING=m,b.ENTERED=v,b.EXITING="exiting";var y=b,O=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}(e,t)})},w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}Object(i.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach(function(t){return function(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}(e,t)})}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&O(e,r),o&&O(e,o),i&&O(e,i)},n.render=function(){var e=this.props,t=(e.classNames,Object(o.a)(e,["classNames"]));return s.a.createElement(y,Object(r.a)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.a.Component);w.defaultProps={classNames:""},w.propTypes={};t.a=w},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(40),a=n(197);t.useBaobab=function(e){var t=o.useContext(i.BaobabContext),n=o.useRef({logEvent:function(){return function(){}},startCreate:!1}),c=o.useMemo(function(){if(t){var o=t.logger,i=t.parentNode,a=i?o.prepareChild(i,e):o.prepareRoot(e),c=n.current;return c.startCreate=!0,c.nextContext=r(r({},t),{parentNode:a}),c.node=a,c.logEvent=function(e,t,n){if(!c.node||!c.nextContext)return function(){};var r=c.node,o=c.nextContext.logger,i=o.createEvent(r,e,t,n),a=o.withEvent.bind(o,i);return a(function(e){return setTimeout(e,0)}),o.dispatchEvent(r,i),a},a}},[t,e]);return o.useEffect(function(){var e=n.current;if(e.startCreate){if(!t||!c)throw new a.BaobabNotInitError;return t.logger.attachNode(c),e.startCreate=!1,c.__useBaobab=!0,function(){return t.logger.detachNode(c)}}},[t,e,c]),o.useMemo(function(){var e=n.current;return{logEvent:e.logEvent,nextContext:e.nextContext,node:e.node}},[])}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(144);t.withBaobab=function(e,t){var n=function(t){var n=t.displayName||t.name||"Component",c=function(n){var c=n.__forwardedRef__,s=n.logNode,u=o(n,["__forwardedRef__","logNode"]);return i.createElement(a.BaobabComponents.Consumer,null,function(n){var o=n.BaobabNode;return i.createElement(o,{nodeDeclaration:e,logNode:s,childProps:u},function(e){return i.createElement(t,r({},u,e,{ref:c}))})})};if(c.displayName="AddBaobab("+n+")",e.extra&&e.extra.ref){var s=i.forwardRef(function(e,t){return i.createElement(c,r({},e,{__forwardedRef__:t}))});return s.displayName="AddBaobab("+n+")",s}return c};return t?n(t):n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(199),c=n(144);t.withBaobabRoot=function(e,t,n,s){return function(u){return function(l){var d=l.baobab,f=l.logNode,p=o(l,["baobab","logNode"]),h=i.useContext(c.BaobabComponents).BaobabNode;return i.createElement(a.BaobabRoot,{Logger:t,Sender:n,loggerProps:d,onLoggerInit:s},e?i.createElement(h,{nodeDeclaration:e,logNode:f,childProps:p},function(e){return i.createElement(u,r({},p,e))}):i.createElement(u,r({},p)))}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(40),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextContext={logger:t.props.logger,parentNode:t.props.parentNode},t}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.logger,r=e.parentNode;return(this.nextContext.logger!==n||this.nextContext.parentNode!==r)&&(this.nextContext={logger:n,parentNode:r}),o.createElement(i.Provider,{value:this.nextContext},t)},t}(o.Component);t.BaobabAppendTo=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getBundleUrl=function(){return"https://frontend-internal.s3.mds.yandex.net/baobab-viewer/"+t.props.version+"/button.js"},t}return r(t,e),t.prototype.componentDidMount=function(){var e=document.createElement("script");e.src=this.getBundleUrl(),e.async=!0,e.id="BaobabViewerInject",e.dataset.version=this.props.version,e.dataset.service=this.props.service,e.dataset.positionX=this.props.positionX,e.dataset.positionY=String(this.props.positionY),document.body.appendChild(e)},t.prototype.render=function(){return null},t.defaultProps={version:"0.3.0",positionX:"left",positionY:0},t.useLogger=function(e){window.__baobabLogger=e},t}(n(0).Component);t.BaobabInjectorButton=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.function=0]="function",e[e.class=1]="class",e[e.portalHost=4]="portalHost",e[e.host=5]="host"}(t.WorkTag||(t.WorkTag={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventDataAttrsConstructor=function(e){return"function"===typeof e},t.isEventDeclaration=function(e){return Boolean(e)},t.isNodeAttrsConstructor=function(e){return"function"===typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Click="click",e.Scroll="scroll",e.Tech="tech",e.Create="show",e.Append="append",e.Visibility="visibility"}(t.BaobabLogEventType||(t.BaobabLogEventType={})),function(e){e.Show="show",e.Hide="hide"}(t.VisibilityChangeType||(t.VisibilityChangeType={})),t.isTreeNode=function(e){return"key"in e},t.isChildNode=function(e){return"parent"in e},t.isRootNode=function(e){return!("parent"in e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NoSend="no send",e.SendBeacon="sendBeacon",e.Ajax="ajax",e.Img="tag img"}(t.BaobabSendWay||(t.BaobabSendWay={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getCacheKey=function(e){if(e.key)return e.key;var t=e.attrs,n=e.name;if(t)for(var r in n+=":",t)n+=""+r+t[r];return n},t.prototype.createChildNode=function(t,n){var r,i,a=this.getCacheKey(t),c=n.mapChildren[a];if(c)try{for(var s=o(c),u=s.next();!u.done;u=s.next()){var l=u.value;if(!l.flags.created)return l.flags.created=!0,l}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}var d=e.prototype.createChildNode.call(this,t,n);return c?c.push(d):n.mapChildren[a]=[d],d},t}(n(145).Logger);t.LoggerWithCache=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73),o=function(){function e(e){var t=e.hrefPrefix,n=e.hrefPostfix;this.events=[],this.waitTime=100,this.hrefPrefix=t,this.hrefPostfix=n}return e.prototype.clientAction=function(e,t){var n=e.eventData.event;if(n===r.BaobabLogEventType.Click)this.click(e,t);else if(n===r.BaobabLogEventType.Scroll)this.scroll(e,t);else{if(n!==r.BaobabLogEventType.Tech)throw new Error("Неподдерживаемый тип события в Баобаб: "+n);this.tech(e,t)}},e.prototype.click=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Click,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data,behaviour:o.behaviour},t)},e.prototype.scroll=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Scroll,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.tech=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Tech,service:o.service,subservice:o.subservice,type:o.type,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.appendTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Append,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.createTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Create,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.detachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Hide,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.attachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Show,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.logEvent=function(e,t){var n=this;this.events.push({data:e,listener:t}),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){return n.sendData()},this.waitTime)},e.prototype.logShowEvent=function(e,t){this.sendByAjax([{data:e,listener:t}])},e.prototype.sendData=function(){for(var e=this,t=0;t<this.events.length;t+=42){var n=this.events.slice(t,t+42),r=n.map(function(t){return"/events="+encodeURIComponent(JSON.stringify([t.data]))+e.hrefPostfix}).join("\r\n").length>6e4;-1!==navigator.userAgent.indexOf("Chrome")&&r?this.sendByAjax(n):this.sendBySendBeacon(n)||this.sendByImg(n)}this.events=[]},e.prototype.sendBySendBeacon=function(e){var t=this;if(!navigator.sendBeacon)return!1;var n=this.getEventRecords(e).join("\r\n");return!!navigator.sendBeacon(this.hrefPrefix,n)&&(e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.SendBeacon,sentContentLength:n.length,success:!0})}),!0)},e.prototype.sendByImg=function(e){var t=this;return this.getEventRecords(e).forEach(function(n,o){var i=document.createElement("img"),a=t.hrefPrefix+n;i.addEventListener("load",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!0})}),i.addEventListener("error",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!1})}),i.src=a}),!0},e.prototype.sendByAjax=function(e){var t=this,n=this.getEventRecords(e).join("\r\n"),o=new XMLHttpRequest;return o.addEventListener("readystatechange",function(){o.readyState===XMLHttpRequest.DONE&&e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.Ajax,success:200===o.status,sentContentLength:n.length,status:o.status,xmlHttpRequest:o})})}),o.open("POST",this.hrefPrefix),o.send(n),!0},e.prototype.getEventRecords=function(e){var t=this;return e.map(function(e){return"/events="+encodeURIComponent(JSON.stringify([e.data]))+t.hrefPostfix})},e.prototype.eventSend=function(e,t){e.listener&&e.listener({eventData:e.data,sendInfo:t})},e}();t.Sender=o},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(73);function a(e){return e.tag===i.WorkTag.host&&(Boolean(e.pendingProps&&e.pendingProps.onClick)||"a"===e.type||"button"===e.type)}function c(e){return Boolean(e&&"pendingProps"in e&&"sibling"in e&&"child"in e&&"return"in e&&"tag"in e&&"type"in e&&"stateNode"in e)}function s(e){var t,n,r,o=null===(r=null===(n=null===(t=e)||void 0===t?void 0:t.updateQueue)||void 0===n?void 0:n.lastEffect)||void 0===r?void 0:r.deps;if(Array.isArray(o))for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.__useBaobab)return a}}function u(e){return Boolean(e&&(e.tag===i.WorkTag.function||e.tag===i.WorkTag.class)&&("isBaobabNode"in e.type&&e.type.isBaobabNode||s(e)))}function l(e){if(u(e))return e.stateNode?e.stateNode.node:s(e)}function d(e){if(e)return c(e)?e:function(e){return e._reactRootContainer&&e._reactRootContainer._internalRoot.current||void 0}(e)||function(e){var t=function(e){var t=Object.keys(e).reduce(function(e,t){return e||0===t.indexOf("__reactInternalInstance$")&&t},!1);return t?e[t]:void 0},n=t(e);if(!n&&e.firstElementChild)for(var r=t(e.firstElementChild);r;){if(r.tag===i.WorkTag.portalHost&&r.stateNode.containerInfo===e){n=r;break}r=r.return||void 0}return n}(e)}function f(e){if(e)for(var t=d(e);t;){if(u(t))return t;t=t.return||void 0}}function p(e,t){for(var n=[],r=t?d(e):f(e);r;){var o=r.child,c=l(r);if(c){var s={path:(t&&t.path?t.path+".":"")+c.name,baobab:c},u=o?p(o,s):[];u.length>0&&(s.children=u),n=n.concat(s)}else{var h=a(r);if(r.tag===i.WorkTag.host&&t&&!t.container&&(t.container=r.stateNode),h){var m=r.stateNode;t||(t={path:"",baobab:void 0}),!t.baobab||t.clickElement||t.errorElements?(t.errorElements||(t.errorElements=t.clickElement?[t.clickElement]:[],delete t.clickElement),t.errorElements.push(m)):t.clickElement=m}o&&(n=n.concat(p(o,t)))}r=r.sibling||void 0}return n}t.isClickableComponents=a,t.isReactInternalFiber=c,t.getBaobabNodeFromUseBaobab=s,t.isReactBaobabNode=u,t.getNodeFromThis=l,t.getComponent=d,t.getBaobabComponent=f,t.getNode=function(e){if(e){var t=f(e);return t?l(t):void 0}},t.findById=function e(t,n){return t.baobab&&t.baobab.id===n?t:t.children&&t.children.reduce(function(t,r){return t||e(r,n)},void 0)},t.createTree=p,t.getAllTrees=function(e){var t=document.querySelectorAll(e);return o(t).reduce(function(e,t){return t?e.concat(p(t)):e},[])},t.filterErrors=function e(t){var n=t.errorElements?[t]:[];return t.children?t.children.reduce(function(t,n){return t.concat(e(n))},n):n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),i=n(145);function a(e,t,n){void 0===n&&(n={});var i={name:n.name||t.name},a=n.key||t.key;if(a&&(i.key=a),(t.events||n.events)&&(i.events=r(r({},t.events),n.events)),t.attrs||n.attrs){var c=o.isNodeAttrsConstructor(t.attrs)?t.attrs(e):t.attrs,s=o.isNodeAttrsConstructor(n.attrs)?n.attrs(e):n.attrs;i.attrs=r(r({},c),s)}return i}t.createChildData=a,t.createRootData=function(e,t,n){var r=a(e,t,n);return void 0===r.attrs&&(r.attrs={}),"schema-ver"in r.attrs||(r.attrs["schema-ver"]=i.SCHEMA_VER),r},t.areEqualsNodes=function(e,t,n){var r,o;if(e.key||t.key)return e.key===t.key;if(e.name!==t.name)return!1;if("parent"in e&&e.parent.id!==(null===(r=n)||void 0===r?void 0:r.id))return!1;if(!("parent"in e)&&(null===(o=n)||void 0===o?void 0:o.id))return!1;var i=e.attrs,a=t.attrs;if(i===a)return!0;if(!i||!a)return!1;if(Object.keys(i).length!==Object.keys(a).length)return!1;for(var c in i)if(i[c]!==a[c])return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaobabInitState=function(e){return{prefix:function(e){if("string"!==typeof e)return"b-id";for(var t=0,n=0;n<e.length;n++)t^=(t<<5)+(t>>>2)+e.charCodeAt(n);return(t&=1048575).toString(36)}(e.reqId),senderParams:function(e){if("hrefPostfix"in e)return{hrefPostfix:e.hrefPostfix,hrefPrefix:e.hrefPrefix};var t=e.reqId,n=e.table,r=e.service,o=e.slots,i=Array.isArray(o)?"/slots="+o.join(";"):"";return{hrefPostfix:"/*//"+e.pageUrl,hrefPrefix:"https://yandex.ru/clck/click/reqid="+t+i+"/table="+(n||r)}}(e)}}},function(e,t,n){"use strict";function r(e,t){if("function"!==typeof URL){var n=document.createElement("a");return n.href=e,{hostname:n.hostname,port:n.port,protocol:n.protocol,origin:n.origin}}try{return new URL(e,t)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=r,t.getOrigin=function(e){var t="string"===typeof e?r(e):e;if(!t)return"";if(t.origin)return t.origin;var n=t.port?":"+t.port:"";return t.protocol+"//"+t.hostname+n},t.getHostname=function(e,t){var n=r(e,t);return n?n.hostname:""}},,function(e,t,n){"use strict";var r=n(402);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";var r=n(403);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(52),o=(n(690),Object(r.a)("SectionHeader"))},,,,function(e,t,n){"use strict";var r=n(0);t.a=function(e){void 0===e&&(e={});var t=Object(r.useState)(e),n=t[0],o=t[1];return[n,Object(r.useCallback)(function(e){o(function(t){return Object.assign({},t,e instanceof Function?e(t):e)})},[o])]}},,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){n.r(t);var r=n(2963);n.d(t,"tr",function(){return r.a})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("MMTiledImages")},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(24),i=(n(383),Object(r.withBemMod)(Object(o.b)(),{theme:"union"}))},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),o=n(0),i=n.n(o),a=n(65);function c(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hovered:e.props.hovered},e.onMouseEnter=function(t){e.setState({hovered:!0}),void 0!==e.props.onMouseEnter&&e.props.onMouseEnter(t)},e.onMouseLeave=function(t){e.setState({hovered:!1}),void 0!==e.props.onMouseLeave&&e.props.onMouseLeave(t)},e}return Object(r.__extends)(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({hovered:!e.disabled&&(this.state.hovered||e.hovered)})},n.prototype.render=function(){var t=this.state.hovered,n=this.props.disabled,o=e;return i.a.createElement(o,Object(r.__assign)({},this.props,{hovered:n?void 0:t,onMouseEnter:n?void 0:this.onMouseEnter,onMouseLeave:n?void 0:this.onMouseLeave}))},n.displayName="WithControl@desktop("+Object(a.a)(e)+")",n}(o.PureComponent)}},,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return v});var r,o=n(0),i=n(114),a=n(61),c=n(249),s=n(406),u=n(107),l=(n(780),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.alwaysCenter=1]="alwaysCenter",e[e.fijiStyle=2]="fijiStyle"}(r||(r={}));var f={name:"gallery"},p=Object(u.a)("Container"),h=Object(a.d)(function(e){return Object(u.a)(null,[e])}),m=function(e){function t(t){var n=e.call(this,t)||this;return n.dragging=!1,n.wasDragging=!1,n.wasClicked=!1,n.dragStartMouseX=0,n.dragStartMouseY=0,n.dragStartGalleryX=0,n.wasDraggingTime=0,n.container=o.createRef(),n.rootNode=o.createRef(),n.selectedNode=o.createRef(),n.firstNode=o.createRef(),n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onAnimationEnd=n.onAnimationEnd.bind(n),n.renderGalleryItem=n.renderGalleryItem.bind(n),n.onItemClickHandler=n.onItemClickHandler.bind(n),n.state={},n}return l(t,e),t.prototype.getSnapshotBeforeUpdate=function(){if(!this.props.fixedPositionOnUpdate)return null;var e=this.container.current;if(!e)return null;var t=e.getBoundingClientRect(),n=t.height/2,r=t.left+t.width/2-n/2,o=t.top+n,i=document.elementFromPoint(r,o);return i===e&&(i=document.elementFromPoint(r+n,o)),i&&i!==e?{baseNode:i,wasPosition:i.getBoundingClientRect().left}:null},t.prototype.componentDidUpdate=function(e,t,n){var o=this.container.current;if(n&&void 0!==n.wasPosition&&n.baseNode&&o&&o.contains(n.baseNode)){var i=n.baseNode.getBoundingClientRect().left-n.wasPosition;i&&(o.scrollTop+=i,void 0!==this.scrollingTarget&&(this.scrollingTarget+=i))}var a=(this.props.selectedIdx||0)-(e.selectedIdx||0);a&&this.props.autoScroll&&(this.wasClicked&&this.props.autoScroll===r.fijiStyle?this.scrollItems(a>0?1:-1):this.scrollIntoCenter()),this.wasClicked=!1},t.prototype.componentDidMount=function(){this.props.autoScroll&&this.scrollIntoCenter(!0)},t.prototype.render=function(){var e=this,t={},n=this.props.selectedIdx,r=this.cachedSelectedItemIdx;return this.cachedChildrenSrc&&this.cachedChildrenSrc===this.props.children?r!==n&&this.cachedChildren&&this.props.children&&(void 0!==r&&(this.cachedChildren[r]=this.renderGalleryItem(this.props.children[r],r,t)),void 0!==n&&(this.cachedChildren[n]=this.renderGalleryItem(this.props.children[n],n,t)),this.cachedSelectedItemIdx=this.props.selectedIdx):(this.cachedChildrenSrc=this.props.children,this.cachedSelectedItemIdx=n,this.cachedChildren=this.props.children?this.props.children.map(function(n,r){return e.renderGalleryItem(n,r,t)}):[]),o.createElement(c.a,{className:h(this.props.className),style:{height:this.props.height,width:this.props.width},forwardRef:this.rootNode,logNode:f},o.createElement("div",{className:p,onScroll:this.props.onScroll,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,ref:this.container},this.cachedChildren))},t.prototype.scrollItems=function(e){var t=this.selectedNode.current||this.firstNode.current;if(this.container.current&&t&&e){for(var n=t,r=n.offsetTop,o=Math.floor(e),i=e>0?1:-1,a=n;0!==o&&n;)(n=o>0?n.nextElementSibling:n.previousElementSibling)&&(a=n),o-=i;r=a.offsetTop-r,this.animateScrollBy(r)}},t.prototype.scrollIntoCenter=function(e){if(void 0===e&&(e=!1),this.container.current&&this.selectedNode.current){var t=this.container.current,n=this.selectedNode.current,r=t.offsetHeight/2,o=n.offsetTop-r;e?this.container.current.scrollTop=o:this.animateScrollTo(o)}},t.prototype.getScrollPosition=function(){var e=this.container.current;if(e)return{scrollWidth:e.scrollHeight,offsetWidth:e.offsetHeight,totalWidth:e.scrollHeight-e.offsetHeight,rightEdgeOffset:e.scrollHeight-1.5*e.offsetHeight,currentPosition:e.scrollTop}},t.prototype.getNode=function(){return this.rootNode},t.prototype.getContainerNode=function(){return this.container},t.prototype.animateScrollBy=function(e){var t;this.container.current&&(t=void 0!==this.scrollingTarget?this.scrollingTarget:this.container.current.scrollTop,this.animateScrollTo(t+e))},t.prototype.animateScrollTo=function(e){var t=this;this.animationStop&&this.animationStop();var n=this.container.current;if(n){this.scrollingTarget=e;var r=e-n.scrollTop;this.animationStop=Object(i.animate)(200,function(e){void 0!==t.scrollingTarget&&(n.scrollTop=t.scrollingTarget-r*(1-e))},i.linear,this.onAnimationEnd)}},t.prototype.onAnimationEnd=function(){this.animationStop=void 0,this.scrollingTarget=void 0},t.prototype.onMouseDown=function(e){this.container.current&&(this.wasDragging=!1,this.dragging=!0,this.dragStartMouseX=e.screenX,this.dragStartMouseY=e.screenY,this.dragStartGalleryX=this.container.current.scrollTop)},t.prototype.onMouseUp=function(){this.wasDragging&&(this.wasDraggingTime=Date.now()),this.dragging=!1},t.prototype.onMouseMove=function(e){if(this.dragging&&e.buttons&&this.container.current){var t=this.dragStartMouseY-e.screenY;if(this.wasDragging||!(Math.abs(t)<=3)){this.wasDragging=!0;var n=this.dragStartGalleryX+t;this.container.current.scrollTop=n}}else this.dragging=!1},t.prototype.onItemClickHandler=function(e){var t=Date.now()-this.wasDraggingTime<10;this.wasDragging=!1,this.props.onClick&&!t&&(this.wasClicked=!0,this.props.onClick(e))},t.prototype.getItemKey=function(e,t,n){for(var r,o=(null===(r=e)||void 0===r?void 0:r.key)||t;n[o];)o+="#"+t;return n[o]=!0,o},t.prototype.getItemRef=function(e){return this.isItemSelected(e)?this.selectedNode:0===e?this.firstNode:void 0},t.prototype.isItemSelected=function(e){return e===this.props.selectedIdx},t.prototype.renderGalleryItem=function(e,t,n){var r=this.isItemSelected(t),i={key:this.getItemKey(e,t,n),idx:t,selected:r,forwardRef:this.getItemRef(t),width:this.props.thumbSize,onClick:this.onItemClickHandler},a="function"===typeof e?e(i):e;return this.props.disableItemWrap?a:o.createElement(s.a,d({},i,{image:a}))},t}(o.Component),v=function(e){return o.createElement(m,d({},e,{ref:e.forwardRef}))}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(4),o=n(0),i=function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)(function(){n.current?n.current=!1:e()},Object(r.__spread)([e],t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(13),i={value:0,id:0},a=Object(r.createContext)(i);function c(e){void 0===e&&(e="xuniq");var t=Object(r.useContext)(a),n=Object(r.useMemo)(function(){return e+"-"+t.id+"-"+ ++t.value},[]);return console.assert(Object(o.a)()||t!==i,"При серверном рендеринге необходимо обернуть приложение в <SSRProvider> для синхронизации id между сервером и клиентом."),n}},,function(e,t,n){},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var r=n(4),o=n(0),i=n.n(o),a=i.a.createContext({cache:{},changeStatus:function(){return{}}}),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={cache:{}},n.changeStatus=n.changeStatus.bind(n),n}return Object(r.__extends)(t,e),t.prototype.changeStatus=function(e,t){var n=this.state.cache;n[e]=Object(r.__assign)(Object(r.__assign)({},n[e]),t),this.setState({cache:n})},t.prototype.render=function(){var e={cache:this.state.cache,changeStatus:this.changeStatus};return i.a.createElement(a.Provider,{value:e},this.props.children)},t}(i.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(769);var r=function(){function e(){this.history=document.createElement("div"),this.cachableImg=new Image,this.history.className="image_history_cache",document.body.appendChild(this.history)}return e.prototype.addToHistory=function(e){var t=document.createElement("img");t.src=e,this.history.appendChild(t)},e.prototype.isUrlCachable=function(e){this.cachableImg.src=e;var t=this.cachableImg.complete;return this.cachableImg.src="",t},e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},function(e,t,n){
/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,i={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)i[n[0][r]]=e[r];return i}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e){return new Promise(function(n,o){var i=function(){this.off("change",i),n()}.bind(this);this.on("change",i);var a=(e=e||t.documentElement)[r.requestFullscreen]();a instanceof Promise&&a.then(i).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o);var i=t[r.exitFullscreen]();i instanceof Promise&&i.then(o).catch(n)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=o[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=o[e];r&&t.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=Object(r.cn)("Favorites")},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(354),a=n(7),c=n(131),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},l="openSimilarShown";var d=function(e){return function(t){var n=u(t,[]),i=n.isSimilarUnauthPopupEnabled,d=n.showUnauthPopup,f=n.tld,p=void 0===f?"ru":f,h=Object(r.useCallback)(function(e){var t="images_viewer_similar";i&&d&&d(e,l,{loginUrl:Object(c.a)(p,t),registrationUrl:Object(c.b)(p,t)})},[i,d,p]),m=Object(r.useCallback)(function(e){e.preventDefault(),Object(a.a)().emit("location:change",{url:e.currentTarget.href})},[]);return i&&d?o.a.createElement(e,s({},n,{onClick:h})):o.a.createElement(e,s({},n,{onClick:m}))}}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return st});var r,o,i=n(0),a=n.n(i),c=n(5),s=n.n(c),u=n(6),l=n(1),d=n(47),f=(n(859),Object(l.createClassNameModifier)(Object(d.b)(),{type:"side-left"})),p=n(30),h=n(3),m=n(528),v=n(529),b=n(420),g=n(714),y=n(49),O=n(129),w=function(){function e(){this.readyCallback=y.a,this.failCallback=y.a,this.scriptFailed=!1,O.a&&(this.isLoaded()||this.isScriptExists()||this.loadScript())}return e.prototype.whenScriptReady=function(e){void 0===e&&(e=y.a),this.readyCallback=e,this.isLoaded()&&this.runReadyCallback()},e.prototype.whenScriptFail=function(e){void 0===e&&(e=y.a),this.failCallback=e,this.scriptFailed&&this.runFailCallback()},e.prototype.isLoaded=function(){return Boolean(this.getYaShare())},e.prototype.isScriptExists=function(){return Boolean(document.getElementById("ya-share-script"))},e.prototype.getYaShare=function(){var e;if(O.a)return null===(e=window.Ya)||void 0===e?void 0:e.share2},e.prototype.runReadyCallback=function(){var e=this,t=this.getYaShare();t&&setTimeout(function(){return e.readyCallback(t)})},e.prototype.runFailCallback=function(){var e=this;setTimeout(function(){return e.failCallback()})},e.prototype.loadScript=function(){var e=this,t=document.createElement("script");t.id="ya-share-script",t.src="//yastatic.net/share2/share.js",t.async=!0,t.crossOrigin="",t.onload=function(){return e.waitForInit()},t.onerror=function(){return e.onLoadingFail()},document.body.appendChild(t)},e.prototype.onLoadingFail=function(){throw this.scriptFailed=!0,this.runFailCallback(),new Error("failed to load ya-share2")},e.prototype.waitForInit=function(){var e=this,t=0,n=setInterval(function(){10===++t?(clearInterval(n),e.runFailCallback()):e.isLoaded()&&(clearInterval(n),e.runReadyCallback())},50)},e}(),C=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},j=0,E=function(e){var t=e.url,n=e.direction,o=e.services,a=e.onShare,c=e.lang,s=void 0===c?"ru":c,u=e.onLoadingStart,l=void 0===u?y.a:u,d=e.onLoadingEnd,f=void 0===d?y.a:d,p=i.useRef(),h=function(){var e=C(i.useState(),2),t=e[0],n=e[1];return i.useEffect(function(){n(function(e){return"ya-share2-instance-"+e}(j++))},[]),t}();return i.useEffect(function(){r||(r=new w)},[]),i.useEffect(function(){return h&&!p.current&&(l(),r.whenScriptReady(function(e){f(),p.current=e(h,{services:o,hooks:{onshare:a},content:{url:t}})}),r.whenScriptFail(function(){f()})),function(){p.current&&(p.current.destroy(),p.current=void 0)}},[a,l,f,o,t,h]),i.useEffect(function(){p.current&&p.current.updateContent({url:t})},[t]),h?i.createElement("div",{id:h,"data-services":o,"data-size":"s","data-lang":s,"data-direction":n}):null},S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},k=Object(l.compose)(m.a,g.a,v.a)(b.a),_=function(e){return i.createElement(k,S({view:"default",target:"anchor",className:e.className,onClose:e.onClose},e.popup),e.header,i.createElement(E,{url:e.link,onShare:e.onShare,onLoadingStart:e.onLoadingStart,onLoadingEnd:e.onLoadingEnd,services:e.services||"vkontakte,odnoklassniki,telegram,facebook,twitter",direction:"vertical",lang:e.lang}),e.footer)},P=n(34),I=n(46),x=n(28),R=n(2),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(e){function t(t){var n,r=this.constructor.prototype;return n=e.call(this,t)||this,Object.setPrototypeOf(n,r),n}return N(t,e),t}(Error),T=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: пользователь неавторизован")||this;return n.status=401,n.stack=t.stack,n}return N(t,e),t}(M),L=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: неизвестная ошибка")||this;return t&&Object.assign(n,t),n}return N(t,e),t}(M),D=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: не хватает места")||this;return n.status=507,n.stack=t.stack,n}return N(t,e),t}(M),B="ru",A={info:"/",resources:"/resources/",operations:"/operations/",upload:"/resources/upload/"},F={POST:function(e,t,n){return Object(p.sendRequest)(e,Object.assign({method:"post"},t),n,t&&t.body||null)},PUT:p.put,DELETE:p.del,PATCH:function(e,t,n){return Object(p.sendRequest)(e,Object.assign({method:"patch"},t),n,t&&t.body)}},U=function(){function e(e){void 0===e&&(e={}),this.tld=e.tld||B,this.baseUrl="https://cloud-api.yandex."+this.tld+"/images/v1/disk",this.endpoints=e.endpoints||A}return e.prototype.info=function(){return this.callMethod({url:this.getMethodEndpoint("info"),method:"GET",format:"json"})},e.prototype.status=function(e){return this.callMethod({url:e,method:"GET",format:"json"})},e.prototype.setMeta=function(e,t){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PATCH",format:"json",headers:{"content-type":"application/json"},queryParams:{path:e},body:JSON.stringify({custom_properties:t})})},e.prototype.isPathExists=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"GET",format:"json",queryParams:{path:e,limit:1}})},e.prototype.mkdir=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PUT",format:"json",queryParams:{path:e}})},e.prototype.upload=function(e,t){return this.callMethod({url:this.getMethodEndpoint("upload"),method:"POST",format:"json",queryParams:{url:t,path:e,disable_redirects:"true"}})},e.prototype.callMethod=function(e){var t=e.method,n=e.url,r="GET"===t?p.get:F[t];return new Promise(function(t,o){r(n,e,{successCallback:function(e){return t(e)},failureCallback:function(e,t,n){switch(t.status){case 401:return o(new T(n));case 507:return o(new D(n));default:return o(new L({response:n,status:t.status}))}}})})},e.prototype.getMethodEndpoint=function(e){var t=this.endpoints[e];return this.baseUrl+t},e}(),z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.active="active",e.loading="loading",e.uploaded="uploaded",e.failed="failed"}(o||(o={}));var q={},W=function(e){function t(t){var n=e.call(this,t)||this;return n.defaults=H(H({},n.props),{maxPollingRequests:15,pollingTimeout:300,fileName:"Image.jpg",dirName:"Images"}),n.retriesCount={},n.mounted=!0,n.api=new U(t),n.state={status:q[t.fileUrl]||o.active},n}return z(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.upload=function(){var e=this,t=this.props.fileUrl,n=this.props.dirName||this.defaults.dirName,r=n+"/"+(this.props.fileName||this.getFileName(t));return!this.props.loggedIn&&this.props.requestAuthorization?this.props.requestAuthorization():(this.setState({status:o.loading,error:void 0}),this.ensureDirectory(n).then(function(){return e.api.upload(r,t)}).then(function(t){return e.waitForUpload(t.href)}).then(function(){e.props.fileMeta&&e.setMeta(r,e.props.fileMeta)}).then(function(){e.mounted&&(q[e.props.fileUrl]=o.uploaded,e.setState({status:o.uploaded,error:void 0}),e.props.onSuccess&&e.props.onSuccess())}).catch(function(t){e.mounted&&e.setState({status:o.failed,error:t})}))},t.prototype.ensureDirectory=function(e){var t=this;return this.api.isPathExists(e).catch(function(n){if(!n||404!==n.status)throw n;return t.api.mkdir(e)})},t.prototype.setMeta=function(e,t){return this.api.setMeta(e,t)},t.prototype.waitForUpload=function(e){var t=this;return new Promise(function(n,r){t.checkOperationStatus(e).then(function(o){t.mounted||r(new L),"pending"===o.status&&setTimeout(function(){return n(t.waitForUpload(e))},t.defaults.pollingTimeout),"failed"===o.status&&r(o.error),"success"===o.status&&n()})})},t.prototype.checkOperationStatus=function(e){var t=this;return this.api.status(e).then(function(e){return null==e||"failed"===e.status?{status:"failed",error:new L}:"success"===e.status?{status:"success"}:{status:"pending"}}).catch(function(n){var r=null==t.retriesCount[e]?t.defaults.maxPollingRequests:t.retriesCount[e];return 0!==r&&n instanceof L?(t.retriesCount[e]=r-1,{status:"pending"}):{status:"failed",error:n}})},t.prototype.getFileName=function(e){var t=e.substring(e.lastIndexOf("/")+1,e.length),n=t.indexOf("#"),r=t.indexOf("?");-1!==r?t=t.substring(0,r):-1!==n&&(t=t.substring(0,n));try{t=decodeURIComponent(t)}catch(e){}return t.length>250&&(t=t.substr(0,250)),(t=t.replace(/(\*|\||\\|:|"|<|>)/gi,"-"))||this.defaults.fileName},t.prototype.render=function(){return this.props.children({fileName:this.props.fileName||this.getFileName(this.props.fileUrl),status:this.state.status,uploaded:this.state.status===o.uploaded,loading:this.state.status===o.loading,failed:this.state.status===o.failed,error:this.state.error,upload:this.upload.bind(this)})},t}(i.Component),V=Object(h.cn)("MMShareDisk"),G=(n(865),Object(u.withBaobab)({name:"MMShareDisk",events:{onSuccess:Object(u.logClick)(function(e){return e.props.counter})}})(function(e){return i.createElement(R.ComponentRegistryConsumer,{id:V()},function(t){return i.createElement(W,{key:e.fileUrl,tld:e.tld,fileUrl:e.fileUrl,dirName:e.dirName,fileMeta:e.fileMeta,loggedIn:e.loggedIn,requestAuthorization:e.requestAuthorization,onSuccess:e.onSuccess},function(n){var r=n.status,o=function(e,t){return t[V("Presenter",{status:e})]}(r,t);return i.createElement(o,{status:n.status,loading:n.loading,uploaded:n.uploaded,failed:n.failed,error:n.error,upload:n.upload,fileName:n.fileName,fileUrl:e.fileUrl,tld:e.tld||"ru",requestAuthorization:e.requestAuthorization,errorTooltipTimeout:e.errorTooltipTimeout||5e3,popupScope:e.popupScope,className:V("Presenter",{status:r}),counter:e.counter})})})})),Y=(n(861),Object(l.createClassNameModifier)(Object(d.b)(),{type:"disk"})),K=(n(862),Object(h.cn)("Share")),X=Object(u.withBaobab)({name:"ShareItem",events:{onClick:Object(u.logClick)(function(e){return e.counter})}})(function(e){var t=e.icon,n=e.title,r=e.onClick,o=e.className,a=void 0===o?"":o;return i.createElement("li",{className:K("Item",{more:!0},["ya-share2__item ya-share2__container ya-share2__container_size_s",a]),onClick:r},i.createElement("span",{className:"ya-share2__badge"},i.createElement("span",{className:"ya-share2__icon"},t)),i.createElement("span",{className:"ya-share2__title"},n))}),Q=n(212),J=s()(Q),Z=Y(d.a),$=i.createElement(Z,{className:V("Icon",{type:"disk"}),type:"disk"}),ee=n(106),te=(n(863),s()(Q)),ne=i.createElement(function(){return i.createElement(ee.b,{className:V("Spinner")})},null),re=n(919),oe=n(1083),ie=n(1129),ae=n(531),ce=n(611),se=n(922),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},le=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},de=s()(Q),fe=Object(l.compose)(m.a,re.a,v.a,g.a)(b.a),pe=Object(l.compose)(Object(l.composeU)(oe.a,ie.a),ae.a,ce.a)(se.a),he=function(e){return function(t){var n=t.props,r=n.counters&&n.counters.tuneDiskPopup;if(r)return Object(x.b)(r[e])}},me=Object(l.compose)(I.d,Object(u.withBaobab)({name:"MMShareDiskTuneDisk",events:{onLinkClick:Object(u.logClick)(he("click")),onCloseClick:Object(u.logClick)(he("close")),onShow:Object(u.logTech)("shown",he("shown"))}}))(function(e){var t=e.onCloseClick,n=e.onLinkClick,r=e.onShow,o=e.tld,a=de("Нет места на Яндекс.Диске",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при нехватке места на Яндекс.Диске"}),c=function(e){return"https://disk.yandex."+e+"/tuning"}(o);return i.useEffect(function(){r&&r()},[r]),i.createElement("div",{className:V("TooltipContent")},i.createElement("div",{className:V("TooltipDescription")},a),i.createElement("div",{className:V("TooltipCloseIcon"),onClick:t}),i.createElement("div",{className:V("TooltipButtons")},i.createElement(pe,{className:V("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",type:"link",target:"_blank",onClick:n,url:c},de("Купить еще место",{context:'Кнопка "купить еще место" при нехватке места для сохранения картинки на Яндекс.Диск'}))))}),ve=function(e){var t=de("Не получается, попробуйте позже или сохраните картинку на компьютер",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при ошибке"}),n=i.useCallback(function(){!function(e,t){var n=e;-1!==n.indexOf("?")?n+="&download="+t:n+="?download="+t;var r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),r.setAttribute("target","_blank"),document.body.appendChild(r),setTimeout(function(){r.click(),document.body.removeChild(r)},0)}(e.fileUrl,e.fileName)},[e.fileName,e.fileUrl]);return i.createElement("div",{className:V("TooltipContent")},i.createElement("div",{className:V("TooltipDescription")},t),i.createElement("div",{className:V("TooltipCloseIcon"),onClick:e.onCloseClick}),i.createElement("div",{className:V("TooltipButtons")},i.createElement(pe,{className:V("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",onClick:n},de("Сохранить",{context:'Кнопка "сохранить картинку на компьютер" при неудачном сохранении на Яндекс.Диск'}))))},be=(n(864),Object(l.createClassNameModifier)(Object(d.b)(),{type:"check"})),ge=s()(Q),ye=be(d.a),Oe=i.createElement(ye,{className:V("Icon",{type:"check"}),type:"check"}),we=new R.Registry({id:V()});we.set(V("Presenter",{status:o.active}),function(e){var t=e.upload,n=i.useCallback(function(){setTimeout(t,0)},[t]);return i.createElement(X,{className:e.className,onClick:n,icon:$,title:J("Сохранить на диск",{context:"Кнопка для сохранения картинки на Яндекс.Диск"})})}),we.set(V("Presenter",{status:o.loading}),function(e){return i.createElement(X,{className:e.className,icon:ne,title:te("Сохраняем картинку",{context:"Кнопка для сохранения картинки на Яндекс.Диск во время загрузки"})})}),we.set(V("Presenter",{status:o.failed}),function(e){var t=i.createRef(),n=le(i.useState(!0),2),r=n[0],o=n[1];!function(e,t,n,r){i.useEffect(function(){e();var r=setTimeout(t,n);return function(){t(),clearTimeout(r)}},[e,t,n].concat(r))}(i.useCallback(function(){return o(!0)},[o]),i.useCallback(function(){return o(!1)},[o]),e.errorTooltipTimeout||5e3,[]);var a=e.error,c=e.requestAuthorization;i.useEffect(function(){a instanceof T&&c&&c()},[a,c]);var s=i.createElement(ve,{tld:e.tld,onCloseClick:function(){return o(!1)},fileUrl:e.fileUrl,fileName:e.fileName});return a instanceof D&&(s=i.createElement(me,{tld:e.tld,onCloseClick:function(){return o(!1)}})),i.createElement(R.ComponentRegistryConsumer,{id:V()},function(n){var o=n[V("Presenter",{status:"active"})];return i.createElement(i.Fragment,null,i.createElement("div",{ref:t},i.createElement(o,ue({},e))),s&&i.createElement(fe,{view:"default",target:"anchor",className:V("Tooltip",{theme:"dark"}),keepMounted:!1,hasTail:!0,visible:r,anchor:t,zIndexGroupLevel:20,mainOffset:0,scope:e.popupScope,directions:["bottom-center","top-center"]},s))})}),we.set(V("Presenter",{status:o.uploaded}),function(e){return i.createElement(X,{className:e.className,icon:Oe,title:ge("Картинка сохранена",{context:"Кнопка для сохранения картинки на Яндекс.Диск после успешной загрузки"})})});var Ce,je=Object(R.withRegistry)(we)(G),Ee=n(253),Se=n(572),ke=(n(867),Object(l.createClassNameModifier)(Object(d.b)(),{type:"chain"})),_e=n(1087),Pe=n(1263),Ie=n(1225),xe=n(1088),Re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=Object(l.compose)(_e.a,Pe.a,Ie.a)(xe.a),Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=i.createRef(),t}return Re(t,e),t.prototype.componentDidMount=function(){this.selectAll()},t.prototype.componentDidUpdate=function(){this.selectAll()},t.prototype.render=function(){return i.createElement(Ne,{view:"default",theme:"normal",size:"m",value:this.props.value,controlRef:this.inputRef})},t.prototype.selectAll=function(){var e=this.inputRef.current;setTimeout(function(){return e&&e.select()})},t}(i.Component),Te=n(913),Le=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},De=ke(d.a),Be=be(d.a),Ae=a.a.createElement(De,{type:"chain"}),Fe=a.a.createElement(Be,{type:"check"}),Ue=s()(Te),ze=function(e){var t=e.onClick,n=e.counter,r=e.logNode;return a.a.createElement(X,{logNode:r,counter:n,icon:Ae,title:Ue("Скопировать ссылку",{context:"Кнопка для коппирования ссылки на картинку https://nda.ya.ru/3UYbpX"}),onClick:t})};!function(e){e.none="none",e.copied="copied",e.fallback="fallback"}(Ce||(Ce={}));var He=function(e){var t=e.url,n=e.active,r=e.counter,o=e.logNode,c=Le(Object(i.useState)(Ce.none),2),s=c[0],u=c[1],l=Object(Ee.a)(t),d=Object(i.useCallback)(function(){u(Ce.none)},[]);Object(i.useEffect)(d,[t,d]),Object(i.useEffect)(function(){s!==Ce.copied||n||d()},[s,n,d]);var f=Object(i.useCallback)(function(){var e=Object(Se.copyToBuffer)(l.current);u(e?Ce.copied:Ce.fallback)},[l]);switch(s){case Ce.fallback:return a.a.createElement(Me,{value:t});case Ce.copied:return a.a.createElement(X,{icon:Fe,title:Ue("Ссылка скопирована",{context:"Надпись оповещающая о успешном копировании ссылки https://nda.ya.ru/3UYbot"})});default:return a.a.createElement(ze,{onClick:f,logNode:o,counter:r})}},qe=(n(866),function(){return(qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),We=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ve=Object(h.cn)("MMSharePopup");var Ge=Object(P.e)(function(e){return qe({lang:e.globalContext.lang},e.config.shareConfig)})(function(e){var t=e.lang,n=e.services,r=e.url,o=e.visible,c=e.originalUrl,s=e.loggedIn,u=e.onShare,l=e.onLoadingStart,d=e.onLoadingEnd,f=e.onClose,h=e.requestAuthorization,m=e.isDiskShareEnabled,v=e.diskShareDirectoryName,b=e.snippetUrl,g=e.tld,y=e.anchor,O=e.zIndex,w=e.zIndexGroupLevel,C=e.popupScope,j=e.popupDirections,E=e.popupOffset,S=Object(I.b)().shareClick,k={page_url:b,yaimages_search_url:"",yaimages_search_request:""},P=We(Object(i.useState)(null),2),R=P[0],N=P[1];return Object(i.useEffect)(function(){o&&(N(null),function(e,t,n){var r="//yandex."+t+"/images-apphost/url-shorted?url="+encodeURIComponent(e);Object(p.get)(r,{format:"text"},{successCallback:function(t){"string"===typeof t&&n(e,t)}})}(r,g||"ru",function(e,t){r===e&&N(t)}))},[r,o,g]),a.a.createElement(_,{className:Ve(),link:R||r,popup:{anchor:y,visible:o,mainOffset:E,directions:j,zIndex:O,zIndexGroupLevel:w,scope:C},services:n,onShare:u,onLoadingStart:l,onLoadingEnd:d,onClose:f,lang:t,footer:a.a.createElement(a.a.Fragment,null,a.a.createElement(He,{url:R||r,active:o,counter:S&&Object(x.b)(S,{name:"copylink"}),logNode:S&&Object(x.a)(S)}),m&&a.a.createElement("hr",{className:"MMShare-Spacer"}),m&&c&&a.a.createElement(je,{tld:g,fileUrl:c,loggedIn:s,dirName:v,fileMeta:k,requestAuthorization:h,popupScope:C,counter:S&&Object(x.b)(S,{name:"disk"})}))})}),Ye=Object(u.withBaobab)({name:"share"})(Ge),Ke=n(54),Xe=n(50),Qe=(n(860),function(){return(Qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)});function Je(e){return i.createElement(ee.b,Qe({size:ee.a.xs},e))}var Ze,$e,et=n(22),tt=n(166),nt=(n(858),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),rt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ot=Object(l.compose)(f)(d.a),it=s()(tt),at=((Ze={})[Xe.b.twoLines]=["bottom-center"],Ze[Xe.b.compact]=["bottom-right"],Ze),ct=(($e={})[Xe.b.twoLines]=7,$e[Xe.b.compact]=9,$e),st=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=i.createRef(),n.isShareReady=!1,n.state={popupVisible:!1,isLoading:!1},n.toggleShare=n.toggleShare.bind(n),n.onLoadingStart=n.onLoadingStart.bind(n),n.onLoadingEnd=n.onLoadingEnd.bind(n),n.closeShare=n.closeShare.bind(n),n}return nt(t,e),t.prototype.toggleShare=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.onLoadingStart=function(){this.isShareReady||this.setState({isLoading:!0})},t.prototype.onLoadingEnd=function(){this.isShareReady||(this.isShareReady=!0,this.setState({isLoading:!1}))},t.prototype.closeShare=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e,t){var n,r,o,i;e.link!==this.props.link&&this.closeShare(),!t.popupVisible&&this.state.popupVisible&&(null===(r=null===(n=this.props.popupScrollArea)||void 0===n?void 0:n.current)||void 0===r||r.addEventListener("scroll",this.closeShare)),t.popupVisible&&!this.state.popupVisible&&(null===(i=null===(o=this.props.popupScrollArea)||void 0===o?void 0:o.current)||void 0===i||i.removeEventListener("scroll",this.closeShare))},t.prototype.render=function(){var e=this.props,t=e.link,n=e.shareClick,r=this.state.isLoading?i.createElement(Je,{className:Object(et.a)("ShareSpinner")}):i.createElement(ot,{type:"side-left"});return i.createElement(i.Fragment,null,i.createElement(Ke.b,{className:Object(et.a)("Share"),text:it("Отправить",{context:"Кнопка в просмотрщике картинки, позволяющая поделиться ссылкой на текущую картинку, то есть отправить информацию о ней другим пользователям"}),icon:r,onClick:this.toggleShare,logNode:{name:"share-button"},forwardRef:this.popupTarget}),i.createElement(Ye,{url:t,tld:this.props.tld,originalUrl:this.props.originalUrl,loggedIn:this.props.loggedIn,snippetUrl:this.props.snippetUrl,anchor:this.popupTarget,logNode:{events:{onShare:Object(u.logTech)("share",function(e,r){var o=rt(r,1)[0];return Object(x.b)(n,{name:o},void 0,{href:t})})}},zIndexGroupLevel:20,zIndex:20,visible:this.state.popupVisible,onClose:this.closeShare,onLoadingStart:this.onLoadingStart,onLoadingEnd:this.onLoadingEnd,isDiskShareEnabled:this.props.isDiskShareEnabled,diskShareDirectoryName:this.props.diskShareDirectoryName,requestAuthorization:this.props.requestAuthorization,popupScope:this.props.popupScope,popupDirections:at[this.props.view],popupOffset:ct[this.props.view]}))},t}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return D});var r=n(0),o=n(1),i=n(5),a=n.n(i),c=n(6),s=n(47),u=(n(851),Object(o.createClassNameModifier)(Object(s.b)(),{type:"download"})),l=n(54),d=n(189),f=n(166),p=n(528),h=n(529),m=n(420),v=n(714),b=(n(853),Object(o.createClassNameModifier)(Object(s.b)(),{type:"more-sizes"})),g=n(28),y=n(8),O=n(22),w=(n(852),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),C=function(){return(C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},E=b(s.a),S=Object(o.compose)(p.a,v.a,h.a,function(e){return function(t){var n=t.contentRef,o=t.targetRef,i=j(t,["contentRef","targetRef"]);return r.useEffect(function(){n&&"object"===typeof n&&n.current&&"function"===typeof o&&o(n.current)},[n,o]),r.createElement(e,C({},i))}})(m.a),k=Object(O.a)("ImageSizesPopup"),_=Object(O.a)("ImageSizesList"),P=Object(c.withBaobab)({name:"ImageSizesListItem",events:{onClick:Object(c.logClick)(function(e){var t=e.props,n=t.idx,r=t.clickCounter,o=t.url;return r?Object(g.b)(r,{p:n+1},{path:Object(y.b)(r)+"/p"+(n+1)},{href:o}):void 0})}})(function(e){var t=e.onClick,n=e.onSizeClick,o=e.url,i=r.useCallback(function(e){n?n(e,o,t):t&&t(e)},[n,t,o]);return r.createElement("li",null,r.createElement("a",{className:Object(O.a)("ImageSizesListItem"),href:e.url,target:"_blank",rel:"noopener",onClick:i,onContextMenuCapture:i},e.children))}),I=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=r.createRef(),n.popupContentRef=r.createRef(),n.state={popupVisible:!1},n.togglePopup=n.togglePopup.bind(n),n.closePopup=n.closePopup.bind(n),n}return w(t,e),t.prototype.openPopup=function(){this.setState({popupVisible:!0})},t.prototype.closePopup=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e,t){var n,r,o,i;e.link!==this.props.link&&this.closePopup(),!t.popupVisible&&this.state.popupVisible&&(null===(r=null===(n=this.props.popupScrollArea)||void 0===n?void 0:n.current)||void 0===r||r.addEventListener("scroll",this.closePopup)),t.popupVisible&&!this.state.popupVisible&&(null===(i=null===(o=this.props.popupScrollArea)||void 0===o?void 0:o.current)||void 0===i||i.removeEventListener("scroll",this.closePopup))},t.prototype.render=function(){return r.createElement(r.Fragment,null,r.createElement(l.b,{className:Object(O.a)("ImageSizes",{theme:this.props.theme||"primary"}),text:this.props.dups[0].text,rightIcon:r.createElement(E,{type:"more-sizes"}),onClick:this.togglePopup,forwardRef:this.popupTarget,logNode:{name:"other"}}),r.createElement(S,{className:k,hasTail:!0,secondaryOffset:15,view:"default",target:"anchor",onClose:this.closePopup,anchor:this.popupTarget,visible:this.state.popupVisible,zIndexGroupLevel:20,scope:this.props.popupScope,innerRef:this.popupContentRef,contentRef:this.popupContentRef},r.createElement("ul",{className:_},this.renderDups())))},t.prototype.togglePopup=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.renderDups=function(){var e=this,t=this.props.dups;if(t){var n=this.props.otherSizeCounter?void 0:{events:{}};return t.slice(1).map(function(t,o){var i=t.url,a=t.text;return r.createElement(P,{key:i,url:i,clickCounter:e.props.otherSizeCounter,logNode:C({name:"size-"+o,attrs:e.props.otherSizeLogNode&&e.props.otherSizeLogNode.attrs},n),onSizeClick:e.props.onSizeClick,idx:o},a)})}},t}(r.Component),x=Object(c.withBaobab)({name:Object(O.a)("ImageSizes")})(I),R=n(50),N=(n(850),a()(f)),M=Object(d.a)(l.b),T=Object(o.compose)(u)(s.a),L=Object(O.a)("OpenImageSizes"),D=Object(c.withBaobab)({name:"open-image"})(function(e){var t=e.url,n=e.dups,o=e.link,i=e.downloadCounter,a=e.downloadLogNode,s=e.otherSizeCounter,u=e.otherSizeLogNode,d=e.popupScope,f=e.popupScrollArea,p=e.view,h=e.isOpenImageUnauthPopupEnabled,m=e.onOpenButtonClick,v=e.onSizeClick,b=e.theme,g=void 0===b?"primary":b,y=p===R.b.twoLines&&n.length>1,w=r.useMemo(function(){return Object(c.logClick)(i)},[i]),C=r.useCallback(function(e){m&&m(e,t,w)},[w,m,t]),j=r.useMemo(function(){return h?{name:"button-with-unauthpopup"}:{name:"button",attrs:a&&a.attrs,events:{onClick:w,onContextMenuCapture:w}}},[h,w,a]);return r.createElement("div",{className:L},r.createElement(M,{className:Object(O.a)("OpenImage",{isOtherSizesEnabled:y,theme:g}),text:N("Открыть",{context:'Кнопка "Открыть" картинку'}),rightText:n&&n[0]&&n[0].text,url:h?"#":t,icon:r.createElement(T,{type:"download"}),type:l.a.link,logNode:j,onClick:h?C:void 0}),y&&r.createElement(x,{logNode:h?void 0:{name:"sizes"},dups:n,link:o,otherSizeCounter:s,otherSizeLogNode:u,popupScope:d,popupScrollArea:f,onSizeClick:v,theme:g}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(0),o=n(5),i=n.n(o),a=n(30),c=n(6),s=n(1),u=n(47),l=(n(855),Object(s.createClassNameModifier)(Object(u.b)(),{type:"similar-search"})),d=n(54),f=n(189),p=n(50),h=n(22),m=n(166),v=(n(854),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),b=i()(m),g=Object(f.a)(d.b),y=l(u.a),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.onLog,n=e.onClickCounter,o=e.onClickLogNode,i=e.view,a=e.isSimilarUnauthPopupEnabled,s=e.onClick,u=e.experiments,l=this.getUrl();if(!l)return null;var f=i===p.b.compact||i===p.b.twoLines;return r.createElement(g,{className:Object(h.a)("SearchByImage",{view:i,similarButtonIcon:u&&u.similarButtonIcon}),logNode:a?void 0:{name:"cbir1",attrs:o&&o.attrs,events:{onClick:Object(c.logClick)(n)}},text:f?b("Похожие",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqn"}):b("Другие размеры и похожие",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqn"}),url:a?"#":l,target:this.getTarget(),icon:r.createElement(y,{type:"similar-search"}),type:d.a.link,onLog:a?void 0:t,onClick:s})},t.prototype.getUrl=function(){var e,t,n,r,o,i,c=this.props,s=c.image,u=c.imagesCbirSearchUrl,l=s.extraOrigin||(null===(t=null===(e=s.preview)||void 0===e?void 0:e[0])||void 0===t?void 0:t.origin)||(null===(r=null===(n=s.dups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.origin)||(null===(o=s.preview)||void 0===o?void 0:o[0])||(null===(i=s.dups)||void 0===i?void 0:i[0]),d=(null===l||void 0===l?void 0:l.url)||s.imgHref;if(d)return Object(a.appendQueryString)(u,{url:d,rpt:"imageview"})},t.prototype.getTarget=function(){return this.props.openServiceOnNewTab?"_blank":"_self"},t}(r.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n(1),i=n(528),a=n(919),c=n(529),s=n(420),u=n(714),l=n(3),d=Object(l.cn)("MMViewerButtonTooltip"),f=(n(794),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),p=Object(o.compose)(i.a,a.a,c.a,u.a)(s.a),h=function(e){var t=e.hasTail,n=void 0!==t&&t,o=e.anchor,i=e.mainOffset,a=void 0===i?0:i,c=e.zIndexGroupLevel,s=void 0===c?20:c,u=e.text,l=e.children,h=e.initialVisibility,m=void 0!==h&&h,v=f(r.useState(m),2),b=v[0],g=v[1],y=r.useCallback(function(){return g(!0)},[]),O=r.useCallback(function(){return g(!1)},[]);return r.useEffect(function(){g(m)},[m]),r.createElement(r.Fragment,null,l(y,O),u?r.createElement(p,{theme:"normal",view:"default",target:"anchor",className:d(),directions:e.directions,keepMounted:!1,hasTail:n,visible:b,anchor:o,mainOffset:a,zIndexGroupLevel:s},r.createElement("div",{className:d("Text")},e.text)):null)}},function(e,t,n){n.r(t);var r=n(2882);n.d(t,"tr",function(){return r.a})},function(e,t,n){"use strict";n(113)},function(e,t,n){"use strict";n(29)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n.n(r),i=n(370),a=n.n(i),c=n(205),s=n.n(c),u=n(369),l=n.n(u),d=n(49),f=n(173),p=(n(510),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),h=function(e){var t=e.className,n=e.children,i=e.visibleHeight,c=e.initiallyUnfolded,u=void 0!==c&&c,h=e.withHeightCheckOnFirstRender,m=void 0!==h&&h,v=e.withHeightCheckOnWindowResize,b=void 0!==v&&v,g=e.renderMoreBtn,y=e.onMoreBtnShown,O=void 0===y?d.a:y,w=e.onMoreBtnHidden,C=void 0===w?d.a:w,j=e.onUnfoldedToggle,E=void 0===j?d.a:j,S=e.withShadow,k=void 0!==S&&S,_=e.withBodyClickUnfold,P=void 0!==_&&_,I=e.withWindowScrollOnFold,x=void 0!==I&&I,R=p(Object(r.useState)(!m),2),N=R[0],M=R[1],T=p(l()(u),2),L=T[0],D=T[1],B=Object(r.useRef)(null),A=Object(r.useRef)(null),F=Object(r.useCallback)(function(){if(B.current){var e=Math.ceil(B.current.scrollHeight);M(e>i)}},[i]);a()(function(){m&&setTimeout(function(){return F()})}),Object(r.useEffect)(function(){if(b)return window.addEventListener("resize",F),function(){return window.removeEventListener("resize",F)}},[F,b]),s()(function(){E(L)},[L]),s()(function(){N?O():C()},[N]);var U=Object(r.useCallback)(function(){if(A.current){if(x){var e=A.current.getBoundingClientRect(),t=i-e.height;e.top<0&&t<0&&window.scrollBy(0,t)}D()}},[x,i,D]),z=Object(r.useCallback)(function(e){e.preventDefault(),D(!0)},[D]),H={};return L||(H.maxHeight=i),o.a.createElement("div",{className:Object(f.a)({unfoldable:N,unfolded:L,withShadow:k},[t]),ref:A},o.a.createElement("div",{className:f.c,ref:B,style:H,onClick:P&&N&&!L?z:void 0},n),g&&g({className:f.e,onClick:U,unfolded:L}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(0),o=n.n(r),i=n(29),a=n(5),c=n.n(a),s=n(75),u=n(9),l=n(103),d=n(3),f=n(613),p=c()(f),h=Object(d.cn)("OutOfStockMessage"),m=function(e){var t=e.className;return o.a.createElement("div",{className:h(null,[t])},p("Нет в продаже",{context:"Сообщение об отсутствии товара на Маркете"}))},v=n(181),b=(n(598),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),g=function(e){var t=e.className,n=e.url,a=e.alt,c=e.onThumbError,s=void 0===c?u.a:c,l=b(Object(r.useState)("pending"),2),d=l[0],f=l[1],p=Object(r.useCallback)(function(){f("loaded")},[f]),h=Object(r.useCallback)(function(e){var t=e.target.src;f("error"),s({src:t})},[f,s]);return Object(r.useEffect)(function(){f(n?"pending":"error")},[n]),"error"===d?o.a.createElement("div",{className:Object(i.a)("ThumbError")}):o.a.createElement(o.a.Fragment,null,"pending"===d&&o.a.createElement(v.a,{speed:2,width:64,height:64,viewBox:"0 0 64 64",className:Object(i.a)("ThumbSkeleton")},o.a.createElement("rect",{x:0,y:0,width:64,height:64,rx:8})),o.a.createElement("img",{className:Object(i.a)("Thumb",[t]),"aria-hidden":!0,src:n||"",alt:a,width:"auto",height:"auto",onError:n?h:u.a,onLoad:p}))},y=n(328),O=n(2);function w(){return Object(O.useComponentRegistry)(Object(i.a)())}var C=Object(a.i18nRaw)(y),j=function(e){var t=e.source,n=e.price,r=e.currency,a=w().Price,c=void 0!==n&&r&&o.a.createElement(a,{value:n,currency:r,groupLength:3}),s="market"===t||"market-cpa"===t;return o.a.createElement("div",{className:Object(i.a)("Price")},c&&(s?C("от {value}",{value:c}):c))},E=(n(599),c()(y)),S=function(e){var t,n=e.className,r=e.product,a=e.pos,c=e.onProductClick,d=void 0===c?u.a:c,f=e.onThumbError,p=r.source,h=r.title,v=r.image,b=r.url,y=r.price,O=r.currency,C=r.punycode,S=r.shopDomain,k=Object(l.a)(d,{product:r,pos:a||0}),_=w(),P=_.Link,I=_.MarketLogoIcon,x=S,R=C||S;return"market"===p||"market-cpa"===p?(t=o.a.createElement(I,{className:Object(i.a)("MarketLogo"),type:"market-logo"}),x=E("Яндекс.Маркет")):t=R&&o.a.createElement(s.a,{className:Object(i.a)("Favicon"),favicon:function(e){return"//favicon.yandex.net/favicon/v2/"+encodeURIComponent(e)}(R)}),o.a.createElement("div",{className:Object(i.a)("Content",[n])},o.a.createElement(P,{className:Object(i.a)("ThumbLink"),href:b,target:"_blank",tabIndex:-1},o.a.createElement(g,{url:null===v||void 0===v?void 0:v.url,alt:h,onThumbError:f})),o.a.createElement("div",{className:Object(i.a)("Info")},null!=y&&O&&o.a.createElement(j,{className:Object(i.a)("Price"),price:y,currency:O,source:p}),null==y&&o.a.createElement(m,{className:Object(i.a)("OutOfStockMessage")}),o.a.createElement(P,{className:Object(i.a)("Title"),href:b,target:"_blank",tabIndex:-1},h),S&&o.a.createElement(P,{className:Object(i.a)("ShopDomainLink"),href:b,target:"_blank",tabIndex:-1},t,o.a.createElement("span",{className:Object(i.a)("ShopDomain")},x))),o.a.createElement(P,{className:Object(i.a)("Link"),href:b,target:"_blank",onClick:k}))},k=(n(600),function(e){var t=e.progress;return o.a.createElement("div",{className:Object(i.a)("Skeleton")},o.a.createElement(v.a,{speed:t?2:0,width:240,height:80,viewBox:"0 0 240 80"},o.a.createElement("rect",{x:8,y:8,width:64,height:64,rx:8}),o.a.createElement("rect",{x:84,y:12,width:129,height:16,rx:8}),o.a.createElement("rect",{x:84,y:36,width:55,height:12,rx:8}),o.a.createElement("rect",{x:84,y:56,width:83,height:12,rx:8})))}),_=(n(601),function(e){var t=e.className,n=e.product,r=e.pos,a=e.progress,c=e.onProductClick,s=e.onThumbError;return o.a.createElement("div",{className:Object(i.a)(null,[t])},n&&o.a.createElement(S,{product:n,pos:r,onProductClick:c,onThumbError:s}),!n&&o.a.createElement(k,{progress:a}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n.n(r),i=n(113),a=n(2);function c(){return Object(a.useComponentRegistry)(Object(i.a)())}var s=function(e){for(var t=e.className,n=e.count,r=e.progress,i=c().CommercialProduct,a=[],s=0;s<n;s++)a.push(o.a.createElement(i,{className:t,progress:r,key:s}));return o.a.createElement(o.a.Fragment,null,a)},u=(n(597),function(e){var t=e.className,n=e.productClassName,r=e.progress,a=e.products,u=e.onProductClick,l=e.onThumbError,d=e.skeletonCount,f=void 0===d?3:d,p=a.length>0,h=c().CommercialProduct,m=Object(i.a)("Product",[n]);return o.a.createElement("div",{className:Object(i.a)(null,[t])},!p&&o.a.createElement(s,{className:m,progress:r,count:f}),p&&a.map(function(e,t){return o.a.createElement(h,{className:m,key:t+1,pos:t,product:r?void 0:e,progress:r,onProductClick:u,onThumbError:l})}))})},,function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=a,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!==typeof document){"number"===typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,!0!==i[s]&&(c+="="+i[s].split(";")[0]));return document.cookie=t+"="+n+c}}function a(e,n){if("undefined"!==typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=t(c[0]);if(s=(r.read||r)(s,u)||t(s),n)try{s=JSON.parse(s)}catch(e){}if(o[u]=s,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(e){var t=Object(r.useRef)();return Object(r.useEffect)(function(){t.current=e}),t.current}},function(e,t,n){"use strict";n.r(t);var r=n(366);n.d(t,"usePreviousValue",function(){return r.a})},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e,t){return"boolean"===typeof t?t:!e};t.default=function(e){return r.useReducer(o,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(386).__importDefault(n(542));t.default=function(e){r.default(function(){e()})}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n.n(r),i=n(3),a=n(5),c=n.n(a),s=Object(i.cn)("OneLine"),u=(n(687),function(e){var t=e.className,n=e.children;return o.a.createElement("div",{className:s(null,[t])},n)}),l=n(701),d=(n(686),c()(l)),f=r.memo(function(e){var t=e.minified;return r.createElement(u,{className:Object(i.cn)("MMSchemaOrgDisclaimer")({minified:t})},d("Цена и наличие товара могли измениться",{context:"Дисклеймер о несоответствии информации о товаре. https://nda.ya.ru/t/dtTnE1gK3YY8cW"}))})},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(15),i=Object(r.withBemMod)(Object(o.b)(),{tone:"white"})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(401),Object(r.withBemMod)(Object(o.b)(),{theme:"action"}))},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(17),i=(n(429),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return c}),n.d(t,"__param",function(){return s}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__createBinding",function(){return f}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return m}),n.d(t,"__spread",function(){return v}),n.d(t,"__spreadArrays",function(){return b}),n.d(t,"__spreadArray",function(){return g}),n.d(t,"__await",function(){return y}),n.d(t,"__asyncGenerator",function(){return O}),n.d(t,"__asyncDelegator",function(){return w}),n.d(t,"__asyncValues",function(){return C}),n.d(t,"__makeTemplateObject",function(){return j}),n.d(t,"__importStar",function(){return S}),n.d(t,"__importDefault",function(){return k}),n.d(t,"__classPrivateFieldGet",function(){return _}),n.d(t,"__classPrivateFieldSet",function(){return P});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function c(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function p(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function h(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function b(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r}function g(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function O(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||c(e,t)})})}function c(e,t){try{!function(e){e.value instanceof y?Promise.resolve(e.value.v).then(s,u):l(i[0][2],e)}(o[e](t))}catch(e){l(i[0][3],e)}}function s(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function j(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return E(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(583),o=n(58),i=Object(o.b)(r.a);i.isBaobabNode=!0},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),o=n(17),i=n(272),a=n(273),c=n(274),s=n(275),u=new r.Registry({id:Object(o.b)()});u.set("Control",i.a).set("Box",a.a).set("Icon",c.a).set("Hint",s.a)},,,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(479),Object(r.withBemMod)(Object(o.b)(),{theme:"clear"}))},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(1),a=n(612),c=n(47),s=n(229),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=Object(i.compose)(a.a)(c.a),d=Object(i.withBemMod)(s.c,{type:"market"},function(e){return function(t){var n=Object(r.useCallback)(function(e){var t=e.className;return o.a.createElement(l,{className:t,type:"market-logo"})},[]);return o.a.createElement(e,u({icon:n},t))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(229),a=(n(685),function(e){var t=e.className,n=void 0===t?"":t,r=e.value,a=e.icon,c=e.bold,s=e.children,u=function(e,t){return void 0===t&&(t=","),("string"===typeof e?parseFloat(e):e).toFixed(1).replace(".",t)}(r);return o.a.createElement("div",{className:Object(i.a)(null,[n]),role:"text"},a?a({className:i.b}):null,c?o.a.createElement("b",null,u):u,s)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.cnIcon=void 0;var r=n(4),o=r.__importDefault(n(0)),i=n(3);n(547),t.cnIcon=i.cn("Icon"),t.Icon=function(e){var n=e.direction,i=e.size,a=e.url,c=e.style,s=void 0===c?{}:c,u=e.children,l=e.title,d=e.onClick,f=(e.type,e.glyph,r.__rest(e,["direction","size","url","style","children","title","onClick","type","glyph"])),p=t.cnIcon({direction:n,size:i},[f.className]);return void 0!==a&&(s.backgroundImage="url('"+a+"')"),o.default.createElement("span",r.__assign({},f,{"aria-hidden":!0,className:p,style:s,title:l,onClick:d}),u)},t.Icon.displayName=t.cnIcon()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(15),i=Object(r.withBemMod)(Object(o.b)(),{tone:"gray"})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(6),i=n(107),a=(n(781),r.memo(Object(o.withBaobab)({name:"item",events:{onClick:Object(o.logClick)()}})(function(e){var t=e.selected,n=e.onClick,o=e.image,a=e.forwardRef,c=e.suffix,s=e.idx,u=e.width,l=e.disableSelection,d=r.useCallback(function(e,t){n&&n(s,t)},[n,s]),f=r.useMemo(function(){return Object(i.a)("Item",{selected:t&&!l})},[t,l]);return r.createElement("div",{style:{width:u},className:f,onClick:d,ref:a},r.createElement("div",{className:Object(i.a)("ItemImageOverlay")},o),c&&r.createElement("div",{className:Object(i.a)("ItemSuffix")},c))})))},function(e,t,n){"use strict";n.d(t,"a",function(){return Tt});var r=n(0),o=n.n(r),i=n(3),a=n(349),c=n.n(a),s=n(2),u=n(70),l=n(6),d=n(26),f=n(466),p=n(245),h=(n(801),n(106)),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e){return r.createElement(h.b,m({size:h.a.m},e))}var b=n(5),g=n.n(b),y=n(1014),O=Object(i.cn)("FullscreenControls"),w=n(909),C=(n(796),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),j=c.a,E=g()(w),S=function(e){function t(t){var n=e.call(this,t)||this;return n.hideDelayTimeout=2e3,n.slideshowDelayInterval=4e3,n.isComponentMounted=!1,n.onActionClick=function(e){n.slideshowToggle(),e.stopPropagation()},n.onCloseClick=function(e){n.exitFullscreen(),e.stopPropagation()},n.onTitleClick=function(e){n.props.onTitleClick&&n.props.onTitleClick(),e.stopPropagation()},n.onDomainClick=function(e){n.props.onDomainClick&&n.props.onDomainClick(),e.stopPropagation()},n.state={hidden:!1,isSlideshowPlay:!1,isFullscreen:Boolean(j&&j.isFullscreen)},n.showInfoPanel=n.showInfoPanel.bind(n),n.showInfoPanelThrottle=Object(u.throttle)(n.showInfoPanel.bind(n),n.hideDelayTimeout/2,{delayedLastCall:!0}),n.hideInfoPanel=n.hideInfoPanel.bind(n),n.onFullscreenChange=n.onFullscreenChange.bind(n),n.onTitleClick=n.onTitleClick.bind(n),n.onDomainClick=n.onDomainClick.bind(n),n.goNext=n.goNext.bind(n),n}return C(t,e),t.prototype.componentDidUpdate=function(){this.state.isSlideshowPlay&&this.restartSlideshowTimer()},t.prototype.componentDidMount=function(){this.showInfoPanel(),this.isComponentMounted=!0,j&&j.on("change",this.onFullscreenChange)},t.prototype.componentWillUnmount=function(){this.exitFullscreen(),this.isComponentMounted=!1,window.removeEventListener("mousemove",this.showInfoPanelThrottle),j&&j.off("change",this.onFullscreenChange)},t.prototype.render=function(){var e=this.props,t=e.title,n=e.domain,o=e.url,i=e.nextItemHandler,a=e.prevItemHandler;return this.state.isFullscreen?r.createElement("div",{className:O({hidden:this.state.hidden})},a&&r.createElement("div",{className:O("PrevArrow"),onClick:a}),i&&r.createElement("div",{className:O("NextArrow"),onClick:i}),r.createElement("div",{className:O("Main")},i&&r.createElement("button",{className:O("Action",{stop:this.state.isSlideshowPlay}),onClick:this.onActionClick,"aria-label":this.state.isSlideshowPlay?E("Остановить",{context:"Кнопка остановки режима слайдшоу картинок"}):E("Запустить",{context:"Кнопка запуска режима слайдшоу картинок"})}),r.createElement("div",{className:O("Info")},r.createElement("a",{className:O("Title"),href:o,rel:"noopener",target:"_blank",onClick:this.onTitleClick},r.createElement(y.a,null,t)),r.createElement("a",{className:O("Domain"),href:o,rel:"noopener",target:"_blank",onClick:this.onDomainClick},n)),r.createElement("button",{className:O("Close"),onClick:this.onCloseClick,"aria-label":E("Закрыть",{context:"Кнопка выключения режима полноэкранного просмотра картинок"})}))):""},t.prototype.onFullscreenChange=function(){j&&(Boolean(j.isFullscreen)?this.enterFullscreen():this.exitFullscreen())},t.prototype.enterFullscreen=function(){this.setState({isFullscreen:!0}),window.addEventListener("mousemove",this.showInfoPanelThrottle)},t.prototype.exitFullscreen=function(){if(j){var e=this.state.isFullscreen;this.slideshowStop(),e&&(this.setState({isFullscreen:!1}),window.removeEventListener("mousemove",this.showInfoPanelThrottle),j.isFullscreen&&j.exit(),this.props.onExit&&this.props.onExit())}},t.prototype.showInfoPanel=function(){this.toggleInfoPanel(!1)},t.prototype.hideInfoPanel=function(){this.toggleInfoPanel(!0)},t.prototype.toggleInfoPanel=function(e){e||("undefined"!==typeof this.hideTimeoutHandle&&window.clearTimeout(this.hideTimeoutHandle),this.hideTimeoutHandle=window.setTimeout(this.hideInfoPanel,this.hideDelayTimeout)),this.isComponentMounted&&this.setState({hidden:e})},t.prototype.slideshowStop=function(){this.state.isSlideshowPlay&&(this.setState({isSlideshowPlay:!1}),this.stopSlideshowTimer(),this.props.onStopAutoplay&&this.props.onStopAutoplay())},t.prototype.slideshowToggle=function(){this.props.nextItemHandler&&(this.state.isSlideshowPlay?this.slideshowStop():(this.setState({isSlideshowPlay:!0}),this.props.onStartAutoplay&&this.props.onStartAutoplay(),this.restartSlideshowTimer()))},t.prototype.restartSlideshowTimer=function(){this.stopSlideshowTimer(),this.slideshowTimeoutHandle=window.setTimeout(this.goNext,this.slideshowDelayInterval)},t.prototype.goNext=function(){var e=this.props,t=e.nextItemHandler,n=e.isLoaded;t&&(this.state.isSlideshowPlay?(n&&t(),this.restartSlideshowTimer()):this.stopSlideshowTimer())},t.prototype.stopSlideshowTimer=function(){this.slideshowTimeoutHandle&&(window.clearTimeout(this.slideshowTimeoutHandle),this.slideshowTimeoutHandle=void 0)},t.stopPropagation=function(e){e.stopPropagation()},t}(r.PureComponent);var k=n(1),_=n(34),P=n(23),I=n(61),x=(n(800),Object(i.cn)("CropObjectsItem")),R=function(e){var t=e.className,n=e.style,o=e.onClick;return r.createElement("div",{className:x(null,[t]),style:n,onClick:o},r.createElement("div",{className:x("Point")}))},N=(n(799),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),M=Object(i.cn)("CropObjects"),T=function(e){function t(t){var n=e.call(this,t)||this;return n.updateWrapRef=function(e){n.setState({wrapElement:e})},n.state={wrapElement:null},n}return N(t,e),t.prototype.componentDidMount=function(){this.loadImageCropObjects()},t.prototype.render=function(){var e,t=this.props,n=t.className,o=t.activeCropObject,i=t.cropObjects,a=t.objectsClassName,c=t.onObjectClick,s=this.state.wrapElement;if(!i||!i.data.length)return null;if(s){var u=100/s.offsetWidth,l=100/s.offsetHeight;e=i&&i.data.map(function(e,t){var n=M("Item",{active:o===e},[a]),i=e.position.x+e.size.width/2-u+"%",s=e.position.y+e.size.height/2-l+"%";return r.createElement(R,{key:t,className:n,style:{top:s,left:i},onClick:function(){return c(e)}})})}return r.createElement("div",{className:n,ref:this.updateWrapRef},e)},t.prototype.loadImageCropObjects=function(){var e=this.props,t=e.fetchCropObjects,n=e.imageHref,r=e.imageId;r&&n&&t(r,n)},t}(r.PureComponent),L=Object(_.e)(function(e,t,n){return{cropObjects:n.imageId&&e.cropObjects[n.imageId]||void 0,fetchCropObjects:function(e,t){return function(n,r){return Object(P.i)(e,t,n,r)}}(t,e)}})(T),D=(n(798),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),B=Object(i.cn)("trimmer"),A=function(e){function t(t){var n=e.call(this,t)||this;return n.startPointerXMove=NaN,n.startPointerYMove=NaN,n.startPositionXMove=NaN,n.startPositionYMove=NaN,n.startSizeWidthMove=NaN,n.startSizeHeightMove=NaN,n.pointNameMove="",n.actionName="",n.trimmerRef=r.createRef(),n.parentWidth=0,n.parentHeight=0,n.positionX=0,n.positionY=0,n.initWidthInPercent=70,n.initHeighInPercent=70,n.minWidth=50,n.minHeight=50,n.x=15,n.y=15,n.width=0,n.height=0,n.firstReport=!0,n.onCropObjectClick=function(e){var t;n.setSize(e.size.width,e.size.height),n.setPosition(e.position.x,e.position.y),null===(t=n.saveTrimmerArea)||void 0===t||t.call(n,n.getArea(),"crop-object-click"),n.setActiveCropObject(e)},n.onPointerDown=n.onPointerDown.bind(n),n.onPointerUp=n.onPointerUp.bind(n),n.onTrimmerPointerMove=n.onTrimmerPointerMove.bind(n),n.onTrimmerPointerDown=n.onTrimmerPointerDown.bind(n),n.onPointPointerMove=n.onPointPointerMove.bind(n),n.onPointPointerDown=n.onPointPointerDown.bind(n),n.onPointLeftTopPointerDown=n.onPointLeftTopPointerDown.bind(n),n.onPointRightTopPointerDown=n.onPointRightTopPointerDown.bind(n),n.onPointLeftBottomPointerDown=n.onPointLeftBottomPointerDown.bind(n),n.onPointRightBottomPointerDown=n.onPointRightBottomPointerDown.bind(n),n.state={activeCropObject:null},n}return D(t,e),t.prototype.componentDidMount=function(){var e;this.setDefaults(),this.checkParentSize(),this.setSize(this.initWidthInPercent,this.initHeighInPercent),this.setPosition(this.x,this.y),null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),"point")},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove)},t.prototype.getArea=function(){var e=this.getRectangle(),n=e.point1,r=e.point2;return{point1:{x:this.roundNumber(t.toRangeFromZeroToOne(n.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(n.y),4)},point2:{x:this.roundNumber(t.toRangeFromZeroToOne(r.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(r.y),4)}}},t.prototype.render=function(){var e=this.props,n=e.areCropObjectsEnabled,o=e.cropObjectsWrapperClassName,i=e.cropObjectsClassName,a=e.imageHref,c=e.imageId,s=this.state.activeCropObject,u=n&&r.createElement(L,{className:o,objectsClassName:i,activeCropObject:s,imageHref:a,imageId:c,onObjectClick:this.onCropObjectClick});return r.createElement(r.Fragment,null,r.createElement("div",{className:B(null,[this.props.className]),ref:this.trimmerRef,onClick:t.stopPropogation,onMouseDown:this.onTrimmerPointerDown},r.createElement("div",{className:B("point",{pos:"left-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftTopPointerDown}),r.createElement("div",{className:B("point",{pos:"right-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightTopPointerDown}),r.createElement("div",{className:B("point",{pos:"right-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightBottomPointerDown}),r.createElement("div",{className:B("point",{pos:"left-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftBottomPointerDown})),u)},t.prototype.onPointLeftTopPointerDown=function(e){this.onPointPointerDown(e,"left-top")},t.prototype.onPointRightTopPointerDown=function(e){this.onPointPointerDown(e,"right-top")},t.prototype.onPointLeftBottomPointerDown=function(e){this.onPointPointerDown(e,"left-bottom")},t.prototype.onPointRightBottomPointerDown=function(e){this.onPointPointerDown(e,"right-bottom")},t.prototype.onPointPointerDown=function(e,t){e.stopPropagation(),this.onPointerDown(e),this.pointNameMove=t,this.actionName="size",window.addEventListener("mousemove",this.onPointPointerMove)},t.prototype.setPosition=function(e,t){if(this.trimmerRef.current){var n=this.roundNumber(e),r=this.roundNumber(t);n=Math.max(0,n),r=Math.max(0,r),n=Math.min(100-this.width,n),r=Math.min(100-this.height,r),this.trimmerRef.current.style.top=r+"%",this.trimmerRef.current.style.left=n+"%",this.positionX=n,this.positionY=r}},t.prototype.getRectangle=function(){return{point1:{x:this.positionX,y:this.positionY},point2:{x:this.positionX+this.width,y:this.positionY+this.height}}},t.prototype.onPointerDown=function(e){this.startPointerXMove=e.clientX,this.startPointerYMove=e.clientY,this.startPositionXMove=this.positionX,this.startPositionYMove=this.positionY,this.startSizeWidthMove=this.width,this.startSizeHeightMove=this.height,this.checkParentSize(),window.addEventListener("mouseup",this.onPointerUp)},t.prototype.onPointerUp=function(){var e;null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),this.actionName),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove),this.setDefaults(),this.resetActiveCropObject()},t.prototype.onTrimmerPointerDown=function(e){this.onPointerDown(e),this.actionName="drag",window.addEventListener("mousemove",this.onTrimmerPointerMove)},t.prototype.onTrimmerPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n);this.setPosition(this.startPositionXMove+r.x,this.startPositionYMove+r.y)},t.prototype.onPointPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n),o=this.convertPixelsToPercentages(this.minWidth,this.minHeight),i=this.startPositionXMove+this.startSizeWidthMove,a=this.startPositionYMove+this.startSizeHeightMove,c=100-this.startPositionXMove,s=100-this.startPositionYMove,u=this.startPositionXMove+this.startSizeWidthMove-o.x,l=this.startPositionYMove+this.startSizeHeightMove-o.y;switch(this.pointNameMove){case"left-top":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),Math.min(l,this.startPositionYMove+r.y));break;case"right-top":this.setSize(Math.min(c,this.startSizeWidthMove+r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(this.startPositionXMove,Math.min(l,this.startPositionYMove+r.y));break;case"right-bottom":this.setSize(Math.min(100-this.positionX,this.startSizeWidthMove+r.x),Math.min(100-this.positionY,this.startSizeHeightMove+r.y));break;case"left-bottom":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(s,this.startSizeHeightMove+r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),this.startPositionYMove)}},t.prototype.convertPixelsToPercentages=function(e,t){return{x:e/this.parentWidth*100,y:t/this.parentHeight*100}},t.prototype.setSize=function(e,t){var n=this.convertPixelsToPercentages(this.minWidth,this.minHeight),r=this.roundNumber(e),o=this.roundNumber(t);r=Math.max(n.x,r),o=Math.max(n.y,o),this.trimmerRef.current.style.width=e+"%",this.trimmerRef.current.style.height=t+"%",this.width=r,this.height=o},t.prototype.roundNumber=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.round(e*n)/n},t.prototype.saveTrimmerArea=function(e,t){var n,r,o,i,a,c,s=this.props.imageHref;null===(r=(n=this.props).saveTrimmerArea)||void 0===r||r.call(n,e),this.firstReport?(this.firstReport=!1,null===(i=(o=this.props).onTrimmerStart)||void 0===i||i.call(o,s)):null===(c=(a=this.props).onTrimmerChange)||void 0===c||c.call(a,e,t,s)},t.prototype.setDefaults=function(){this.startPointerXMove=NaN,this.startPointerYMove=NaN,this.startPositionXMove=NaN,this.startPositionYMove=NaN,this.startSizeWidthMove=NaN,this.startSizeHeightMove=NaN,this.pointNameMove=""},t.prototype.checkParentSize=function(){var e=this.trimmerRef.current.parentNode;this.parentWidth=e.offsetWidth,this.parentHeight=e.offsetHeight},t.prototype.setActiveCropObject=function(e){this.state.activeCropObject!==e&&this.setState({activeCropObject:e})},t.prototype.resetActiveCropObject=function(){this.state.activeCropObject&&this.setState({activeCropObject:null})},t.stopPropogation=function(e){e.stopPropagation()},t.toRangeFromZeroToOne=function(e){return e/100},t}(r.Component),F=Object(I.d)(function(e){return function(t){return e(Object(P.o)(t))}}),U=Object(k.compose)(Object(_.e)(function(e,t){return{areCropObjectsEnabled:e.config.areCropObjectsEnabled,saveTrimmerArea:F(t)}}))(A),z=n(247),H=n(129),q=function(){if(!H.a)return!1;var e=document.createElement("img");return e.style.cssText="object-fit:cover",Boolean(e.style.objectFit)}(),W="undefined"!==typeof InstallTrigger,V=Object(I.d)(function(e){var t,n,r;return(null===(t=e.loadedImage)||void 0===t?void 0:t.data)||(null===(n=e.preview)||void 0===n?void 0:n[0])||(null===(r=e.dups)||void 0===r?void 0:r[0])||{}}),G=(n(797),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Y=function(){return(Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},K=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},X=Object(i.cn)("MMImage"),Q=X("Spinner"),J=X("Origin"),Z=X("Preview"),$=Object(i.cn)("MMImageContainer"),ee=Object(i.cn)("MMImageWrapper"),te=ee("Trimmer"),ne=ee("CropObjects"),re=ee("CropObjects-Item"),oe=function(e){function t(t){var n=e.call(this,t)||this;n.startLoadTime=Date.now(),n.endLoadTime=null,n.isComponentMounted=!1,n.geom={},n.fallbackImagesMap={},n.imageRef=r.createRef(),n.wrapper=r.createRef(),n.container=r.createRef(),n.onContextMenu=n.onContextMenu.bind(n),n.onPreviewLoaded=n.onPreviewLoaded.bind(n),n.onResizeThrottleHandler=Object(u.throttle)(n.onResizeHandler.bind(n),50,{delayedLastCall:!0});var o=1+(n.props.squareDiffPercent||0)/100;return n.smartFitBounds={upperBound:o,lowerBound:1/o},n.updateGeometry(t.item),n}return G(t,e),t.prototype.componentDidMount=function(){this.isComponentMounted=!0,window.addEventListener("resize",this.onResizeThrottleHandler),this.onResizeHandler()},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,window.removeEventListener("resize",this.onResizeThrottleHandler)},t.prototype.componentDidUpdate=function(e){this.props.hasTrimmer===e.hasTrimmer&&this.props.hasCommercialCrop===e.hasCommercialCrop||this.onResizeHandler()},t.prototype.shouldComponentUpdate=function(e){return(e.item!==this.props.item||e.recalculateGeometry)&&this.updateGeometry(e.item),!0},t.prototype.getFallbackImageUrl=function(){var e=this.props,t=e.item,n=e.fallbackOnPreview;if(this.fallbackImagesMap[t.id])return this.fallbackImagesMap[t.id];var r=n?t.preview[0].url:t.thumb.url;return this.fallbackImagesMap[t.id]=r,r},t.prototype.render=function(){var e,t,n,o,i=this.props,a=i.item,c=i.hasTrimmer,s=i.onPreviewSave,u=V(a),l=!a.loadedImage,d=a.loadedImage&&a.loadedImage.data,f=this.geom,p=u&&u.url,h=(null===d||void 0===d?void 0:d.url)||this.getFallbackImageUrl(),m=null===d||void 0===d?void 0:d.origin,b=this.imageRef.current;b&&(!d||d.noncachable?b.style.width=!f.smartFit&&f.width?f.width+"px":"":o=this.onPreviewLoaded,(null===(e=this.shownData)||void 0===e?void 0:e.id)!==a.id&&(b.src=a.thumb.url),b.style.maxHeight=f.maxHeight?f.maxHeight+"px":"");var g=h;if(!l){var y=W&&this.getCurrentImageOriginUrl();y&&(g=y)}var O=a.fresh;return this.handleImageShow(a,d),r.createElement("div",{className:ee({hasTrimmer:c}),ref:this.wrapper},O?r.createElement("div",{className:ee("FreshBadge")},O):null,r.createElement("div",{className:$({fit:f.smartFit,hasTrimmer:c}),ref:this.container},c&&r.createElement(U,{className:te,cropObjectsWrapperClassName:ne,cropObjectsClassName:re,onTrimmerStart:this.props.onTrimmerStart,onTrimmerChange:this.props.onTrimmerChange,imageHref:p,imageId:a.rimid}),Boolean(f.maxHeight)&&r.createElement("img",{className:Z,src:h,onContextMenuCapture:!(m&&m.url)&&s||void 0,ref:this.imageRef,onClick:this.props.onClick,onLoad:o,"data-load-timing":"1"}),a.thumb.commercialCrop&&(null===(n=(t=this.props).commercialCropRenderer)||void 0===n?void 0:n.call(t,a.thumb.commercialCrop))),l&&r.createElement(v,{className:Q}),r.createElement("img",{className:J,onContextMenuCapture:this.onContextMenu,src:g||h,onClick:this.props.onClick}))},t.prototype.onPreviewLoaded=function(){var e=this.imageRef.current;e&&(e.style.height="",e.style.width="")},t.prototype.onResizeHandler=function(){this.isComponentMounted&&this.updateGeometry(this.props.item)&&this.forceUpdate()},t.prototype.updateGeometry=function(e){var t=this.geom,n=t.smartFit,r=t.maxHeight,o=t.width,i=this.getGeometryParams(V(e)),a=i.smartFit,c=i.maxHeight,s=i.width;return(n!==a||r!==c||o!==s||!this.getCurrentLoadedThumb()&&this.geom.height!==i.height)&&(this.geom=i,!0)},t.prototype.getDimensionsRatio=function(e,t){return e.w/e.h/(t.w/t.h)},t.prototype.isImageCloseToViewport=function(e,t,n){return!(e.w<t.w||e.h<t.h)&&(n>=this.smartFitBounds.lowerBound&&n<=this.smartFitBounds.upperBound)},t.prototype.shouldUseSmartFit=function(e,t,n){return q&&this.isImageCloseToViewport(e,t,n)},t.prototype.getGeometryParams=function(e){var t=this.wrapper.current;if(!this.isComponentMounted)return{width:e.w,height:"100%",maxHeight:"100%",smartFit:!1};if(!t||!e)return{};var n={w:t&&t.clientWidth||0,h:t&&t.clientHeight||0},r={w:e.w||1,h:e.h||1},o=!1,i=this.getDimensionsRatio(n,e);this.props.squareDiffPercent&&(o=this.shouldUseSmartFit(e,n,i));var a=r.h||1;!o&&i<1&&n.h<e.h&&(a=i*n.h);var c=n.h;return{width:c>a?r.w:r.w/a*c,height:a,smartFit:o,maxHeight:n.h}},t.prototype.getOriginUrlFromItem=function(e){return e&&e.origin&&e.origin.url},t.prototype.onContextMenu=function(e){var t=e.target,n=this.getCurrentImageOriginUrl();t&&n&&t.setAttribute("src",n),this.props.onPreviewSave&&this.props.onPreviewSave()},t.prototype.getLoadTimes=function(){if(!this.isComponentMounted&&Object(p.canUseDOM)()){var e=document.querySelector("."+Z),t=K(["data-load-timing-start","data-load-timing-end"].map(function(t){var n=null===e||void 0===e?void 0:e.getAttribute(t);return null===e||void 0===e||e.removeAttribute(t),n?Number(n):null}),2),n=t[0],r=t[1];if(n&&r)return[n,r]}return[Date.now(),null]},t.prototype.handleImageShow=function(e,t){var n;if((null===(n=this.shownData)||void 0===n?void 0:n.id)!==(null===e||void 0===e?void 0:e.id)){var r=K(this.getLoadTimes(),2),o=r[0],i=r[1];this.startLoadTime=o||Date.now(),this.endLoadTime=i,this.shownData=e,this.shownImage=void 0}t&&this.shownImage!==t&&(this.shownImage=t,this.onOriginShow(t))},t.prototype.getCurrentLoadedThumb=function(){var e=this.props.item.loadedImage;return e&&e.data||void 0},t.prototype.getCurrentImageOriginUrl=function(){if(this.props.item.extraOrigin)return this.props.item.extraOrigin.url;var e=this.getOriginUrlFromItem(this.getCurrentLoadedThumb());if(!e){var t=this.props.item;e=this.getOriginUrlFromItem(t.preview&&t.preview[0])||this.getOriginUrlFromItem(t.dups&&t.dups[0])}return e},t.prototype.onOriginShow=function(e){var t,n=this,r=this.props.item,o=Number(r.pos||0);if(this.shownImage=this.getCurrentLoadedThumb(),e){var i=e.loadTime,a=(this.endLoadTime||Date.now())-this.startLoadTime;t={url:e.url,w:String(e.w),h:String(e.h),loadTime:Number(i),endLoadTime:this.endLoadTime,usertime:String(a),isMixedImage:Boolean(e.isMixedImage),isRim:r.isRim,rimid:r.rimid,rim_index:r.pos,origin:e.origin}}setTimeout(function(){n.props.onPreviewShow&&t&&n.props.onPreviewShow(o,t),n.props.onShow&&t&&n.props.onShow(o,t)},0)},t}(r.Component);var ie,ae=n(77),ce=n(8),se=n(30),ue=n(910),le=(n(804),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),de=g()(ue),fe=Object(i.cn)("TrimmerControls"),pe=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.onPointerOver=n.onPointerOver.bind(n),n.onSearchClick=n.onSearchClick.bind(n),n}return le(t,e),t.prototype.render=function(){var e=this.getCrop(),t=this.getImageUrl(this.props.imageUrl);return r.createElement("div",{className:fe(),onMouseOver:this.onPointerOver},r.createElement("div",{className:fe("Label")},de("Укажите выше область для поиска по картинке",{context:"Инструмент выбора области картинки для дальнейшего поиска по ней"})),r.createElement("div",{className:fe("Cancel"),onClick:this.props.onClose},r.createElement("span",{className:fe("CancelText")},de("Отменить",{context:'Кнопка "Отменить"'}))),Boolean(e)&&t&&r.createElement("a",{className:fe("Search"),target:this.getTarget(),onClick:this.onSearchClick,href:this.getSearchUrl(e,t)},de("Искать",{context:'Кнопка "Искать"'})))},t.prototype.getTarget=function(){return this.props.target||"_blank"},t.prototype.onPointerOver=function(){this.forceUpdate()},t.prototype.onSearchClick=function(e){if(this.props.onSearchClick){var t=this.getCrop(),n=this.getImageUrl(this.props.imageUrl);this.props.onSearchClick(e,t,n)}},t.prototype.getImageUrl=function(e){return"/"===e[0]?location.protocol+e:e},t.prototype.getSearchUrl=function(e,t){if(!t)return"";var n={rpt:"imageview",cbir_page:"similar",url:t,crop:e};return Object(se.appendQueryString)(this.props.imagesCbirSearchUrl,n)},t.prototype.getCrop=function(){var e=this.props.trimmerArea;return e?e.point1.x+";"+e.point1.y+";"+e.point2.x+";"+e.point2.y:""},t}(r.Component),he=Object(k.compose)(Object(_.e)(function(e){var t,n=Object(ce.j)(e);return{imagesCbirSearchUrl:e.config.imagesCbirSearchUrl,trimmerArea:e.trimmerArea,imageUrl:n&&(null===(t=V(n))||void 0===t?void 0:t.url)}}),Object(ae.a)(["imageUrl","trimmerArea"]))(pe),me=n(28),ve=n(589),be=(n(803),g()(ve)),ge=Object(b.i18nRaw)(ve),ye=Object(i.cn)("MMViewMessage"),Oe=function(e){var t=e.onClick,n=e.url,o=e.type;return r.createElement("span",null,ge("Не удалось загрузить картинку, возможно, она есть на {link}",{context:"https://nda.ya.ru/3UYjnC",link:r.createElement("a",{className:ye("ErrorMessage"),href:n,rel:"noopener",target:"_blank",onClick:t,key:o},"service"===o?be("сервисе Яндекс.Картинки",{context:"https://nda.ya.ru/3UYjnC"}):be("сайте",{context:"https://nda.ya.ru/3UYjnK"}))}),".")},we=n(502),Ce=n(10),je=n(151),Ee=n(249),Se=Object(i.cn)("CircleButton"),ke=(n(795),r.memo(function(e){var t=e.disabled,n=void 0!==t&&t,o=e.active,i=void 0!==o&&o,a=e.onMouseEnter,c=e.onMouseOut,s=e.forwardRef,u=e.onClick;return r.createElement("div",{className:Se({disabled:n,active:i},[e.className]),onClick:n?void 0:u,onMouseEnter:a,onMouseOut:c,ref:s},e.children)})),_e=Object(l.withBaobab)({name:"CircleButton"})(ke),Pe=(n(788),r.memo(function(){return r.createElement("i",{className:Se("Icon")})})),Ie=function(){return(Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xe=Object(k.withBemMod)(Se(),{type:"*"},function(e){return function(t){return r.createElement(e,Ie({},t,{className:Se({type:!0},[t.className])}),t.children,r.createElement(Pe,null))}}),Re=(n(791),Object(k.withBemMod)(Se(),{type:"next"})),Ne=(n(790),Object(k.withBemMod)(Se(),{type:"prev"})),Me=n(293),Te=(n(789),function(){return(Te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),Le=g()(Me),De=Object(k.withBemMod)(Se(),{type:"fullscreen"},function(e){return function(t){return r.createElement(e,Te({},t,{title:Le("Открыть в полноэкранном режиме",{context:"Кнопка открытия полноэкранного режима в просмотрщике картинок"})}),t.children)}}),Be=(n(792),function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),Ae=g()(Me),Fe=Object(k.withBemMod)(Se(),{type:"cbircrop"},function(e){return function(t){return r.createElement(e,Be({},t,{title:Ae("Поиск по фрагменту картинки",{context:"Кнопка открытия режима поиска по фрагменту картинки в просмотрщике картинок"})}),t.children)}}),Ue=(n(793),function(){return(Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),ze=g()(Me),He=Object(k.withBemMod)(Se(),{type:"commercialcrop"},function(e){return function(t){return r.createElement(e,Ue({},t,{title:ze("Распознать товары на картинке",{context:"Текст ондобрдинга для активации фичи товарных точек"})}),t.children)}}),qe=n(355),We=function(){return(We=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ve=Object(k.withBemMod)(Se(),{withTooltip:!0},function(e){return function(t){var n=r.useRef(null),o=t.onClick,i=t.onMouseEnter,a=t.onMouseOut,c=t.active,s=t.initVisibility;return r.createElement(qe.a,{text:t.title,anchor:n,directions:["right-center"],initialVisibility:!c&&s,mainOffset:7,hasTail:!0},function(s,u){var l=r.useCallback(function(e){c||u(),null===o||void 0===o||o(e)},[c,o,u]),d=r.useCallback(function(e){c||s(),null===i||void 0===i||i(e)},[c,i,s]),f=r.useCallback(function(e){c||u(),null===a||void 0===a||a(e)},[c,a,u]);return r.createElement(e,We({},t,{className:Se(null,[t.className]),forwardRef:n,onMouseEnter:d,onMouseOut:f,onClick:l}),t.children)})}}),Ge=Object(i.cn)("MediaViewer"),Ye=(n(787),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ke=function(){return(Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xe=Object(k.compose)(xe,Object(k.composeU)(De,Ne,Re,Fe,He),Ve)(_e);!function(e){e.imageClick="imageClick",e.imageShow="imageShow",e.imageError="imageError",e.nextItem="nextItem",e.prevItem="prevItem",e.setItem="setItem",e.close="close",e.paranjaClick="paranjaClick",e.fullscreenEnter="fullscreenEnter",e.fullscreenExit="fullscreenExit",e.fullscreenTitleClick="fullscreenTitleClick",e.fullscreenDomainClick="fullscreenDomainClick",e.fullscreenStartAutoplay="fullscreenStartAutoplay",e.fullscreenStopAutoplay="fullscreenStopAutoplay",e.previewSave="previewSave",e.previewShow="previewShow"}(ie||(ie={}));var Qe=function(e){function t(n){var r=e.call(this,n)||this;return r.isFullscreenMode=!1,r.onViewErrorHandler=r.onViewErrorHandler.bind(r),r.genClass=r.genClass.bind(r),r.onFullscreenClick=r.onFullscreenClick.bind(r),r.onFullscreenExit=r.onFullscreenExit.bind(r),r.onFullscreenTitleClick=r.onFullscreenTitleClick.bind(r),r.onFullscreenDomainClick=r.onFullscreenDomainClick.bind(r),r.onFullscreenStartAutoplay=r.onFullscreenStartAutoplay.bind(r),r.onPreviewSave=r.onPreviewSave.bind(r),r.onPreviewShow=r.onPreviewShow.bind(r),r.onSceneClick=r.onSceneClick.bind(r),r.onItemClick=r.onItemClick.bind(r),r.onItemShow=r.onItemShow.bind(r),r.onFullscreenStopAutoplay=r.onFullscreenStopAutoplay.bind(r),r.switchNext=r.genItemSwitcher(1),r.switchPrev=r.genItemSwitcher(-1),r.onKeyDownHandler=Object(u.throttle)(r.onKeyDownHandler.bind(r),100),r.onKeyUpHandler=Object(u.throttle)(r.onKeyUpHandler.bind(r),100),r.onSceneMouseMove=r.onSceneMouseMove.bind(r),r.onMouseMove=Object(u.throttle)(r.onMouseMove.bind(r),100,{delayedLastCall:!0}),r.getScrollContainer=r.getScrollContainer.bind(r),r.nodes={},r.state=Ke({hoveredArrow:"",viewHeightStyle:"100%",viewWidthStyle:"100%"},t.getStateForNewItem(n.items,n.initialIdx||0,n.showItem)),r}return Ye(t,e),t.prototype.componentDidMount=function(){this.componentIsMounted=!0,window.addEventListener("keydown",this.onKeyDownHandler),window.addEventListener("keyup",this.onKeyUpHandler),this.trigger(ie.setItem,this.state.currentIdx)},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,window.removeEventListener("keydown",this.onKeyDownHandler),window.removeEventListener("keyup",this.onKeyUpHandler)},t.prototype.componentDidUpdate=function(e,n){var r=this.props.items,o=e.items;this.state.shownItem!==n.shownItem||this.state.currentIdx===n.currentIdx&&r.length===o.length&&r[this.state.currentIdx]===o[n.currentIdx]&&this.props.showItem===e.showItem||this.setState(t.getStateForNewItem(this.props.items,this.state.currentIdx,this.props.showItem))},t.prototype.render=function(){var e=this.state,t=this.props.theme,n=this.props,o=n.layout,i=n.className;return r.createElement("div",{className:Ge({theme:t},[i]),ref:this.saveRef("self")},r.createElement("div",{className:this.genClass("LayoutContainer"),ref:this.saveRef("container")},o&&o.leftSideblock&&r.createElement("div",{className:this.genClass("LayoutLeftSideblock"),ref:this.saveRef("leftSideblock")},o.leftSideblock),r.createElement("div",{className:this.genClass("LayoutMain"),style:{width:e.viewWidthStyle}},this.renderScene(),o&&o.footer&&r.createElement("div",{className:this.genClass("LayoutFooter"),ref:this.saveRef("footer")},this.props.layout&&this.props.layout.footer)),o&&o.sideblock&&r.createElement("div",{className:this.genClass("LayoutSideblock"),ref:this.saveRef("sideblock")},o.sideblock)))},t.prototype.getView=function(){return this.nodes.view},t.prototype.getScrollContainer=function(){return this.nodes.container},t.prototype.switchToItem=function(e){var n=this,r=t.getStateForNewItem(this.props.items,e,this.props.showItem);this.props.items[e]&&this.setState(r,function(){n.trigger(ie.setItem,r.currentIdx)})},t.prototype.renderScene=function(){var e=this,t=this.state,n=this.props,o=n.buttons,i=void 0===o?{}:o,a=n.viewMode,c=Object.keys(i).map(function(e){return Object.assign({},i[e],{type:i[e].type||e})});return this.props.hasFullscreen&&c.unshift({type:"fullscreen",clickHandler:this.onFullscreenClick}),r.createElement(Ee.a,{className:this.genClass("LayoutScene"),forwardRef:this.saveRef("scene"),onClick:this.props.onSceneViewClick||this.onSceneClick,logNode:{name:"preview",events:{onClick:Object(l.logClick)(function(){return{action:e.state.hoveredArrow}})}},onMouseMove:this.onSceneMouseMove},!this.props.hideButtons&&r.createElement(Xe,{className:this.genClass(["Button","ButtonPrev"],[{hovered:"prev"===this.state.hoveredArrow}]),logNode:{name:"arrow-left",events:{onClick:Object(l.logClick)()}},disabled:t.isFirst,onClick:this.switchPrev,type:"prev"}),Boolean(c.length)&&!this.props.hideButtons&&r.createElement("div",{className:this.genClass("LayoutSceneControls")},c.map(function(t,n){return t.content||r.createElement(Xe,{key:n,type:t.type,title:t.title,className:e.genClass(["Button","Button"+t.type],{active:t.active}),onClick:t.clickHandler,initVisibility:t.initVisibility,disabled:a&&a!==t.type,active:a&&a===t.type,logNode:{name:t.type,events:{onClick:Object(l.logClick)()}},withTooltip:!0})})),r.createElement("div",{className:this.genClass("View"),ref:this.saveRef("view"),style:{width:t.viewWidthStyle,height:t.viewHeightStyle,lineHeight:t.viewHeightStyle}},this.props.itemRenderer(this.state.shownItem,{switchNext:this.switchNext,switchPrev:this.switchPrev,onShow:this.onItemShow,onError:this.onViewErrorHandler,hasFullscreen:this.props.hasFullscreen,onFullscreenExit:this.onFullscreenExit,onFullscreenTitleClick:this.onFullscreenTitleClick,onFullscreenDomainClick:this.onFullscreenDomainClick,onFullscreenStartAutoplay:this.onFullscreenStartAutoplay,onFullscreenStopAutoplay:this.onFullscreenStopAutoplay,onPreviewSave:this.onPreviewSave,onPreviewShow:this.onPreviewShow,hasTrimmer:this.props.hasTrimmer,hasCommercialCrop:this.props.hasCommercialCrop,fallbackOnPreview:this.props.fallbackOnPreview,imageRef:this.props.imageRef})),!this.props.hideButtons&&r.createElement(Xe,{className:this.genClass(["Button","ButtonNext"],[{hovered:"next"===this.state.hoveredArrow}]),logNode:{name:"arrow-right",events:{onClick:Object(l.logClick)()}},disabled:t.isLast,onClick:this.switchNext,type:"next"}),this.props.viewMessage&&r.createElement("div",{className:this.genClass("ViewMessage")},this.props.viewMessage))},t.prototype.onItemShow=function(e,t){this.trigger(ie.imageShow,e,t)},t.prototype.onItemClick=function(e){this.trigger(ie.imageClick,e)},t.prototype.onSceneClick=function(e){"prev"===this.state.hoveredArrow?this.switchPrev(e,"",this.onItemClick):this.switchNext(e,"",this.onItemClick)},t.prototype.saveRef=function(e){var t=this;return function(n){return t.nodes[e]=n}},t.prototype.genClass=function(e,t){var n=this.props.theme||"fiji",r=Object(i.cn)(Ge()+"_theme_"+n),o=Array.isArray(t)?t:[t];return(Array.isArray(e)?e:[e]).map(function(e,t){return Ge(e,o[t],[r(e)])}).join(" ")},t.prototype.trigger=function(e,t,n,r){var o=this.props.on,i=o&&o[e];i&&i(void 0!==t?t:this.state.currentIdx,n,r)},t.prototype.genItemSwitcher=function(e){var n=this;return void 0===e&&(e=1),function(r,o,i){r&&r.stopPropagation();for(var a=n.state.currentIdx,c=n.props.items,s=a+e;!c[s]&&s>=0&&s<c.length;s+=e);if(c[s]){var u=t.getStateForNewItem(n.props.items,s,n.props.showItem);n.setState(u,function(){i&&i(u.currentIdx),n.trigger(e>0?ie.nextItem:ie.prevItem,u.currentIdx,null,o),n.trigger(ie.setItem,u.currentIdx)})}}},t.prototype.onFullscreenClick=function(e){!function(e){j&&e&&j.request(e)}(this.nodes.view),this.isFullscreenMode=!0,this.trigger(ie.fullscreenEnter),e.stopPropagation()},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.trigger(ie.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.trigger(ie.fullscreenTitleClick)},t.prototype.onFullscreenDomainClick=function(){this.trigger(ie.fullscreenDomainClick)},t.prototype.onFullscreenStartAutoplay=function(){this.trigger(ie.fullscreenStartAutoplay)},t.prototype.onPreviewSave=function(){this.trigger(ie.previewSave,this.state.currentIdx)},t.prototype.onPreviewShow=function(e,t){this.trigger(ie.previewShow,e||this.state.currentIdx,t)},t.prototype.onFullscreenStopAutoplay=function(){this.trigger(ie.fullscreenStopAutoplay)},t.prototype.onViewErrorHandler=function(e){this.trigger(ie.imageError)},t.prototype.onSceneMouseMove=function(e){this.onMouseMove(e.clientX)},t.prototype.onMouseMove=function(e){if(this.nodes.scene&&this.componentIsMounted){var t=this.props.prevArrowSize,n="number"===typeof t?t:.3,r=this.nodes.scene.getBoundingClientRect(),o=r.left,i=(e-o)/(r.right-o)<=n?"prev":"next";this.state.hoveredArrow!==i&&this.setState({hoveredArrow:i})}},t.prototype.onKeyDownHandler=function(e){if(!this.shouldPreventKeyHandler(e))switch(e.keyCode){case 8:case 27:this.isFullscreenMode||this.trigger(ie.close);break;case 32:e.preventDefault(),this.switchNext(null,"keyboard");break;case 40:case 39:this.switchNext(null,"keyboard");break;case 38:case 37:this.switchPrev(null,"keyboard")}},t.prototype.onKeyUpHandler=function(e){this.shouldPreventKeyHandler(e)||32===e.keyCode&&e.preventDefault()},t.prototype.shouldPreventKeyHandler=function(e){var t=e.target.nodeName;return!this.componentIsMounted||"TEXTAREA"===t||"INPUT"===t},t.getStateForNewItem=function(e,t,n){var r=0===e.length,o=e.length-1,i=t;i<0?i=0:i>o&&(i=o);var a=r?void 0:e[i];return{currentIdx:i,isFirst:0===i||r,isLast:i===o||r,shownItem:n||a}},t}(r.Component),Je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=Object(i.cn)("MMDirectStripe"),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.isComponentMounted=!1,n.loaderUrl="//an.yandex.ru/system/context.js",n.containerRef=r.createRef(),n.state={hidden:!1},n.getLogNode=Object(I.d)(n.getLogNode),n.onDirectRendered=n.onDirectRendered.bind(n),n.onEmptyDirectLoaded=n.onEmptyDirectLoaded.bind(n),n.onHide=n.onHide.bind(n),n.onClick=n.onClick.bind(n),n.setContainerRef=n.setContainerRef.bind(n),n}return Je(t,e),t.prototype.componentDidMount=function(){var e=this,n=this.props,r=n.directId,o=n.pageNumber,i=n.forwardRef;this.isComponentMounted=!0,i&&(i.current=this),t.loadDirectContext(this.loaderUrl,function(){e.renderDirect()}),this.renderParams={blockId:r,renderTo:this.getUniqId(),async:!0,onRender:this.onDirectRendered,onHide:this.onHide,extParams:"&"+Object(se.stringifyUrlParams)(this.getExtParams())},o&&(this.renderParams.pageNumber=o)},t.prototype.componentDidUpdate=function(e,n){var r=this;e.directId===this.props.directId&&e.text===this.props.text&&n.hidden===this.state.hidden||t.loadDirectContext(this.loaderUrl,function(){r.renderDirect()})},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.onRemove,n=e.forwardRef;this.isComponentMounted=!1,n&&(n.current=null),t&&t()},t.prototype.render=function(){var e;if(this.state.hidden)return null;var t=this.props,n=t.className,o=t.style;return r.createElement(Ee.a,{style:o,className:Ze(null,[n]),logNode:this.getLogNode(null===(e=this.state.advData)||void 0===e?void 0:e[0])},r.createElement("div",{id:this.getUniqId(),ref:this.setContainerRef}))},t.prototype.getLogNode=function(e){var t={type:"adv"};return e&&(t.event_hash=null===e||void 0===e?void 0:e.eventHash,t.hit_log_id=null===e||void 0===e?void 0:e.hitLogId),{name:"DirectStripe",attrs:t,events:{onClick:Object(l.logClick)()}}},t.prototype.renderDirect=function(){var e=this,t=window.Ya.Context;if(!this.state.hidden&&t&&this.renderParams){var n=this.renderParams;t.AdvManager?(t._asyncModeOn=!0,t.AdvManager.render(n,this.onEmptyDirectLoaded)):(t._callbacks||(t._callbacks=[])).push(function(){return t.AdvManager&&t.AdvManager.render(n,e.onEmptyDirectLoaded)})}},t.prototype.setContainerRef=function(e){e?(e.addEventListener("click",this.onClick,!0),this.props.fixWidth&&(e.style.width=e.clientWidth+"px"),this.containerRef.current=e):this.containerRef.current&&(this.containerRef.current.removeEventListener("click",this.onClick,!0),this.containerRef.current=null)},t.prototype.onClick=function(e){this.props.onClick&&this.props.onClick(e)},t.prototype.getUniqId=function(){return this.elementDomId?this.elementDomId:(this.props.getUniqId?this.elementDomId=this.props.getUniqId():this.elementDomId="yandex_ad_stripe_"+Date.now()+"_"+Math.round(1e6*Math.random()),this.elementDomId)},t.prototype.getExtParams=function(){var e={reqid:this.props.reqid,position:"stripe",ui:"desktop"},t=this.props.yandexuid,n=/\buuid=(\w+)/.exec(location.search),r=n&&n[1];return r?e.uuid=r:t&&(e.yuid=t),e},t.prototype.onDirectRendered=function(e){var t,n;this.isComponentMounted&&(this.setState({hidden:!1,advData:null===e||void 0===e?void 0:e.advData}),null===(n=(t=this.props).onRender)||void 0===n||n.call(t,null===e||void 0===e?void 0:e.advData))},t.prototype.onHide=function(){if(this.isComponentMounted){var e=this.props.onHide;this.setState({hidden:!0}),e&&e()}},t.prototype.onEmptyDirectLoaded=function(){if(this.isComponentMounted){var e=this.props.onEmptyLoaded;this.setState({hidden:!0}),e&&e()}},t.loadDirectContext=function(e,t,n){var r=this,o=this.scriptStatuses[e];this.onLoad[e]||(this.onLoad[e]=[]),this.onError[e]||(this.onError[e]=[]),"loaded"!==o?(t&&this.onLoad[e].push(t),n&&this.onError[e].push(n)):t&&setTimeout(t,0);var i=this.contextScripts[e];if(!window.Ya.Context&&(!o||"error"===o)){i&&i.parentNode&&i.parentNode.removeChild(i);var a=this.contextScripts[e]=document.createElement("script");a.onload=function(){r.scriptStatuses[e]="loaded",r.onLoad[e].forEach(function(e){return e()})},a.onerror=function(){r.scriptStatuses[e]="error",r.onError[e].forEach(function(e){return e()})},a.src=e,document.body.appendChild(a),this.scriptStatuses[e]="loading"}},t.scriptStatuses={},t.contextScripts={},t.onLoad={},t.onError={},t}(r.Component),et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tt=(Object(i.cn)("MMDirectStripe"),function(e){function t(t){var n=e.call(this,t)||this;return n.loaderUrl="//an.yandex.ru/system/widget.js",n}return et(t,e),t.prototype.renderDirect=function(){var e=this.props.directId;if(e){var t=window;t.yaads||(t.yaads=[]),t.yaads.push({id:e,extParams:"&"+Object(se.stringifyUrlParams)(this.getExtParams()),render:"#"+this.getUniqId(),success:this.onDirectRendered,reject:this.onHide,hide:this.onHide})}},t}($e)),nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},rt=function(e){return function(e){return"string"===typeof e&&0===e.indexOf("N-")}(e.directId)?r.createElement(tt,nt({},e)):r.createElement($e,nt({},e))};var ot=n(9),it=n(7),at=n(412),ct=n(501),st=n(206),ut=new s.Registry({id:Object(st.a)()}),lt=ct.a;ut.set("CropMarkerShape",lt);var dt=Object(s.withRegistry)(ut)(at.a),ft=n(153),pt=dt,ht=new s.Registry({id:Object(ft.a)()});ht.set("CommercialCropShape",pt);var mt=n(413),vt=Object(s.withRegistry)(ht)(mt.a),bt=n(278),gt=n(417),yt=Object(i.cn)("CommercialCropProductsCarousel"),Ot=(n(784),function(){return(Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),wt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ct=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},jt=function(e){var t=e.className,n=e.productClassName,i=e.errorClassName,a=e.onProductsLoading,c=e.onProductsLoaded,s=e.onProductsLoadingError,u=wt(e,["className","productClassName","errorClassName","onProductsLoading","onProductsLoaded","onProductsLoadingError"]),l=Ct(Object(r.useState)(void 0),2),d=l[0],f=l[1],p=Object(r.useRef)(null),h=Object(r.useCallback)(function(){var e;null===a||void 0===a||a(),f(void 0),null===(e=p.current)||void 0===e||e.scroll({scrollLeft:0})},[a]),m=Object(r.useCallback)(function(e){null===c||void 0===c||c(e),f("ready")},[c]),v=Object(r.useCallback)(function(e){null===s||void 0===s||s(e),f("error")},[s]);return o.a.createElement(bt.a,{withArrows:!0,withArrowsFade:"fade",className:yt({state:d},[t]),apiRef:p},function(e){return o.a.createElement(gt.a,Ot({},u,{productClassName:yt("Item",[e,n]),errorClassName:yt("Error",[i]),onProductsLoading:h,onProductsLoaded:m,onProductsLoadingError:v}))})},Et=n(67),St=function(){return(St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function kt(e){var t=e.path,n=e.params,r=e.reqid;return St({dtype:"iweb",path:"/image/new/preview/"+t,reqid:r},n)}n(785),n(786);var _t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},It=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},xt=c.a,Rt=700,Nt=Object(i.cn)("ImagesViewerApp"),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _t(t,e),t}(Qe),Tt=function(e){function t(t){var n=e.call(this,t)||this;return n.isFullscreenMode=!1,n.eventsEnabled=!1,n.viewer=o.a.createRef(),n.directStripe=o.a.createRef(),n.behavioralDirectRef=o.a.createRef(),n.gallery=o.a.createRef(),n.sidebarNode=o.a.createRef(),n.leftSidebarNode=o.a.createRef(),n.commercialCropProductsContainer=o.a.createRef(),n.modal=o.a.createRef(),n.wasMounted=!1,n.scrollCollector=0,n.galleryItemsLoadEventOffset=1200,n.directAutoUpdateTimeout=1e4,n.logTechCounter=n.logTechCounter.bind(n),n.onCbirCropEvent=n.onCbirCropEvent.bind(n),n.onCbirCropSearchEvent=n.onCbirCropSearchEvent.bind(n),n.onNewItemSelected=n.onNewItemSelected.bind(n),n.onRelatedItemClick=n.onRelatedItemClick.bind(n),n.onDirectStripeClick=n.onDirectStripeClick.bind(n),n.onDirectStripeShow=n.onDirectStripeShow.bind(n),n.onDirectStripeHide=n.onDirectStripeHide.bind(n),n.onGalleryClick=n.onGalleryClick.bind(n),n.onScrollSwitch=n.onScrollSwitch.bind(n),n.onGalleryScrollCounter=Object(u.throttle)(n.onGalleryScrollCounter.bind(n),Rt),n.onGalleryScroll=Object(u.throttle)(n.onGalleryScroll.bind(n),50,{delayedLastCall:!0}),n.onPreviewShowEvent=n.onPreviewShowEvent.bind(n),n.sendNextCounter=n.sendNextCounter.bind(n),n.sendPrevCounter=n.sendPrevCounter.bind(n),n.previewSave=n.previewSave.bind(n),n.onOpenItem=n.onOpenItem.bind(n),n.hitFullscreenCounter=n.hitFullscreenCounter.bind(n),n.hitSlideshowCounter=n.hitSlideshowCounter.bind(n),n.hitTrimmerCounter=n.hitTrimmerCounter.bind(n),n.onFullscreenEnter=n.onFullscreenEnter.bind(n),n.onFullscreenExit=n.onFullscreenExit.bind(n),n.onFullscreenTitleClick=n.onFullscreenTitleClick.bind(n),n.onFullscreenDomainClick=n.onFullscreenDomainClick.bind(n),n.onFullscreenStartAutoplay=n.onFullscreenStartAutoplay.bind(n),n.onFullscreenStopAutoplay=n.onFullscreenStopAutoplay.bind(n),n.onTrimmerStart=n.onTrimmerStart.bind(n),n.onTrimmerChange=n.onTrimmerChange.bind(n),n.onCloseEventKeyboard=n.onCloseEventKeyboard.bind(n),n.onWheel=n.onWheel.bind(n),n.onCloseEventParanja=n.onCloseEvent.bind(n,"paranja"),n.onCloseEventMouse=n.onCloseEvent.bind(n,"mouse"),n.onCloseEventHistory=n.onCloseEvent.bind(n,"history"),n.onCloseEvent=n.onCloseEvent.bind(n),n.tryUpdateDirect=Object(u.throttle)(n.tryUpdateDirect.bind(n),n.directAutoUpdateTimeout),n.onGlobalDragStart=n.onGlobalDragStart.bind(n),n.onGlobalDragEnd=n.onGlobalDragEnd.bind(n),n.onTagClick=n.onTagClick.bind(n),n.onImageClick=n.onImageClick.bind(n),n.commercialCropRenderer=n.commercialCropRenderer.bind(n),n.onCommercialCropControlClick=n.onCommercialCropControlClick.bind(n),n.onCommercialSceneViewClick=n.onCommercialSceneViewClick.bind(n),n.onCommercialCropShapeClick=n.onCommercialCropShapeClick.bind(n),n.hitCommercialCropProductsShown=n.hitCommercialCropProductsShown.bind(n),n.hitCommercialCropProductClick=n.hitCommercialCropProductClick.bind(n),n.loginUrl="https://passport.yandex."+t.tld+"/auth?retpath=https%3A%2F%2Fyandex.ru%2Fcollections%2Ffavorites%2F&origin=images_collections",n.imageRenderer=function(e){return function(t,n){if(!t)return null;var o=t.loadedImage,i=Object(z.a)(t),a=Boolean(o);return r.createElement(r.Fragment,null,r.createElement(oe,Y({item:t,ref:n.imageRef},n,e)),n.hasFullscreen&&r.createElement(S,{isLoaded:a,title:i.title,domain:i.domain,url:i.url,nextItemHandler:n.switchNext,prevItemHandler:n.switchPrev,onExit:n.onFullscreenExit,onTitleClick:n.onFullscreenTitleClick,onDomainClick:n.onFullscreenDomainClick,onStartAutoplay:n.onFullscreenStartAutoplay,onStopAutoplay:n.onFullscreenStopAutoplay}))}}(n.getImageRendererOptions()),n.state={isVisible:null!=t.currentItemIdx&&t.currentItemIdx>=0,activeItemIdx:t.currentItemIdx||-1,initialIdx:t.currentItemIdx||void 0,showCbirCrop:!1,globalDragging:!1,loggedIn:t.config.loggedIn,directStripeVisible:!1},n.handlers={setItem:n.onNewItemSelected,close:n.onCloseEvent,nextItem:n.sendNextCounter,prevItem:n.sendPrevCounter,imageClick:n.onImageClick,imageShow:function(e,t){if(n.state.isVisible){Object(it.a)().emit(Et.a.imageShow);var r=n.getActiveItemParams(),o=r.preview[0],i=r.imgHref||"",a={pos:r.pos,width:o&&o.w||0,height:o&&o.h||0,time:Number(t&&t.loadTime),usertime:Number(t&&t.usertime)};if(t&&t.isRim&&(a.rim_id=t.rimid,a.rim_index=t.rim_index,t.origin&&(a.width=t.origin.w,a.height=t.origin.h)),t&&t.isMixedImage&&t.origin){var c=t.url.match(/id=([^&]+)/);i=t.origin.url,c&&(a.id=c[1]),a.origin_w=t.origin.w,a.origin_h=t.origin.h}var s=n.viewer.current&&n.viewer.current.getView();s&&(a.viewport_w=s.clientWidth,a.viewport_h=s.clientHeight),n.logTechCounter({method:"hitDelayed",__oldCounter__:kt({path:"image/show",params:{vars:a,cts:(null===t||void 0===t?void 0:t.endLoadTime)||void 0},reqid:r.reqid||""}),node:{href:i}})}},imageError:ot.a,fullscreenEnter:n.onFullscreenEnter,fullscreenExit:n.onFullscreenExit,fullscreenTitleClick:n.onFullscreenTitleClick,fullscreenDomainClick:n.onFullscreenDomainClick,fullscreenStartAutoplay:n.onFullscreenStartAutoplay,fullscreenStopAutoplay:n.onFullscreenStopAutoplay,previewSave:n.previewSave,previewShow:ot.a},n}return _t(t,e),t.prototype.componentDidMount=function(){if(this.wasMounted=!0,Object(it.a)().on("i-keyrouter:esc",this.onCloseEventKeyboard).on(Et.a.open,this.onOpenItem).on(Et.a.close,this.onCloseEventHistory),this.state.isVisible){if(this.enableEventListeners(),this.triggerBeforeOpenedEvent(),null!=this.props.currentItemIdx&&this.props.currentItemIdx>-1){var e=this.getItemParamsByIdx(this.props.currentItemIdx);this.triggerSelectItemEvent(e,{openedFromSerp:!1,initialLoading:!0,historyLoading:!1})}this.triggerOpenedEvent()}},t.prototype.componentWillUnmount=function(){this.wasMounted=!1,Object(it.a)().off("i-keyrouter:esc",this.onCloseEventKeyboard).off(Et.a.open,this.onOpenItem).off(Et.a.close,this.onCloseEventHistory),this.disableEventListeners()},t.prototype.componentDidUpdate=function(e,t){var n=t.activeItemIdx!==this.state.activeItemIdx,r=this.props.rimSelectedIdx!==e.rimSelectedIdx;this.state.isVisible?(this.enableEventListeners(),(n||r)&&this.tryUpdateDirect()):this.disableEventListeners();var o=this.props,i=o.commercialCropSelectedIdx,a=o.commercialCropRegions,c=this.props.shownImage;c&&((null===a||void 0===a?void 0:a.length)&&e.shownImage&&e.shownImage!==c&&this.hitCommercialCropShown(),void 0!==i&&i!==e.commercialCropSelectedIdx&&this.hitCommercialCropRegionShown())},t.prototype.render=function(){var e,t,n,r,i,a=this.props.items;return o.a.createElement(we.a,{className:Object(je.a)({mode:this.state.globalDragging?"dragging":void 0,hidden:Boolean(null===(e=this.props.experiments)||void 0===e?void 0:e.viewerShowDelay)&&!this.wasMounted,ssr:Boolean(null===(t=this.props.experiments)||void 0===t?void 0:t.imagesViewerSSR),bigPadding:null===(n=this.props.experiments)||void 0===n?void 0:n.viewerBigPaddingSize,darkParanja:null===(r=this.props.experiments)||void 0===r?void 0:r.viewerDarkParanja},[Object(d.a)(f.a)]),isVisible:this.state.isVisible,zIndex:this.state.isVisible?400:3,zIndexGroupLevel:10,onCloseClick:this.onCloseEventMouse,onParanjaClick:this.onCloseEventParanja,innerRef:this.modal,isSSREnabled:!0},this.state.isVisible&&o.a.createElement(Mt,{theme:"fiji",className:Object(je.a)("Container",this.getContainerMods()),ref:this.viewer,initialIdx:this.state.initialIdx||0,items:a,showItem:this.props.shownImage&&this.props.shownImage.isRim?this.props.shownImage:void 0,on:this.handlers,layout:{leftSideblock:this.renderLeftSidebar(),sideblock:this.renderSidebar(),footer:this.renderFooter()},itemRenderer:this.imageRenderer,buttons:this.getButtons(),hideButtons:this.shouldHideButtons(),hasFullscreen:this.isFullscreenAvailable(),onSceneViewClick:this.getSceneViewClickHandler(),viewMode:this.getCurrentSceneView(),hasTrimmer:this.state.showCbirCrop,hasCommercialCrop:void 0!==this.props.commercialCropSelectedIdx,viewMessage:this.renderError(),fallbackOnPreview:Boolean(null===(i=this.props.experiments)||void 0===i?void 0:i.imagesViewerFallbackOnPreview)&&!this.wasMounted}))},t.prototype.shouldHideButtons=function(){return!1},t.prototype.getContainerMods=function(){var e,t;return void 0!==this.props.commercialCropSelectedIdx&&(t="CommercialCrop"),this.state.showCbirCrop&&(t="CbirCrop"),{mode:t,sideblock:this.props.stretchSideblock?"stretch":void 0,ssr:null===(e=this.props.experiments)||void 0===e?void 0:e.imagesViewerSSR}},t.prototype.getButtons=function(){var e,t={CbirCrop:{type:"cbircrop",clickHandler:this.onCbirCropEvent}};return(null===(e=this.props.commercialCropRegions)||void 0===e?void 0:e.length)&&(t.CommercialCrop={type:"commercialcrop",clickHandler:this.onCommercialCropControlClick}),t},t.prototype.getCurrentSceneView=function(){return void 0!==this.props.commercialCropSelectedIdx?"commercialcrop":this.state.showCbirCrop?"cbircrop":void 0},t.prototype.getSceneViewClickHandler=function(){switch(this.getCurrentSceneView()){case"commercialcrop":return this.onCommercialSceneViewClick;case"cbircrop":return this.onCbirCropEvent}},t.prototype.getImageRendererOptions=function(){var e=this.props.experiments;return{recalculateGeometry:Boolean((void 0===e?{}:e).directStripeMod),onTrimmerStart:this.onTrimmerStart,onTrimmerChange:this.onTrimmerChange,commercialCropRenderer:this.commercialCropRenderer.bind(this)}},t.prototype.isFullscreenAvailable=function(){return this.wasMounted&&xt&&xt.isEnabled},t.prototype.onImageClick=function(e,t){if(void 0===this.props.commercialCropSelectedIdx){var n=this.getItemParamsByIdx(e),r=n.imgHref||"";t&&t.isMixedImage&&t.origin&&(r=t.origin.url),this.logTechCounter({method:"hitDelayed",__oldCounter__:kt({path:"imgclick",params:{vars:{pos:n.pos,direction:this.state.activeItemIdx-e<0?"next":"prev"}},reqid:n.reqid||""}),node:{href:r}})}},t.prototype.logOpenCounter=function(e){var t=this.getItemParamsByIdx(e),n=t.pos,r=t.reqid;this.logTechCounter({method:"hitDelayed",__oldCounter__:kt({path:"open",params:{vars:{pos:n}},reqid:r||""})})},t.prototype.open=function(e){var t=this;this.triggerBeforeOpenedEvent(),this.props.setCurrentItemIdx(e),this.setState({initialIdx:e,activeItemIdx:e,isVisible:!0},function(){t.viewer.current&&t.viewer.current.switchToItem(e)}),this.logOpenCounter(e),this.triggerOpenedEvent()},t.prototype.renderError=function(){var e=this.props.shownImage,t=e&&e.loadedImage&&!e.loadedImage.data;if(e&&t)return o.a.createElement(Oe,{type:e.snippet.gotoService?"service":"site",url:e.snippet.url})},t.prototype.commercialCropRenderer=function(e){var t,n,r=this.props.experiments,i=void 0===r?{}:r,a=null===(n=null===(t=this.props.shownImage)||void 0===t?void 0:t.thumb)||void 0===n?void 0:n.url;return!a||this.isFullscreenMode||void 0===this.props.commercialCropSelectedIdx?null:o.a.createElement(vt,{visible:!0,shapeSize:"m",className:Nt("Crop"),id:a,showDebugInfo:Boolean(i.commercialCropDebug),fadeParams:{top:0,left:0,width:"100%",height:"100%"},regions:e,activeRegionIndex:this.props.commercialCropSelectedIdx,onShapeClick:this.onCommercialCropShapeClick})},t.prototype.enableEventListeners=function(){this.eventsEnabled||(document.body.addEventListener("dragstart",this.onGlobalDragStart),document.body.addEventListener("dragend",this.onGlobalDragEnd),document.body.addEventListener("wheel",this.onWheel),this.eventsEnabled=!0)},t.prototype.disableEventListeners=function(){this.eventsEnabled&&(document.body.removeEventListener("dragstart",this.onGlobalDragStart),document.body.removeEventListener("dragend",this.onGlobalDragEnd),document.body.removeEventListener("wheel",this.onWheel),this.eventsEnabled=!1)},t.prototype.triggerOpenedEvent=function(){Object(it.a)().emit(Et.a.opened)},t.prototype.triggerBeforeOpenedEvent=function(){Object(it.a)().emit(Et.a.beforeOpened)},t.prototype.renderSidebar=function(){var e=this,t=this.props,n=t.counters,r=t.reqid,i=n.sidebarScrollShow,a=n.sidebarScrollStart,c=n.sidebarScrollEnd,u=this.getActiveItemParams(),d={col:u.col,row:u.row};void 0===u.page||isNaN(u.page)||(d.page=u.page);var f={reqid:r,pos:u.pos};return o.a.createElement(s.ComponentRegistryConsumer,{id:Object(je.a)()},function(t){var n,r=t.MMSidebar;return o.a.createElement(r,{isVisible:e.state.isVisible,addToCollectionsLoginUrl:e.loginUrl,avatarId:null===(n=e.props.config)||void 0===n?void 0:n.avatarId,logNode:{events:{onScrollShow:Object(l.logTech)("scroll-show",Object(me.b)(i,f)),onScrollStart:Object(l.logTech)("scroll-start",Object(me.b)(a,f)),onScrollToBottom:Object(l.logTech)("scroll-end",Object(me.b)(c,f))}},nodeRef:e.sidebarNode,behavioralDirectRef:e.behavioralDirectRef,onTagClick:e.onTagClick,onRelatedItemClick:e.onRelatedItemClick,onLog:e.logTechCounter})})},t.prototype.tryUpdateDirect=function(){this.directStripe.current&&this.directStripe.current.renderDirect(),this.behavioralDirectRef.current&&this.behavioralDirectRef.current.renderDirect()},t.prototype.shouldShowBehaviouralDirectStripe=function(){var e=this.props.directStripeEnabled,t=this.props.config.directStripeParams;return Boolean(e&&t)},t.prototype.onTagClick=function(e,t){2===e.which||e.metaKey||e.ctrlKey||(e.preventDefault(),Object(it.a)().emit("location:change",{url:t}))},t.prototype.getDirectContainerId=function(){var e=this.props.config.directStripeParams;if(null===e||void 0===e?void 0:e.containerId)return null===e||void 0===e?void 0:e.containerId},t.prototype.getDirectStripeId=function(){var e=this.props.config.directStripeParams;return e?this.props.isPornoQuery?e.directIdAdult||"":e.directId:""},t.prototype.renderFooter=function(){var e=this.state.showCbirCrop;return o.a.createElement(o.a.Fragment,null,e&&o.a.createElement(he,{onClose:this.onCbirCropEvent,onSearchClick:this.onCbirCropSearchEvent,target:"_self"}),o.a.createElement("div",{className:Nt("FooterContent",{hidden:e})},this.renderFooterContent()))},t.prototype.renderFooterContent=function(){var e,t,n=this.props.config,r=this.state.directStripeVisible,i=n.directStripeParams,a=void 0===i?{}:i,c=this.getActiveItemParams(),s=this.shouldShowBehaviouralDirectStripe(),u=a.mod,l=this.getDirectStripeId(),d=this.getDirectContainerId(),f=null===(t=null===(e=this.props.shownImage)||void 0===e?void 0:e.thumb)||void 0===t?void 0:t.url,p=this.getSelectedRegion(),h=this.props.config.crocoUrl,m=this.props.lr;return o.a.createElement(o.a.Fragment,null,f&&p&&h&&void 0!==m&&o.a.createElement("div",{className:Nt("CommercialCropProductsContainer"),ref:this.commercialCropProductsContainer},o.a.createElement(jt,{thumbUrl:f,lr:m,iCookieEncrypted:this.props.iCookieEncrypted||"",reqid:this.props.reqid,crocoUrl:h,region:p,onProductsLoaded:this.hitCommercialCropProductsShown,onItemClick:this.hitCommercialCropProductClick})),s&&l&&o.a.createElement("div",{className:Nt("DirectStripeContainer",{mod:u,verticalGallery:!0,visible:Boolean(r||a.height)}),style:{height:a.height||void 0}},o.a.createElement(rt,{directId:l,yandexuid:this.props.yandexuid,text:this.props.query,onClick:this.onDirectStripeClick,onRender:this.onDirectStripeShow,onHide:this.onDirectStripeHide,reqid:c.reqid||"",className:Nt("DirectStripe",{mod:u}),forwardRef:this.directStripe,getUniqId:d?function(e){return function(){return e}}(d):void 0})))},t.prototype.renderLeftSidebar=function(){var e=this,t=this.props.experiments,n=void 0===t?{}:t;return o.a.createElement(s.ComponentRegistryConsumer,{id:Object(je.a)()},function(t){var r=t.Gallery;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Nt("LeftSideblockContent"),ref:e.leftSidebarNode},o.a.createElement(r,{vertical:!0,forwardRef:e.gallery,selectedIdx:e.state.activeItemIdx,onClick:e.onGalleryClick,onScroll:e.onGalleryScroll,items:e.props.items,thumbSize:n.galleryThumbSize,lowThumbMarginsExp:n.lowThumbMarginsExp})))})},t.prototype.previewSave=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:kt({path:"save",params:{vars:{pos:e}},reqid:t.reqid||""})})},t.prototype.onScrollSwitch=function(e){this.viewer.current&&(e>0?this.viewer.current.switchNext(null,"scroll"):this.viewer.current.switchPrev(null,"scroll"))},t.prototype.onWheel=function(e){var t=e.target,n=e.deltaMode,r=e.deltaX,o=e.deltaY,i=this.modal.current;if(!i||i.contains(t)){var a=this.commercialCropProductsContainer.current;if(!a||!a.contains(t)){var c=Math.abs(r)>Math.abs(o)||o?o:r;if(c){n>0&&(c*=16);var s=this.gallery.current&&this.gallery.current.getNode();if(!(s&&s.current&&s.current.contains(t))){var u=this.sidebarNode.current;if(u&&!u.contains(t)){var l=this.leftSidebarNode.current;l&&l.contains(t)||(this.scrollCollector+=c,Math.abs(this.scrollCollector)>=40&&(this.onScrollSwitch(this.scrollCollector>0?1:-1),this.scrollCollector=0))}}}}}},t.prototype.onOpenItem=function(e){if(!(e.activeIdx<0)){this.open(e.activeIdx);var t=this.getItemParamsByIdx(e.activeIdx);this.triggerSelectItemEvent(t,{openedFromSerp:!e.initialLoading&&!e.historyLoading,initialLoading:Boolean(e.initialLoading),historyLoading:Boolean(e.historyLoading)})}},t.prototype.onNewItemSelected=function(e){var t=this;this.props.setCurrentItemIdx(e),this.state.showCbirCrop&&this.cbirCropClose(),this.state.activeItemIdx!==e&&this.setState({activeItemIdx:e},function(){var e=t.getActiveItemParams();t.triggerSelectItemEvent(e)})},t.prototype.triggerSelectItemEvent=function(e,t){e&&Object(it.a)().emit(Et.a.selectItem,{itemParams:e,initialLoading:Boolean(t&&t.initialLoading),historyLoading:Boolean(t&&t.openedFromSerp),openedFromSerp:Boolean(t&&t.openedFromSerp)})},t.prototype.onGalleryScrollCounter=function(){Object(Ce.a)("/image/new/preview/gallery/scroll")},t.prototype.onGalleryScroll=function(){this.onGalleryScrollCounter(),this.loadNextPageIfNeeded()},t.prototype.onFullscreenEnter=function(){this.isFullscreenMode=!0,this.hitFullscreenCounter("open"),Object(it.a)().emit(Et.a.fullscreenEnter)},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.hitFullscreenCounter("close"),Object(it.a)().emit(Et.a.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/site")},t.prototype.onFullscreenDomainClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/duplicates/url")},t.prototype.onFullscreenTitleDomainClick=function(e){var t=this.props.reqid,n=this.getActiveItemParams(),r=n.isMarketIncut,o=n.pos,i=n.commercialSource,a=n.snippet,c=r?"/commercial/"+i:"";this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:""+e+c,pos:c?o:"",vars:{pos:o},reqid:n.reqid||t||""},node:{href:a.url}})},t.prototype.onFullscreenStartAutoplay=function(){this.hitSlideshowCounter("play")},t.prototype.onFullscreenStopAutoplay=function(){this.hitSlideshowCounter("stop")},t.prototype.onGlobalDragStart=function(e){var t=e.target;t&&("IMG"===t.tagName||t.firstElementChild&&"IMG"===t.firstElementChild.tagName)?this.setState({globalDragging:!0}):(e.stopPropagation(),e.preventDefault())},t.prototype.onGlobalDragEnd=function(){this.setState({globalDragging:!1})},t.prototype.onTrimmerStart=function(e){this.hitTrimmerCounter("",{},{href:e})},t.prototype.onTrimmerChange=function(e,t,n){var r={crop:encodeURIComponent([e.point1.x,e.point1.y,e.point2.x,e.point2.y].join(";"))};this.hitTrimmerCounter(t,r,{href:n})},t.prototype.hitFullscreenCounter=function(e){var t=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/fullscreen/"+e,reqid:t.reqid||""}})},t.prototype.hitSlideshowCounter=function(e){var t=this.getActiveItemParams(),n={};t&&(n.pos=t.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:n,path:"/image/new/preview/slideshow/"+e,reqid:t.reqid||""}})},t.prototype.hitTrimmerCounter=function(e,t,n){var r=this.getActiveItemParams(),o=Pt({},t||{});r&&(o.pos=r.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:o,path:"/image/new/preview/similar"+(e?"/"+e:""),reqid:r.reqid||""},node:n})},t.prototype.loadNextPageIfNeeded=function(){if(this.gallery.current){var e=this.gallery.current.getScrollPosition();if(e)e.rightEdgeOffset<e.currentPosition+this.galleryItemsLoadEventOffset&&Object(it.a)().emit(Et.a.listOut)}},t.prototype.getActiveItemParams=function(){return this.getItemParamsByIdx(this.state.activeItemIdx)},t.prototype.getItemParamsByIdx=function(e){return this.props.items[e]||{}},t.prototype.onRelatedItemClick=function(e,t){if(this.props.rimSelectedIdx!==e){var n=this.getActiveItemParams(),r=Pt(Pt({},t),{isRim:!0,parentPos:n&&n.pos});Object(it.a)().emit(Et.a.rimClick,r)}},t.prototype.logTechCounter=function(e){e&&this.props.logTech&&this.props.logTech(e)},t.prototype.sendPrevCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"prev",n)},t.prototype.sendNextCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"next",n)},t.prototype.sendDirectionCounter=function(e,t,n){var r,o=this.getItemParamsByIdx(e);if(o&&e!==this.state.activeItemIdx){this.isFullscreenMode&&!n&&(n="slideshow");var i=o.preview,a=o.isMarketIncut,c=o.commercialSource||"market",s=a?"/commercial/"+c:"",u=a?"commercial/"+c:o.freshness,l={pos:o.pos};if("keyboard"===n||"slideshow"===n)return l.direction=t,void this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+n+"/"+u,pos:o.pos,vars:l,reqid:o.reqid},node:{href:i[0].url}});"string"===typeof n&&(l.event=n),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/"+t+"/mouse"+s,vars:l,reqid:o.reqid},node:{href:null===(r=null===i||void 0===i?void 0:i[0])||void 0===r?void 0:r.url}})}},t.prototype.onCbirCropEvent=function(e){e.target.classList.contains("CropObjectsItem-Point")||(this.state.showCbirCrop&&this.hitTrimmerCounter("cancel"),Object(it.a)().emit(Et.a.cbirCrop),this.setState({showCbirCrop:!this.state.showCbirCrop}),e.stopPropagation())},t.prototype.onCbirCropSearchEvent=function(e){e.preventDefault(),this.hitTrimmerCounter("crop"),Object(it.a)().emit("location:change",{url:e.currentTarget.href})},t.prototype.cbirCropClose=function(){this.setState({showCbirCrop:!1})},t.prototype.onCloseEventKeyboard=function(e){this.isFullscreenMode||this.onCloseEvent("keyboard",e)},t.prototype.onCloseEvent=function(){var e,t,n=It(arguments,2),r=n[0],o=n[1],i=this.getActiveItemParams();if("keyboard"===r){if(void 0!==this.props.commercialCropSelectedIdx)return null===(t=(e=this.props).commercialCropSetSelectedIdx)||void 0===t||t.call(e,void 0),void this.hitCommercialCropCancel();if(this.state.showCbirCrop)return void this.onCbirCropEvent(o)}if(this.state.isVisible&&(Object(it.a)().emit(Et.a.beforeClosed,{source:r}),this.setState({isVisible:!1,activeItemIdx:-1}),this.state.showCbirCrop&&this.cbirCropClose(),Object(it.a)().emit(Et.a.closed),"mouse"===r||"keyboard"===r||"paranja"===r)){var a={place:r};"paranja"===r&&(a.x=o.clientX,a.y=o.clientY,a.screenW=window.innerWidth,a.screenH=window.innerHeight),this.logTechCounter({method:"hitDelayed",__oldCounter__:kt({path:"close",params:{vars:a},reqid:i.reqid||""})})}},t.prototype.onPreviewShowEvent=function(e,t){},t.prototype.onGalleryClick=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+t.counterPath,pos:e,vars:{click_source:"preview"},reqid:t.reqid},node:{href:t.imgHref}}),this.viewer.current&&this.viewer.current.switchToItem(e)},t.prototype.onDirectStripeShow=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/show/direct",vars:{type:"stripe",page:e.page,pos:e.pos,row:e.row,col:e.col},reqid:e.reqid||""}}),this.setState({directStripeVisible:!0}),this.forceUpdate()},t.prototype.onDirectStripeClick=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/click/direct",vars:{type:"stripe",pos:e.pos,row:e.row,col:e.col,page:e.page},reqid:e.reqid||""}})},t.prototype.onDirectStripeHide=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/hide/direct",vars:{type:"stripe",pos:e.pos,row:e.row,col:e.col,page:e.page},reqid:e.reqid||""}}),this.setState({directStripeVisible:!1})},t.prototype.getSelectedRegion=function(){var e,t=this.props.commercialCropSelectedIdx;if(void 0!==t)return null===(e=this.props.commercialCropRegions)||void 0===e?void 0:e[t]},t.prototype.onCommercialCropControlClick=function(e){var t,n,r;e.stopPropagation(),e.preventDefault(),r=void 0===this.props.commercialCropSelectedIdx?0:void 0,this.hitCommercialCropControlClick(),null===(n=(t=this.props).commercialCropSetSelectedIdx)||void 0===n||n.call(t,r)},t.prototype.onCommercialSceneViewClick=function(e){var t,n;e.stopPropagation(),e.preventDefault(),null===(n=(t=this.props).commercialCropSetSelectedIdx)||void 0===n||n.call(t,void 0),this.hitCommercialCropOverlayClick()},t.prototype.onCommercialCropShapeClick=function(e,t){var n,r;e.stopPropagation(),e.preventDefault(),void 0!==t&&this.hitCommercialCropShapeClick(t),null===(r=(n=this.props).commercialCropSetSelectedIdx)||void 0===r||r.call(n,t)},t.prototype.hitCommercialCropCounter=function(e){var t=e.path,n=e.href,r=e.dtype,o=void 0===r?"iweb":r,i=e.vars,a=void 0===i?{}:i,c=this.props.counters.commercialCropFeaturePath,s=this.props.shownImage;s&&(a.pos=s.pos,a.id=s.thumb.url,Object(Ce.a)(c+"/"+t,{reqid:s.reqid,dtype:o,vars:a,href:n}))},t.prototype.hitCommercialCropShown=function(){this.hitCommercialCropCounter({path:"show",dtype:"stred"})},t.prototype.hitCommercialCropRegionShown=function(){var e=this.props,t=e.commercialCropSelectedIdx,n=e.commercialCropRegions;if(void 0!==t&&(null===n||void 0===n?void 0:n.length)){var r=n[t];this.hitCommercialCropCounter({path:"region",dtype:"stred",vars:{index:t,region:r.x0+":"+r.y0+":"+r.x1+":"+r.y1+":"+r.t}})}},t.prototype.hitCommercialCropProductsShown=function(e){var t=e.products,n=this.props.commercialCropSelectedIdx;void 0!==n&&this.hitCommercialCropCounter({path:"carousel",dtype:"stred",vars:{index:n,products:t.map(function(e,t){return t+":"+e.source+":"+e.modelId+":"+e.offerId+":"+e.schemaorgId+":"+encodeURIComponent(e.url)}).join(";")}})},t.prototype.hitCommercialCropControlClick=function(){this.hitCommercialCropCounter({path:"switch",vars:{visible:void 0===this.props.commercialCropSelectedIdx?"yes":"no"}})},t.prototype.hitCommercialCropProductClick=function(e,t){var n=t.product,r=t.pos;this.hitCommercialCropCounter({path:"product",vars:{index:r,source:n.source,"schemaorg-id":n.schemaorgId,"model-id":n.modelId,"offer-id":n.offerId,"shop-domain":n.shopDomain,"action-type":"greenurl","click-source":"crop","data-source":n.source},href:n.url})},t.prototype.hitCommercialCropOverlayClick=function(){this.hitCommercialCropCounter({path:"overlay",vars:{visible:"yes"}})},t.prototype.hitCommercialCropCancel=function(){this.hitCommercialCropCounter({path:"cancel",vars:{visible:"yes"}})},t.prototype.hitCommercialCropShapeClick=function(e){this.hitCommercialCropCounter({path:"point",vars:{index:e}})},t}(o.a.Component)},,,function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(1068),a=n(3),c=(n(604),Object(a.cn)("CropWithShadow")),s=function(e){var t=e.className,n=e.size,r=e.position;return o.a.createElement("div",{className:c(null,[t]),style:{width:n.width,height:n.height,top:r.top,left:r.left}})},u=Object(a.cn)("CommercialCrop"),l=(n(605),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),d=function(e){var t=e.className,n=e.id,a=e.regionClassName,c=e.fadeParams,d=e.region,f=e.showDebugInfo,p=e.children,h=e.onClick,m=l(Object(i.a)(),2)[1],v=Object(r.useCallback)(function(e){e.stopPropagation(),m(JSON.stringify([n,d]))},[n,d,m]);return o.a.createElement("div",{className:u(null,[t]),onClick:h},o.a.createElement("div",{className:u("Crop"),style:{left:c.left,top:c.top,width:c.width,height:c.height}},d&&o.a.createElement(s,{className:u("Shadow",[a]),position:{top:(100*d.y0).toFixed(2)+"%",left:(100*d.x0).toFixed(2)+"%"},size:{width:(100*(d.x1-d.x0)).toFixed(2)+"%",height:(100*(d.y1-d.y0)).toFixed(2)+"%"}}),p),f&&d&&o.a.createElement("div",{className:u("DebugInfo"),onClick:v},"bbox: "+d.x0+"x"+d.y0+":"+d.x1+"x"+d.y1+" type: "+d.t+"  thumb: "+n))}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n.n(r),i=n(2),a=n(103),c=n(206),s=(n(603),function(e){var t=e.className,n=e.id,r=e.x,s=e.y,u=e.active,l=e.size,d=e.onClick,f=Object(a.a)(d,n),p=Object(i.useComponentRegistry)(Object(c.a)()).CropMarkerShape;return o.a.createElement(p,{className:Object(c.a)({pos:n+1,active:u,size:l},[t]),x:r,y:s,hidden:!1,active:u,onClick:f})})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n.n(r),i=n(2),a=n(298),c=n(414),s=n(153),u=(n(607),function(e){var t=e.className,n=e.id,r=e.visible,u=e.fadeParams,l=e.regions,d=e.activeRegionIndex,f=e.shapeSize,p=e.showDebugInfo,h=e.onClick,m=e.onShapeClick,v=Object(i.useComponentRegistry)(Object(s.a)()).CommercialCropShape;return o.a.createElement(a.a,{in:r,timeout:150,mountOnEnter:!0,unmountOnExit:!0,classNames:Object(s.a)("Crop")},o.a.createElement(c.CommercialCrop,{className:Object(s.a)("Crop",[t]),id:n,showDebugInfo:p,fadeParams:u,region:l[d],regionClassName:Object(s.a)("Region"),onClick:h},l.length>1&&l.map(function(e,t){return o.a.createElement(v,{size:f,key:t,id:t,x:e.cx,y:e.cy,active:t===d,onClick:m})})))})},function(e,t,n){"use strict";var r=n(411);n.d(t,"CommercialCrop",function(){return r.a});n(410)},function(e,t,n){"use strict";var r=n(606),o="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,i,a,c,s,u,l=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),c=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(n){n.stopPropagation(),t.format&&(n.preventDefault(),n.clipboardData.clearData(),n.clipboardData.setData(t.format,e))}),document.body.appendChild(u),c.selectNodeContents(u),s.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),l=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:o),window.prompt(i,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(c):s.removeAllRanges()),u&&document.body.removeChild(u),a()}return l}},function(e,t,n){"use strict";function r(e,t){for(var n=t.rowWidth,r=[],c=0,s=i(),u=i(),l=0,d=t.increaseVerticalHeight,f=t.increaseVerticalImagesThreshold,p=t.rowsNumber,h=0,m=e.length;h<m;h++){var v=e[h];if(void 0!==p&&c===p)break;var b=!1;if(s.items.push(v),s.width+=v.width+t.marginRight,d&&f){var g={};g.isVertical=v.isVertical=v.height>v.width,g.width=v.width*d,g.height=v.height*d,u.items.push(g),u.width+=g.width+t.marginRight,g.isVertical&&(l+=g.width),o(u,n)&&l>f*u.width&&(s.isVertical=!0,s.width=u.width,s.items.forEach(function(e,t){var n=u.items[t],r=n.width,o=n.height;e.width=r,e.height=o}),b=!0)}(b||o(s,n,0))&&(Array.prototype.push.apply(r,a(s,t).items),r[r.length-1].isLast=!0,s=i(),u=i(),l=0,c++)}return r}function o(e,t,n){var r=t*("number"===typeof n&&n>=0?n:.15);return 1===e.items.length?e.items[0].width-t>=r:e.width+r>=t}function i(){return{width:0,items:[]}}function a(e,t){var n=t.increaseVerticalHeight,r=e.items,o=r.length,i=t.baseRowHeight;e.isVertical&&n&&(i*=n);for(var a=o*t.marginRight,c=e.width-a,s=(t.rowWidth-a)/c,u=Math.round(i*s),l=0,d=0;d<o;d++){var f=r[d];f.newWidth=Math.round(f.width*s),f.newHeight=Math.ceil(f.height*s),f.rowHeight=u,l+=f.newWidth}return function(e,t,n){for(var r=t,o=0;r<n;o++)(i=e.items[o])&&i.newWidth&&(i.newWidth++,r++);for(o=0;r>n;o++){var i;(i=e.items[o])&&i.newWidth&&(i.newWidth--,r--)}}(e,l+=a,t.rowWidth),e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return B});var r=n(0),o=n.n(r),i=n(253),a=n(5),c=n.n(a),s=(n(357),n(2)),u=n(361),l=(n(358),n(360)),d=n(740),f=n(55),p=n(612),h=n(47),m=n(29),v=new s.Registry({id:Object(m.a)()}),b=d.a,g=f.a,y=Object(p.a)(h.a);v.set("Link",b),v.set("Price",g),v.set("MarketLogoIcon",y);var O=Object(s.withRegistry)(v)(l.a),w=n(113),C=new s.Registry({id:Object(w.a)()}),j=O;C.set("CommercialProduct",j);var E=Object(s.withRegistry)(C)(u.a),S=n(30),k=n(202),_=n(176),P=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function I(e){var t=e.url,n=e.lr,r=e.imageId,o=e.region,i=e.iCookieEncrypted,a=e.reqid;return new Promise(function(e,c){Object(S.get)(t,{queryParams:{lr:n,url:r,crop:o.x0+";"+o.y0+";"+o.x1+";"+o.y1,bbox_type:o.t},format:"json",credentials:"same-origin"},{successCallback:function(t,n){var r=t.status,s=t.data,u=void 0===s?[]:s,l=n.responseURL;u.length>0?e({region:o,products:u.map(function(e){return function(e,t){var n=e.title,r=e.image,o=e.url,i=e.punycode,a=e.page_url,c=e.shop_domain,s=e.schemaorg_id,u=e.model_id,l=e.offer_id,d=e.is_schemaorg,f=e.price,p=e.currency,h=t.iCookieEncrypted,m=t.reqid,v=d?"schemaorg":"market";return"schemaorg"===v&&a&&Object(_.a)(a,{checkPokupki:"no"})&&(v="market"),"market"===v&&a&&Object(_.a)(a,{checkPokupki:"only"})&&(v="market-cpa"),{url:Object(_.a)(o)?Object(k.a)(o,{iCookieEncrypted:h,reqid:m,srcPofSource:"crop"}):o,source:v,title:n,image:r,price:f,currency:p,punycode:i,shopDomain:c,schemaorgId:s,modelId:u,offerId:l}}(e,{iCookieEncrypted:i,reqid:a})})}):c({region:o,status:r+":no-data",url:l})},failureCallback:function(e,t){var n=t.responseURL;return c({region:o,status:e,url:n})}})})}var x=n(3),R=Object(x.cn)("CommercialCropProducts"),N=n(614),M=(n(602),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),T=c()(N),L=T("Проверьте соединение с интернетом",{context:"Текст ошибки при потере интернет соединения"}),D=T("Не удалось получить результаты",{context:"Текст ошибки при потере интернет соединения"}),B=function(e){var t=e.className,n=e.productClassName,a=e.errorClassName,c=e.region,s=e.thumbUrl,u=e.crocoUrl,l=e.lr,d=e.iCookieEncrypted,f=e.reqid,p=e.onThumbError,h=e.onItemClick,m=e.onProductsLoading,v=e.onProductsLoaded,b=e.onProductsLoadingError,g=M(Object(r.useState)([]),2),y=g[0],O=g[1],w=M(Object(r.useState)(""),2),C=w[0],j=w[1],S=Object(i.a)(c),k=Object(r.useCallback)(function(e){return S.current===e.region&&(O(e.products),null===v||void 0===v||v(e),!0)},[S,v]),_=Object(r.useCallback)(function(e){if(S.current===e.region){var t="success:no-data"===e.status;null===b||void 0===b||b(e),O([]),j(t?D:L)}},[S,b]),x=M(function(e){var t=e.url,n=e.lr,o=e.onSuccess,i=e.onFail,a=e.iCookieEncrypted,c=e.reqid,s=Object(r.useRef)({}),u=P(Object(r.useState)(!1),2),l=u[0],d=u[1],f=Object(r.useCallback)(function(e){o(e)&&d(!1)},[o]),p=Object(r.useCallback)(function(e){i(e),d(!1)},[i]),h=Object(r.useCallback)(function(e){var r=e.imageId,o=e.region;d(!0);var i=""+r+o.x0+o.x1+o.y0+o.y1+o.t;s.current[i]||(s.current[i]=I({url:t,lr:n,imageId:r,region:o,iCookieEncrypted:a,reqid:c})),s.current[i].then(f,function(e){"success:no-data"!==e.status&&delete s.current[i],p(e)})},[t,n,f,p]);return Object(r.useEffect)(function(){s.current={}},[t]),[l,h]}({url:u,lr:l,iCookieEncrypted:d,reqid:f,onSuccess:k,onFail:_}),2),N=x[0],T=x[1];return Object(r.useEffect)(function(){c&&(O([]),j(""),T({imageId:s,region:c}),null===m||void 0===m||m())},[T,m,c,s]),o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{className:R(null,[t]),productClassName:R("Product",[n]),products:y,progress:N,skeletonCount:10,onThumbError:p,onProductClick:h}),C&&o.a.createElement("div",{className:R("Error",[a])},o.a.createElement("span",{className:R("ErrorText")},C)))}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n.n(r),i=n(253),a=n(2),c=n(3),s=Object(c.cn)("Iframe"),u=function(e){var t=e.url,n=e.onMessage,i=e.className,a=e.height,c=e.apiRef,u=Object(r.useRef)(null);Object(r.useImperativeHandle)(c,function(){return{sendMessage:function(e){var t,n=null===(t=u.current)||void 0===t?void 0:t.contentWindow;n&&n.postMessage(e,"*")}}},[]);var l=Object(r.useCallback)(function(e){var t,r=null===(t=u.current)||void 0===t?void 0:t.contentWindow;r&&e.source===r&&n(e.data)},[n]);return Object(r.useEffect)(function(){return window.addEventListener("message",l),function(){window.removeEventListener("message",l)}},[l]),o.a.createElement("iframe",{className:s({},[i]),ref:u,src:t,height:a})},l=n(140);var d=n(132),f=(n(610),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),p=function(e){var t=e.className,n=e.visible,c=e.urlPath,s=e.offerId,p=e.lr,h=e.purchaseReferrer,m=e.clid,v=e.srcPof,b=e.onShow,g=e.onReady,y=e.onClose,O=e.onChangeCount,w=Object(a.useComponentRegistry)(Object(d.b)()).Spin,C=f(Object(r.useState)(d.a),2),j=C[0],E=C[1],S=f(Object(r.useState)(!1),2),k=S[0],_=S[1],P=Object(i.a)(s),I=Object(r.useRef)(null),x=Object(r.useCallback)(function(e){_(!0),null===b||void 0===b||b({offerId:e})},[b]),R=Object(r.useCallback)(function(){null===y||void 0===y||y({offerId:P.current||""})},[P,y]),N=Object(r.useCallback)(function(e){I.current&&e.offerId===P.current&&I.current.sendMessage({event:"addToCart",params:e})},[P]),M=Object(r.useCallback)(function(e){var t=P.current;if(t)switch(e.event){case"ready":N({offerId:t}),null===g||void 0===g||g({offerId:t});break;case"fail":null===O||void 0===O||O({offerId:t,goodsCount:-1,count:0});break;case"closeMe":R();break;case"updateHeight":E(e.params.height),x(t);break;case"changeCount":if(e.params.offerId!==t)break;null===O||void 0===O||O({offerId:e.params.offerId,goodsCount:e.params.diffValue,count:e.params.actualCount})}},[P,N,g,x,R,O]);return Object(r.useEffect)(function(){n&&P.current&&(E(d.a),_(!1))},[n,P,b]),o.a.createElement(o.a.Fragment,null,!k&&o.a.createElement(w,{className:Object(d.b)("Spin"),progress:!0,position:"center",size:"l",view:"default"}),s&&h&&o.a.createElement(u,{className:Object(d.b)("Iframe",{visible:k},[t]),url:function(e,t){var n=t.offerId,r=t.clid,o=t.srcPof,i=t.purchaseReferrer,a=t.lr;return Object(l.a)(e,{offerId:n,lr:a,clid:r,src_pof:o,"purchase-referrer":i})}(c,{offerId:s,lr:p,purchaseReferrer:h,clid:m,srcPof:v}),apiRef:I,height:j,onMessage:M}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r,o=n(0),i=n.n(o),a=n(1070),c=n(56),s=n(207),u=n(3),l=Object(u.cn)("FlexLineExpandable"),d=(n(608),function(e){var t=e.margin,n=e.width,r=e.onClick,o=e.children;return i.a.createElement("div",{className:l("Item"),style:{marginLeft:t,marginTop:t,width:n,maxWidth:"calc(100% - "+t+"px)"},onClick:r},o)}),f=(n(609),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a});!function(e){e.calculating="calculating",e.fold="fold",e.expanded="expanded"}(r||(r={}));var p=function(e){var t=e.className,n=e.items,u=e.more,p=e.margin,m=e.itemMinWidth,v=e.lines,b=void 0===v?1:v,g=e.onExpand,y=f(Object(o.useState)({capacity:n.length}),2),O=y[0],w=y[1],C=f(Object(c.a)(!1),3),j=C[0],E=C[1],S=C[2],k=Object(o.useRef)(),_=f(Object(a.a)(),2),P=_[0],I=function(e,t,n){var o=e.items,i=e.more,a=e.margin,c=e.itemMinWidth,u=e.lines,l=r.fold;return Object(s.a)(function(){return l=r.calculating},[]),Object(s.a)(function(){return l=r.calculating},[o,i,a,c,u]),Object(s.a)(function(){return l=r.calculating},[n]),Object(s.a)(function(){return t=!1},[o]),t?r.expanded:l}(e,j,_[1].width),x=Object(o.useCallback)(function(e){k.current=e,P(e)},[P]),R=Object(o.useCallback)(function(){null===g||void 0===g||g(n.length-O.capacity),E()},[g,n,E,O]);Object(o.useLayoutEffect)(function(){var e=k.current;if(e&&I===r.calculating){var t=function(e,t,n,r){var o=e.children,i=o&&o[o.length-1],a=o.length-1,c=h(e)-t;if(!i||!o||c<=0)return;for(var s=h(i)+t,u=1,l=-t,d=0;d<a;d++){var f=o[d],p=h(f),m=l+t+p,v=d===a-1,b=u===r;if(b){if(v&&m<=c)return{capacity:a};var g=c-m-s;if(g<0){var y=void 0;return g+p>=n&&(y=Math.floor(g+p)),{capacity:d+(y?1:0),lastWidth:y}}l+=t+p}else{if(v)return{capacity:a};var O=c-m;O>=0?l+=t+p:(u++,l=-t,d--)}}return{capacity:a}}(e,p,m,b);t&&(w(t),S())}});var N=I===r.fold?O.capacity:n.length,M=O.capacity===n.length&&!O.lastWidth;return i.a.createElement("div",{className:l({state:I},[t]),style:{marginLeft:-p,marginTop:-p},ref:x},o.Children.map(n.slice(0,N),function(e,t){return i.a.createElement(d,{margin:p,width:t===N-1&&I===r.fold?O.lastWidth:void 0},e)}),I===r.calculating||I===r.fold&&!M?i.a.createElement(d,{margin:p,onClick:R},u):null)};function h(e){return e.getBoundingClientRect().width}},function(e,t,n){"use strict";n.d(t,"b",function(){return o.b}),n.d(t,"a",function(){return c});var r=n(2),o=n(32),i=n(195),a=new r.Registry({id:Object(o.b)()});a.set("Tail",i.a);var c=Object(r.withRegistry)(a)(o.a)},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n(556),n(557),n(558),n(559),n(560),n(561)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(243),Object(r.withBemMod)(Object(o.b)(),{pin:"circle-circle"}))},function(e,t,n){"use strict";function r(e){if(e.globalContext.isQueryPorn){var t=e.config.directStripeParams;return Boolean(t&&t.directIdAdult)}return!0}n.d(t,"a",function(){return r})},,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(String(e[t]))}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyUrlParams=r,t.appendQueryString=function(e,t){var n=r(t);return 0===n.length?e:e.indexOf("?")>-1?e+"&"+n:e+"?"+n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(313);t.shouldSendCredentials=function(e,t){return!(!t||"omit"===t)&&("include"===t||r.getOrigin(e)===r.getOrigin(window.location))}},function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(0),o=n.n(r),i=n(5),a=n.n(i),c=n(148),s=n(58),u=n(1),l=n(15),d=n(462),f=n(359),p=n(42),h=n(356),m=(n(691),function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),v=Object(c.a)(s.a),b=Object(u.compose)(Object(u.composeU)(d.withGlyphTypeArrow))(l.a),g=a()(h),y=function(e){var t=e.onClick,n=e.unfolded,r=e.hiddenOffersCount,i=g("Свернуть",{context:"Свернуть текст"}),a=g("Еще {count} предложение",{one:"Еще {count} предложение",some:"Еще {count} предложения",many:"Еще {count} предложений",context:'Количество товаров скрытых за кнопкой "показать еще"',count:r});return o.a.createElement(v,{onClick:t,className:Object(p.b)("FoldMore"),theme:"normal"},n?i:a,o.a.createElement(b,{glyph:"type-arrow",size:"s",direction:n?"top":"bottom",className:Object(p.b)("FoldIcon")}))},O=function(e){var t=e.children,n=e.collapsedItemsCount,i=e.itemHeight,a=t.length-n,c=Object(r.useCallback)(function(e){return a<=0?null:o.a.createElement(y,m({hiddenOffersCount:a},e))},[a]);return o.a.createElement(f.a,m({},e,{visibleHeight:n*i,renderMoreBtn:c}),e.children)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n.n(r),i=n(3),a=(n(681),Object(i.cn)("DiscountBadge")),c=function(e){var t=e.currentPrice,n=e.className,i=e.oldPrice,c=e.size,s=void 0===c?"s":c,u=Object(r.useMemo)(function(){return function(e,t){return Math.round((t-e)/t*100)}(t,i)},[t,i]);return u<0?null:o.a.createElement("div",{className:a({size:s},[n])},"-",u,"%")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withGlyphTypeArrow=void 0;var r=n(4),o=r.__importDefault(n(0)),i=n(1),a=n(404);n(692),n(693),t.withGlyphTypeArrow=i.withBemMod(a.cnIcon(),{glyph:"type-arrow"},function(e){return function(t){var n=t.className,i=r.__rest(t,["className"]);return o.default.createElement(e,r.__assign({},i,{className:a.cnIcon({hasGlyph:!0},[n])}),"xs"===i.size?o.default.createElement("svg",{focusable:"false",width:"11",height:"7",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("path",{d:"M9.25 1L5.5 4.6 1.75 1 1 1.72 5.5 6 10 1.72 9.25 1z"})):o.default.createElement("svg",{focusable:"false",width:"13",height:"8",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("path",{d:"M11.3 1L6.5 5.7 1.7 1l-.7.7L6.5 7 12 1.7l-.7-.7z"})))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(5),i=n.n(o),a=n(2),c=n(42),s=n(356),u=(n(694),i()(s)),l=function(e){var t=e.className,n=e.url,o=e.domain,i=e.source,s=e.price,l=e.isMarketPlace,d=e.currency,f=void 0===d?"RUR":d,p=e.favicon,h=e.logNode,m=e.onClick,v=e.onShow,b=Object(a.useComponentRegistry)(c.d),g=b.Link,y=b.Path,O=b.Favicon,w=b.ShopRating,C=b.Price,j=b.Icon;r.useEffect(function(){v&&v()},[n,v]);var E,S=r.useMemo(function(){return[{text:l?u("Яндекс.Маркет",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}):o}]},[l,o]),k=null;return"market"!==e.source||l||(k=e.shopRating),l?E=r.createElement(j,{className:c.i}):p&&(E=r.createElement(O,{className:c.f,favicon:p})),r.createElement(g,{className:Object(c.b)("Offer",{type:i},[t]),theme:"normal",url:n,logNode:h,onClick:m},r.createElement("div",{className:c.h},r.createElement(y,{className:c.g,favicon:E,items:S,boldCount:0}),k?r.createElement(w,{type:"market",className:c.k,value:k}):null),r.createElement("div",{className:c.e},s?r.createElement(C,{className:c.j,value:s,currency:f,groupLength:3}):null))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(42),i=(n(695),Object(r.withBemMod)(o.d,{view:"line"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(2),i=n(42),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){var t=e.className,n=e.children,c=e.onShow,s=e.offers,u=void 0===s?[]:s,l=e.collapsedItemsCount,d=void 0===l?i.a:l,f=e.fold,p=e.counters,h=e.onClick,m=Object(o.useComponentRegistry)(i.c),v=m.OtherOffersFold,b=m.Offer,g=r.useMemo(function(){return u.reduce(function(e,t){return e+t.url},"")},[u]);r.useEffect(function(){c&&c()},[c,g]);var y=r.useMemo(function(){return u.map(function(e){return e.url}).join("_")},[u]),O=r.useMemo(function(){return u.length&&h?u.map(function(e){return function(){return null===h||void 0===h?void 0:h(e)}}):[]},[u,h]);return f||u.length?r.createElement("div",{className:Object(i.b)(null,[t])},f?r.createElement(v,{key:y,counters:null===p||void 0===p?void 0:p.fold,collapsedItemsCount:d,itemHeight:27},u.map(function(e,t){return r.createElement(b,a({key:t,view:"line",counters:null===p||void 0===p?void 0:p.offer,onClick:O[t]},e))})):n):null}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(696),n(697);var r={color:"yandex-default",root:"legacy"}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),o=n(15),i=n(5),a=n.n(i),c=n(1),s=(n(683),Object(c.withBemMod)(Object(o.b)(),{type:"plus"})),u=n(118),l=n(3),d=Object(l.cn)("Cashback"),f=n(700),p=(n(682),a()(f)),h=s(o.a),m=function(e){var t=e.className,n=e.value,o=e.pointsVisible,i=void 0===o||o,a=Object(u.b)(Math.floor(n)," ",3),c=p("{count} балл",{one:"{count} балл",some:"{count} балла",many:"{count} баллов",context:"Количество кешбек баллов Плюса при покупке",count:a});return r.createElement("div",{className:d(null,[t])},r.createElement(h,{className:d("Icon"),type:"plus",size:"m"}),i?c:a)}},,function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"c",function(){return x}),n.d(t,"a",function(){return R});var r=n(0),o=n(5),i=n.n(o),a=n(1),c=n(2),s=n(6),u=n(46),l=n(317),d=n(161),f=n(28),p=(n(901),n(106)),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function m(e){return r.createElement(p.b,h({size:p.a.s},e))}var v=n(416),b=n(330),g=(n(725),Object(s.withBaobab)({name:"item"})(function(e){var t=e.selected,n=e.onClick,o=e.style,i=e.src,a=e.title,c=void 0===a?"":a;return r.createElement("div",{className:Object(b.a)("Item",{selected:t}),onClick:n,style:o},r.createElement("img",{src:i,className:Object(b.a)("Image"),alt:c}))})),y=n(167),O=new c.Registry({id:Object(y.a)()});O.set("MMTiledImages",function(e){var t=e.items,n=e.selectedItemIdx,o=e.onClick,i=e.clickedCounter,a=e.className,c=e.counterParams,u=e.incutStart,l=e.incutStep,d=e.incutRenderer,p=e.style,h=0;return r.createElement("div",{className:Object(b.a)(void 0,[a]),style:p},t.reduce(function(e,t,a){var p=c&&c.vars,m=t.thumb.url,v={},b=a===n;if(t.newWidth&&(v.width=t.newWidth+"px"),t.newHeight&&(v.height=t.newHeight+"px",t.rowHeight&&t.rowHeight>t.newHeight&&(v.paddingTop=Math.round((t.rowHeight-t.newHeight)/2)+"px")),e.push(r.createElement(g,{key:m,src:m,style:v,logNode:{events:{onClick:b?void 0:Object(s.logClick)(Object(f.b)(i,{"rim-idx":a,rim_index:a,rim_id:t.rimid,pos:null===p||void 0===p?void 0:p.pos}))}},selected:b,onClick:o&&o.bind(void 0,a,t)})),t.isLast&&(h++,void 0!==u&&void 0!==l&&void 0!==d)){var y=h-u;y>=0&&y%l===0&&e.push(d(h,y/l))}return e},[]))});var w=n(916),C=(n(900),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},S=i()(w),k=function(e,t){void 0===t&&(t=0);var n=[],r=e.length;if(r>0)for(var o=t;o<r;o++){var i=e[o],a=i.preview[0]||i.dups[0],c=a.origin&&a.origin.url||a.url;c&&n.push(i.id+":"+encodeURIComponent(c))}return n},_=function(e){var t=e.relatedImages,n=e.counterParams,r=k(t),o=n&&n.vars,i=j({},o);return r.length&&(i.images=r.join(";")),i},P=function(e,t){var n=e.relatedImages,r=e.counterParams,o=n.length,i=r&&r.vars,a=j({},i);if(e.selectedRimIdx&&(a.rim_id=e.rimid,a.rim_index=e.selectedRimIdx),o>t){var c=k(n,t);c.length&&(a.images=c.join(";"))}return a},I=function(e){function t(t){var n=e.call(this,t)||this;return n.shownCount=0,n.prevShownCount=0,n.fittedItems=[],n.setDefaults(),n.justifierConfig={rowWidth:n.getSideblockWidth(),baseRowHeight:t.baseRowHeight||150,marginRight:5,minImageWidth:70},n.onClick=n.onClick.bind(n),n}return C(t,e),t.prototype.getSideblockWidth=function(){return this.props.sideblockWidth?this.props.sideblockWidth-21:319},t.prototype.componentDidMount=function(){this.handlePageLoad()},t.prototype.componentDidUpdate=function(){this.handlePageLoad()},t.prototype.handlePageLoad=function(){this.shownCount>this.prevShownCount&&this.props.onPageLoaded&&this.props.onPageLoaded()},t.prototype.render=function(){var e=this,t=this.props.relatedImages;if(!t||!t.length)return this.setDefaults(),null;var n=this.shownRimId===this.props.rimid;if(n&&t===this.prevRelatedImages||(this.prevShownCount=this.shownCount,this.fittedItems=this.fitAllItems(t),this.prevRelatedImages=t),n?this.getFittedItemsLength()>this.shownCount&&this.props.onMore&&this.props.onMore(this.shownCount):this.props.onShow&&this.props.onShow(),this.shownRimId=this.props.rimid,this.shownCount=this.getFittedItemsLength(),!this.getFittedItemsLength())return null;var o=this.props.sideblockWidth?{width:this.justifierConfig.rowWidth+"px"}:void 0;return r.createElement(c.ComponentRegistryConsumer,{id:Object(y.a)()},function(t){var n=t.MMTiledImages;return r.createElement("div",{className:Object(y.a)(null,[d.a,e.props.className])},r.createElement("div",{className:Object(y.a)("Header",null,[l.a])},S("Связанные картинки",{context:"Заголовок блока в просмотрщике картинки"})),r.createElement(n,{className:Object(y.a)("Tiles"),style:o,items:e.fittedItems,onClick:e.onClick,counterParams:e.props.counterParams,selectedItemIdx:e.props.selectedRimIdx,clickedCounter:e.props.clickedCounter}),e.props.isLoading?r.createElement(m,{theme:"yellow"}):"")})},t.prototype.setDefaults=function(){this.shownRimId=void 0,this.shownCount=0,this.prevShownCount=0,this.fittedItems=[],this.prevRelatedImages=void 0},t.prototype.getFittedItemsLength=function(){return this.fittedItems.length},t.prototype.fitAllItems=function(e){return Object(v.a)(this.prepareItemsForFit(e),this.justifierConfig)},t.prototype.prepareItemsForFit=function(e){var t=this;return e.map(function(e){var n=e.thumb,r=t.justifierConfig.baseRowHeight,o=n.size?n.size.w:0,i=n.size?n.size.h:0,a=1.5*i<r?1.5*i:r,c=o*a/i;return j(j({},e),{width:c,height:a})})},t.prototype.onClick=function(e,t){this.props.setSelectedRim(e),this.props.onClick&&this.props.onClick(e,t)},t}(r.Component);function x(e){var t=Object(a.compose)(Object(c.withRegistry)(O),Object(s.withBaobab)({name:"related-images"}))(e);return function(e){var n=Object(u.b)(),o=n.rimShown,i=n.rimMore,a=n.rimClicked,c=r.useMemo(function(){return{events:{onShow:Object(s.logTech)("show",function(e){var t=e.props;return Object(f.b)(o,_(t),void 0,{href:t.imgHref})}),onMore:Object(s.logTech)("more",function(e,t){var n=e.props,r=E(t,1)[0];return Object(f.b)(i,P(n,r),void 0,{href:n.imgHref})})}}},[o,i]);return r.createElement(t,j({logNode:c,clickedCounter:a},e))}}var R=x(I)},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(2),o=n(1),i=n(6),a=n(1262),c=n(1145),s=n(714),u=n(926),l=n(0),d=n(147),f=(n(721),Object(i.withBaobab)({name:"ViewerModal-Paranja",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Paranja",null,[e.className]),onClick:e.onClick})}))),p=(n(722),Object(i.withBaobab)({name:"ModalViewer-Close",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Close",null,[e.className]),onClick:e.onClick})}))),h=Object(o.compose)(a.a,s.a,u.a,Object(i.withBaobab)({name:"MMViewerModal"}))(c.a),m=new r.Registry({id:Object(d.a)()});m.set("Modal",h),m.set("Paranja",f),m.set("Close",p)},,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=t.cnPopup=void 0;var r=n(4),o=r.__importStar(n(0)),i=n(14),a=n(2),c=n(3),s=n(245),u=n(513);n(752);var l=n(254),d=n(738);t.cnPopup=c.cn("Popup2"),t.Popup=function(e){var n=e.addonAfter,c=e.addonBefore,f=e.children,p=e.className,h=e.direction,m=e.forceRender,v=e.hasTail,b=e.innerRef,g=e.keepMounted,y=void 0===g||g,O=e.position,w=e.scope,C=void 0===w?{current:s.canUseDOM()?document.body:null}:w,j=e.style,E=e.tailPosition,S=e.tailRef,k=e.tailSize,_=e.visible,P=e.zIndex,I=e.unstable_onRenderTail,x=e.onClose,R=e.unstable_essentialRefs,N=void 0===R?[]:R,M=e.unstable_hostRef,T=e.onOutsideClick,L=e.onEscapeKeyDown,D=e.onClick,B=(e.theme,e.view,e.nonvisual,r.__rest(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),A=r.__read(o.useState(!0),2),F=A[0],U=A[1],z=o.useRef(null);l.useUpdateEffect(function(){F&&_&&U(!1)},[]),o.useEffect(function(){console.assert(void 0===T||void 0===L,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),F&&(m||_)&&U(!1)},[]);var H=o.useCallback(function(e,t){"esc"===t?void 0!==L&&L(e):void 0!==T&&T(e),void 0!==x&&x(e,t)},[L,T,x]),q=a.useComponentRegistry(t.cnPopup()).Tail,W=M||z;return!_&&!y||!s.canUseDOM()||null===C.current||F?null:i.createPortal(o.default.createElement(d.LayerManager,{visible:_,onClose:H,essentialRefs:r.__spread([W],N)},o.default.createElement("div",r.__assign({},B,{className:t.cnPopup({visible:_,direction:h},[p]),ref:u.mergeAllRefs(z,b),style:r.__assign(r.__assign(r.__assign({},j),O),{zIndex:P}),onClick:D}),c,"function"===typeof f?f({tailRef:S}):f,n,I&&I(o.default.createElement(q,{innerRef:S,style:r.__assign(r.__assign({},E),{height:k,width:k})})),!I&&v&&o.default.createElement(q,{innerRef:S,style:r.__assign(r.__assign({},E),{height:k,width:k})}))),C.current)},t.Popup.displayName=t.cnPopup()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(677),Object(r.withBemMod)(Object(o.b)(),{theme:"pseudo"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),o=n(61),i=n(8),a=n(34),c=n(77),s=n(46),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=Object(o.c)(function(e){var t,n,r,o=Object(i.j)(e),a=o&&o.preview&&o.preview[0];a||(a=o&&o.dups&&o.dups[0]);var c=null===o||void 0===o?void 0:o.similarOffers,s=Number(null===(t=e.experiments)||void 0===t?void 0:t.similarOffersFitInRow),u=Boolean(null===(n=e.experiments)||void 0===n?void 0:n.similarOffersFavicons),l=null===(r=e.experiments)||void 0===r?void 0:r.similarOffersTheme;return[o,a,c,e.favicons,s,u,l?String(l):"union"]},function(e,t,n,r,o,i,a){var c;return{offers:(n||[]).map(function(e){var t;return u(u({},e),{favicon:i?null===(t=r[e.domain.toLowerCase()])||void 0===t?void 0:t.data:void 0})}),isMarket:e&&Boolean(e.marketSnippet)&&"market"===(null===(c=e.marketSnippet)||void 0===c?void 0:c.source),reqid:e&&e.reqid,href:t&&t.url,offersInRow:o,theme:a}}),d=Object(r.compose)(Object(s.e)("similarOffers"),Object(a.e)(l),Object(c.a)(function(e){return Boolean(e.offers&&e.offers.length)}))},function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var r=n(1),o=n(61),i=n(8),a=n(292),c=n(77),s=n(23),u=n(34),l=n(469),d=Object(o.d)(function(e){return function(t){return e(Object(s.n)(t))}}),f=Object(o.c)(function(e,t){var n,r=e.experiments,o=void 0===r?{}:r,a=e.globalContext,c=Object(i.c)(e),s=e.rimForItem,u=null===(n=e.config.rim)||void 0===n?void 0:n.justifier.baseRowHeight,l=a.isCommercialEnabled||a.isCommercialQuery;o.commercialRimItemBaseHeight&&l&&(u=Number(o.commercialRimItemBaseHeight));var d=Object(i.l)(e);return[c,Object(i.j)(e),e.rimSelectedIdx,s,e.rimLoadingId,u,d,t]},function(e,t,n,r,o,i,c,s){return{imgHref:t&&t.imgHref?t.imgHref:function(e){var t=e&&e.dups&&e.dups[0];return t&&t.origin?t.origin.url:""}(t),rimid:Object(a.e)(e),relatedImages:r,selectedRimIdx:n,setSelectedRim:d(s),isLoading:""!==o,baseRowHeight:i,sideblockWidth:c}});function p(e){return Object(r.compose)(Object(u.e)(f),Object(c.a)(["relatedImages","rimid","isLoading"]))(e)}var h=p(l.a)},function(e,t,n){"use strict";var r=n(0),o=n(269);t.a=function(e,t){var n=Object(o.a)();Object(r.useEffect)(function(){if(!n)return e()},t)}},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(1),i=n(5),a=n.n(i),c=n(266),s=n(66),u=(n(719),function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),l=a()(c),d=Object(o.withBemMod)(Object(s.b)(),{theme:"union"},function(e){return function(t){return r.createElement(e,u({title:l("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},t))}})},,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return k});var r=n(0),o=n.n(r),i=n(1),a=n(6),c=n(1234),s=n(2),u=n(34),l=n(23),d=n(11),f=n(7),p=n(151),h=n(236),m=n(519),v=n(67),b=o.a.createContext({}),g=n(277),y=n(505),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=function(e){function t(t){var n=e.call(this,t)||this;return n.imageViewerAppRef=Object(r.createRef)(),n.reportedBadImages={},n.inited=!1,n.onViewerStateChange=n.props.integrateState?function(e,t){window.Ya.Images.onViewerStateChange&&window.Ya.Images.onViewerStateChange(e,t)}:void 0,n.onUpdateImages=n.onUpdateImages.bind(n),n.setImageStoreProvider=n.setImageStoreProvider.bind(n),n.updateGlobalContext=n.updateGlobalContext.bind(n),n.getBadImageReporter=n.getBadImageReporter.bind(n),d.a&&Object(f.a)().emit("i-global:get-params",n.updateGlobalContext),n.state={initialImageStoreState:n.getInitialStoreState()},n}return O(t,e),t.prototype.getInitialStoreState=function(){var e=this.props.viewerData.config;return{images:[],config:w(w({},e),{imagesLoadingParams:w(w({},e.imagesLoadingParams),{onImageError:this.getBadImageReporter("2055"),onImageFileSizeError:this.getBadImageReporter("73007"),onImageSizeError:this.getBadImageReporter("72681"),onRimLoadingError:this.getBadImageReporter("73781")})}),experiments:this.props.viewerData.experiments,loadedPagesCount:1,currentItemIdx:this.props.currentItemIdx,globalContext:w({tld:"ru",query:"",yandexuid:"",lr:0,reqid:"",lang:""},this.nextContext)}},t.prototype.componentDidMount=function(){Object(f.a)().on("i-global:update",this.updateGlobalContext).on(v.a.fill,this.onUpdateImages),Object(f.a)().emit(v.a.mounted)},t.prototype.componentWillUnmount=function(){Object(f.a)().off("i-global:update",this.updateGlobalContext).off(v.a.fill,this.onUpdateImages),Object(f.a)().emit(v.a.unmounted)},t.prototype.onUpdateImages=function(e,t){var n=this.imageStoreProvider,r=Object(y.a)(e);n&&(t?n.dispatch(Object(l.m)(r)):n.dispatch(Object(l.c)(r)))},t.prototype.updateGlobalContext=function(e){var t=this.imageStoreProvider,n={tld:e.tld,query:e.query,yandexuid:e.yandexuid,lr:Number(e.lr),reqid:e.reqid,lang:e.lang,isQueryPorn:Boolean(e.isPornoQuery),cm2:Number(e.cm2),QCommercialProb:Number(e.QCommercialProb),QCommercialProbV2:Number(e.QCommercialProbV2),vcomm:Number(e.vcomm),isCommercialEnabled:Boolean(e.isCommercialEnabled),isCommercialQuery:Boolean(e.isCommercialQuery),isThumbsCommercialSnippetEnabled:Boolean(e.isThumbsCommercialSnippetEnabled)};t?t.dispatch(Object(l.p)(n)):this.nextContext||(this.nextContext=n)},t.prototype.isEncryptionConfigAvailable=function(){if(!d.a)return!1;var e=BEM.blocks["direct-utils"];return e&&e.isConfigAvailable()},t.prototype.encryptCountUrl=function(e){return BEM.blocks["direct-utils"].tagNEncryptUrl(e)},t.prototype.getBadImageReporter=function(e){var t=this;return function(n){t.reportedBadImages[n]||(t.reportedBadImages[n]=!0,window.Ya.Images.errcnt({src:n},e))}},t.prototype.shouldRender=function(){return Boolean(d.a&&this.state&&this.state.initialImageStoreState)},t.prototype.render=function(){var e=this;return this.shouldRender()?o.a.createElement(u.a,{forwardRef:this.setImageStoreProvider,initialState:this.state.initialImageStoreState,onStateChange:this.onViewerStateChange},o.a.createElement(b.Provider,{value:this.props.viewerData.experiments||{}},o.a.createElement(c.FavoritesContextProvider,null,o.a.createElement(s.ComponentRegistryConsumer,{id:Object(p.a)()},function(t){var n=t.ImagesViewerApp;return o.a.createElement(n,w({},e.props.viewerData,{onLog:e.props.onLog}))})))):null},t.prototype.setImageStoreProvider=function(e){this.imageStoreProvider=e,this.props.integrateState&&(window.Ya.Images.getViewerState=e?function(){return e.getState()}:void 0)},t}(r.Component),j="/clck/jclck",E="/*//",S=Object(i.compose)(function(e){return function(t){return o.a.createElement(e,w({baobab:{ui:t.ui,service:t.service,prefix:t.reqid,senderParams:{hrefPrefix:t.trueBaobab?j:"",hrefPostfix:E}}},t))}},Object(a.withBaobabRoot)({name:"$page",attrs:{service:"images",ui:"desktop"},events:{onLog:Object(a.logClick)(function(e,t){return t[0]})}},g.a,g.b),function(e){return function(t){var n=o.a.useMemo(function(){return t.isPumpkin?Object(s.withRegistry)(m.a,h.d)(e):Object(s.withRegistry)(h.d,h.a,h.b,h.c)(e)},[t.isPumpkin]);return o.a.createElement(n,t)}}),k=S(C)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(2),o=n(418),i=n(1),a=n(991),c=n(709),s=n(708),u=n(71),l=n(132),d=Object(i.compose)(a.a,c.a,s.a)(u.a),f=new r.Registry({id:Object(l.b)()});f.set("Spin",d);var p=Object(r.withRegistry)(f)(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(291),o=(n(724),r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),o=n(0),i=n.n(o),a=n(157),c=n(147),s=(n(723),n(476)),u=Object(r.withRegistry)(s.a)(function(e){var t=i.a.useRef(null),n=Object(r.useComponentRegistry)(Object(c.a)()),s=n.Modal,u=n.Close,l=n.Paranja;return i.a.useEffect(function(){if(t.current){var n=t.current;if(e.isVisible)return Object(a.disableBodyScroll)(n),function(){e.isVisible&&Object(a.enableBodyScroll)(n)};Object(a.enableBodyScroll)(n)}},[e.isVisible,t.current]),Object(o.useImperativeHandle)(e.innerRef,function(){return t.current}),i.a.createElement(s,{innerRef:t,className:Object(c.a)(null,[e.className]),theme:"normal",visible:e.isVisible,hasAnimation:!1,zIndex:e.zIndex,zIndexGroupLevel:e.zIndexGroupLevel||20,disablePortal:e.isSSREnabled},i.a.createElement(l,{onClick:e.onParanjaClick}),i.a.createElement(u,{onClick:e.onCloseClick}),e.children)})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(e){if(e.snippet)return{id:e.id,pos:e.pos,docid:e.docid,rimid:e.rimId,imgHref:e.img_href,reqid:e.reqid,fresh:e.fresh,freshness:e.freshness,counterPath:e.counterPath,isMarketIncut:e.isMarketIncut,commercialSource:e.commercialSource,previewUrl:e.detail_url,isFavorite:Boolean(e.isFavorite),photostockUrl:e.photostockUrl,uniqId:e.reqid+"-"+e.id,images:[],preview:e.preview,snippet:function(e){return r(r({},e),{text:((null===e||void 0===e?void 0:e.text)||"").replace(/<b>/g,"[").replace(/<\/b>/g,"]")})}(e.snippet),similarOffers:function(e){if(e&&e.length)return e.map(function(e){return r(r({},e),{price:e.price?Number(e.price.toString().replace(/ +/g,"")):void 0})})}(e.similarOffers),marketSnippet:e.marketSnippet&&function(e){if(e)return{domain:e.domain,isMarketPlace:e.isMarketPlace,punycode:e.punycode,imageUrl:e.image_url,modelUrl:e.model_url,moneyId:e.money_id,price:e.price,shopRating:e.shop_rating,modelRating:e.model_rating,cashback:e.cashback,source:e.source,title:e.title,url:e.url,oldPrice:e.oldPrice,currency:e.currency,discount:e.discount,text:e.text,fullText:e.fullText,decodedUrl:e.decodedUrl}}(e.marketSnippet),schemaOrgSnippet:e.schemaOrgSnippet&&function(e){if(e)return{domain:e.domain,punycode:e.punycode,moneyId:e.money_id,price:e.price,currency:e.currency,source:e.source,title:e.title,url:e.url,text:e.text,fullText:e.fullText,availability:e.availability,brand:e.brand}}(e.schemaOrgSnippet),otherOffers:e.otherOffers,thumb:function(e){return{commercialCrop:e.commercialCrop,url:e.url,microImg:e.microImg,size:{w:e.size.width,h:e.size.height}}}(e.thumb),col:e.col,row:e.row,page:e.page,dups:e.dups,extraOrigin:e.extraOrigin,origOnlyOpen:e.origOnlyOpen}},i=function(e){for(var t=[],n=0;n!==e.length;n++){var r=o(e[n]);r&&t.push(r)}return t}},function(e,t,n){"use strict";n.d(t,"b",function(){return w}),n.d(t,"c",function(){return C}),n.d(t,"a",function(){return j});var r=n(0),o=n(2),i=n(70),a=n(6),c=n(5),s=n.n(c),u=n(61),l=n(914),d=n(520),f=n(129),p=function(){return!!f.a&&Boolean("IntersectionObserver"in window&&"IntersectionObserverEntry"in window)}(),h=function(){return!!f.a&&(!(window.navigator.userAgent.indexOf("Edg/")>-1)&&window.navigator.userAgent.indexOf("Edge/")>-1)}(),m=n(52),v=(n(872),n(50)),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=s()(l),O=Object(u.d)(function(e){return{vars:{pos:e&&e.pos}}}),w=function(e){function t(t){var n=e.call(this,t)||this;return n.containerNode={current:null},n.fixedPaneRef=r.createRef(),n.fixedPaneVisibilityAnchorRef=r.createRef(),n.rootRef={current:null},n.scrollStartLogged=!1,n.scrollToBottomLogged=!1,n.scrollShowLogged=!1,n.autoScroll=!1,n.componentIsMounted=!1,n.BOTTOM_REACH_OFFSET=300,n.state={scrollShowLogged:!1,fixedPaneHidden:!0,fixedPaneAnimated:!1},n.onScroll=Object(i.throttle)(n.onScroll.bind(n),100,{delayedLastCall:!0}),n.onRootNodeRef=n.onRootNodeRef.bind(n),n.onContainerNodeRef=n.onContainerNodeRef.bind(n),n.onMutation=n.onMutation.bind(n),n.onRimPageLoaded=n.onRimPageLoaded.bind(n),n.observerCallback=n.observerCallback.bind(n),n}return b(t,e),t.prototype.isFixedPaneEnabled=function(){if(!p)return!1;if(!this.props.fixedPaneConfig)return!1;var e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("safari")||-1!==e.indexOf("chrome")},t.prototype.componentDidUpdate=function(e,t){var n=this;this.props.isVisible&&(e.activeImage&&this.props.activeImage&&e.activeImage.docid!==this.props.activeImage.docid&&(this.scrollShowLogged=!1,this.hasScroll()&&this.resetScroll(),this.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})),t.fixedPaneHidden!==this.state.fixedPaneHidden&&window.requestAnimationFrame(function(){n.setState({fixedPaneAnimated:!0})}))},t.prototype.componentDidMount=function(){this.componentIsMounted=!0,this.autoScroll=!1,this.props.fixedPaneConfig&&this.attachFixedPaneObserver()},t.prototype.attachFixedPaneObserver=function(){if(this.isFixedPaneEnabled()){var e=this.fixedPaneVisibilityAnchorRef&&this.fixedPaneVisibilityAnchorRef.current,t=this.rootNode;e&&t&&(this.fixedPaneAnchorObserver=new IntersectionObserver(this.observerCallback,{root:t,threshold:1}),this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.observe(e))}},t.prototype.detachFixedPaneObserver=function(){this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.disconnect()},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,this.detachFixedPaneObserver()},t.prototype.render=function(){var e=this,t=this.props,n=t.activeImage,i=t.shownImage,a=t.cnSidebarParams,c=i&&i.schemaOrgSnippet,s=this.isFixedPaneEnabled(),u=this.props.fixedPaneConfig,l=u&&u.theme?u.theme:v.c.full,d=this.state,f=d.fixedPaneHidden,p=d.fixedPaneAnimated,b=!f&&p,g=h?"fixed":"sticky";return r.createElement("div",{className:Object(m.a)("",a),onScroll:this.onScroll,ref:this.onRootNodeRef,style:this.getSidebarStyle()},r.createElement(o.ComponentRegistryConsumer,{id:Object(m.a)()},function(t){var o=t.MMOrganicSnippet,i=t.MMSchemaOrgSnippet,a=t.MMRelatedImages,u=t.MMSimilarOffers,d=(null===c||void 0===c?void 0:c.url)?r.createElement(i,{type:"schemaorg",clickSource:"commercial-snippet",minified:!0}):r.createElement(o,{minified:!0});return r.createElement(r.Fragment,null,s&&!f&&r.createElement("div",{className:Object(m.a)("FixedPane",{hidden:f,type:f?"":g,animated:b,theme:l}),ref:e.fixedPaneRef},d,e.getViewerButtons(!0)),r.createElement("div",{className:Object(m.a)("Container"),ref:e.onContainerNodeRef},e.renderMarketSnippet(t,v.d.top),e.renderMainContent(t),e.renderMarketSnippet(t,v.d.middle),u&&r.createElement(u,null),r.createElement(a,{onPageLoaded:e.onRimPageLoaded,onClick:e.props.onRelatedItemClick,counterParams:O(n)})))}))},t.prototype.renderMainContent=function(e){var t,n=e.OtherOffers,o=e.MMViewerTags,i=this.props,a=i.shownImage,c=i.isDuckEnabled,s=i.onTagClick,u=a&&a.marketSnippet,l=this.isFixedPaneEnabled();return r.createElement(r.Fragment,null,this.renderBlock(r.createElement(r.Fragment,null,this.renderSnippet(e),n&&!u&&(null===a||void 0===a?void 0:a.otherOffers)&&0!==(null===(t=null===a||void 0===a?void 0:a.otherOffers)||void 0===t?void 0:t.length)&&r.createElement(r.Fragment,null,r.createElement("div",{className:Object(m.a)("OtherOffersDivider",{snippet:"schemaorg"})}),r.createElement("div",{className:Object(m.a)("Title",{snippet:"schemaorg"})},y("В других магазинах",{context:"Заголовок блока предложений товара в других магазинах"})),r.createElement(n,{fold:!0,className:Object(m.a)("OtherOffers",{snippet:"schemaorg"})}))),"baseOrganicSnippetContainer"),c&&r.createElement(o,{onTagClick:s}),this.getViewerButtons(),l&&r.createElement("div",{className:Object(m.a)("FixedPaneVisibilityAnchor"),ref:this.fixedPaneVisibilityAnchorRef}))},t.prototype.renderSnippet=function(e){var t=e.MMOrganicSnippet,n=e.MMSchemaOrgSnippet,o=e.ExtraLinks,i=this.props,a=i.shownImage,c=i.activeImage,s=null===a||void 0===a?void 0:a.schemaOrgSnippet,u=c&&o?r.createElement(o,{imageItem:c,scope:this.containerNode,scrollArea:this.rootRef}):void 0;return(null===s||void 0===s?void 0:s.url)?r.createElement(n,{type:"schemaorg",key:"baseOrganicSnippetNode",clickSource:"commercial-snippet",aside:u}):r.createElement(t,{key:"baseOrganicSnippetNode",type:"organic",clickSource:"snippet",aside:u})},t.prototype.renderMarketSnippet=function(e,t){var n,o=e.MMMarketSnippet,i=e.OtherOffers,a=this.props,c=a.shownImage,s=a.marketPosition,u=null===c||void 0===c?void 0:c.marketSnippet,l="undefined"!==typeof s?s:v.d.middle;if(u&&o&&l===t)return r.createElement(o,g({},u),i&&(null===c||void 0===c?void 0:c.otherOffers)&&0!==(null===(n=null===c||void 0===c?void 0:c.otherOffers)||void 0===n?void 0:n.length)&&r.createElement(r.Fragment,null,r.createElement("div",{className:Object(m.a)("Title",{snippet:"market"})},y("В других магазинах",{context:"Заголовок блока предложений товара в других магазинах"})),r.createElement(i,{fold:!0,className:Object(m.a)("OtherOffers",{snippet:"market"})})))},t.prototype.getSidebarStyle=function(){var e=this.props.width;if(e)return{width:e+"px"}},t.prototype.getViewerButtons=function(e){var t,n=this,i=this.props,a=i.shownImage,c=i.addToCollectionsLoginUrl,s=void 0===c?"":c,u=this.containerNode.current?this.containerNode:void 0,l=this.rootRef.current?this.rootRef:void 0,d=Boolean(a&&a.isFavorite);return t=e?v.b.compact:v.b.twoLines,r.createElement(o.ComponentRegistryConsumer,{id:Object(m.a)()},function(e){var o=e.MMViewerButtons;return r.createElement(o,{view:t,popupScope:u,popupScrollArea:l,onLog:n.props.onLog,loginUrl:s,avatarId:n.props.avatarId,isFavorite:d})})},t.prototype.renderBlock=function(e,t){return this.props.view===v.a.block?r.createElement("div",{className:Object(m.a)("Block"),key:t},e):e},t.prototype.onRootNodeRef=function(e){this.rootRef.current=e,e&&this.rootNode!==e&&(this.rootObserver&&this.rootObserver.disconnect(),this.rootObserver=new MutationObserver(this.onMutation),this.rootObserver.observe(e,{attributes:!0,childList:!0,subtree:!0})),this.props.nodeRef&&(this.props.nodeRef.current=e),this.rootNode=e,this.checkSidebarBottomReached()},t.prototype.onContainerNodeRef=function(e){this.containerNode.current!==e&&(this.containerNode.current=e,this.forceUpdate())},t.prototype.onMutation=function(){this.props.isVisible&&!this.scrollShowLogged&&this.countNewScrollState()},t.prototype.onRimPageLoaded=function(){this.checkSidebarBottomReached()},t.prototype.resetScroll=function(){var e=this;this.rootNode&&(this.autoScroll=!0,this.rootNode.scrollTop=0,setTimeout(function(){e.autoScroll=!1},0))},t.prototype.hasScroll=function(){var e=this.containerNode.current,t=e&&e.parentElement;return!(!e||!t)&&e.offsetTop+e.clientHeight>t.clientHeight},t.prototype.countNewScrollState=function(){this.scrollStartLogged=!1,this.scrollToBottomLogged=!1,this.hasScroll()&&(this.scrollShowLogged=!0,this.props.onScrollShow&&this.props.onScrollShow())},t.prototype.observerCallback=function(e){var t=this;this.componentIsMounted&&e.forEach(function(e){var n=e.rootBounds,r=e.boundingClientRect;n&&r.top<n.top?t.setState({fixedPaneHidden:!1,fixedPaneAnimated:!1}):t.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})})},t.prototype.isSidebarBottomReached=function(){var e=this.rootNode;if(!e)return!1;var t=e.scrollTop+e.clientHeight;return e.scrollHeight-t<=this.BOTTOM_REACH_OFFSET},t.prototype.checkSidebarBottomReached=function(){this.isSidebarBottomReached()&&this.props.onBottomSidebar&&this.props.onBottomSidebar()},t.prototype.onScroll=function(){if(this.componentIsMounted)if(this.autoScroll)this.autoScroll=!1;else if(this.checkSidebarBottomReached(),!this.scrollStartLogged||!this.scrollToBottomLogged){var e=this.containerNode.current,t=e&&e.parentElement;e&&t&&(this.scrollStartLogged||(this.scrollStartLogged=!0,this.props.onScrollStart&&this.props.onScrollStart()),!this.scrollToBottomLogged&&t.scrollTop+t.clientHeight>=e.clientHeight&&(this.scrollToBottomLogged=!0,this.props.onScrollToBottom&&this.props.onScrollToBottom()))}},t}(r.Component);function C(e){return Object(a.withBaobab)({name:"pane"})(Object(o.withRegistry)(d.a)(e))}var j=C(w)},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAllRefs=t.mergeRefs=void 0;var r=n(245);t.mergeRefs=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.canUseDOM()&&requestAnimationFrame(function(){t.forEach(function(t){void 0!==e&&void 0!==t&&("function"===typeof t?t(e.current):t.current=e.current)})}),e},t.mergeAllRefs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n.n(r),i=n(2),a=n(162),c=function(e){var t,n,r=e.thumb,c=e.targetSize,s=e.key,u=Object(i.useComponentRegistry)(Object(a.a)()).Thumb;return o.a.createElement(u,{className:Object(a.a)("Thumb"),fit:"square",width:null===(t=r.size)||void 0===t?void 0:t.w,height:null===(n=r.size)||void 0===n?void 0:n.h,src:r.url,targetSize:c,key:s})}},function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"a",function(){return j});var r=n(0),o=n.n(r),i=n(239),a=n(1),c=n(6),s=n(23),u=n(46),l=n(61),d=n(8),f=n(439),p=n(34),h=n(407),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v={},b=Object(l.d)(function(e){return function(t){return e(Object(s.k)(t))}}),g=Object(l.d)(function(e){return function(t){return e(Object(s.h)(t))}});function y(e,t){var n=t.count;0===n?delete v[e]:v[e]=n}var O=Object(c.withBaobab)({name:"ImagesViewer",events:{logTech:Object(c.logTech)("",function(e,t){return t[0]})}}),w=Object(p.e)(function(e,t,n){var r,o=e.globalContext,i=Object(d.j)(e);return{tld:e.globalContext.tld,yandexuid:e.globalContext.yandexuid,rimSelectedIdx:e.rimSelectedIdx,reqid:e.globalContext.reqid,query:e.globalContext.query,isCommercialQuery:e.globalContext.isCommercialQuery,isCommercialEnabled:e.globalContext.isCommercialEnabled,items:e.images,shownImage:Object(d.j)(e),isPornoQuery:Boolean(o.isQueryPorn),directStripeEnabled:Object(f.a)(e),config:e.config,currentItemIdx:e.currentItemIdx,setCurrentItemIdx:b(t),experiments:n.experiments,stretchSideblock:Boolean(Object(d.l)(e)),lr:e.globalContext.lr,iCookieEncrypted:e.config.iCookieEncrypted,commercialCropSetSelectedIdx:g(t),commercialCropSelectedIdx:e.commercialCropSelectedIdx,commercialCropRegions:null===(r=null===i||void 0===i?void 0:i.thumb)||void 0===r?void 0:r.commercialCrop}});var C=Object(a.compose)(u.c,function(e){var t=function(t){return o.a.createElement(p.b.Provider,{value:{cache:v,updateCache:y}},o.a.createElement(e,m({},t)))};return t.displayName=Object(i.getDisplayName)(e)+":withMarketCartCacheContext",t},w,O),j=C(h.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"a",function(){return w});var r,o=n(0),i=n.n(o),a=n(573),c=n.n(a),s=n(154),u=n(1),l=n(34),d=n(77),f=n(251),p=n(209),h=n(235),m=n(351),v=n(131),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},y=c()({loader:function(){return n.e("a959f1").then(n.bind(null,1213))},loading:function(){return null},render:function(e,t){var n=e.MMUnauthPopup;return i.a.createElement(n,b({logNode:"object"===typeof t.baobabLogOnClose?{events:{onCloseClick:t.baobabLogOnClose}}:void 0},t))}});!function(e){e[e.none=0]="none",e[e.all=1]="all",e[e.similar=2]="similar",e[e.save=3]="save",e[e.disk=4]="disk"}(r||(r={}));var O=function(e){return function(t){var n=Object(s.a)(),o=!t.loggedIn&&!t.isQueryPorn&&t.unauthPopupButtonsDisable!==r.all,a=o&&t.unauthPopupButtonsDisable!==r.similar&&Object(v.c)(m.b)&&h.a,c=b(b({},t),{isOpenImageUnauthPopupEnabled:o&&t.unauthPopupButtonsDisable!==r.save,isOpenImageUnauthPopupStrictEnabled:o,isSimilarUnauthPopupEnabled:a,isDiskShareUnauthPopupEnabled:o&&t.unauthPopupButtonsDisable!==r.disk}),u={visible:!1,loginUrl:"",registrationUrl:"",title:"",text:"",onCloseClick:void 0,skipUrl:"",skipText:"",baobabLogOnClose:void 0},l=g(i.a.useState(u),2),d=l[0],f=l[1],p=i.a.useCallback(function(e){o&&(f(u),d.onCloseClick&&d.visible&&d.onCloseClick(e))},[o,u,d]),O=i.a.useCallback(function(e){o||d.visible&&e&&27===e.keyCode&&(f(u),e.stopImmediatePropagation())},[o,u,d.visible]);i.a.useEffect(function(){return d.visible&&document.addEventListener("keydown",O,!0),function(){d.visible&&document.removeEventListener("keydown",O,!0)}},[O,d.visible]),i.a.useEffect(function(){n()&&y.preload()},[n]);var w=i.a.useCallback(function(e,t,n){return Object(v.d)(e,f,t,n)},[]);return o?i.a.createElement(i.a.Fragment,null,d.visible&&i.a.createElement(y,{loginUrl:d.loginUrl,registrationUrl:d.registrationUrl,title:d.title,text:d.text,onCloseClick:p,skipUrl:d.skipUrl,skipText:d.skipText,baobabLogOnClose:d.baobabLogOnClose}),i.a.createElement(e,b({},c,{showUnauthPopup:w}))):i.a.createElement(e,b({},c))}},w=Object(u.compose)(Object(l.e)(p.b),Object(d.a)(["image"]),O)(f.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var r=n(61),o=n(8),i=n(34),a=n(506),c=n(50),s=n(23),u=Object(r.d)(function(e){return function(){return e(Object(s.j)())}}),l=function(e,t){var n,r=Object(o.c)(e),i=Object(o.j)(e),a=e.config,s=a.isDuckEnabled,l=a.sidebar,d=null===l||void 0===l?void 0:l.view;return d&&((n||(n={})).view=d),{fixedPaneConfig:null===l||void 0===l?void 0:l.fixedPaneConfig,marketPosition:c.d.top,isDuckEnabled:Boolean(s),reqid:r&&r.reqid,activeImage:r,shownImage:i,onBottomSidebar:u(t),width:Object(o.l)(e),view:d,cnSidebarParams:n}};function d(e){return Object(i.e)(l)(e)}var f=d(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(1),i=n(5),a=n.n(i),c=n(266),s=n(66),u=(n(873),function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),l=a()(c),d=Object(o.withBemMod)(Object(s.b)(),{theme:"v2"},function(e){return function(t){return r.createElement(e,u({title:l("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},t))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(22),i=n(214),a=new r.Registry({id:i.a.id}),c=Object(o.a)("OpenImage");Object.keys(i.a.snapshot()).forEach(function(e){e!==c&&a.set(e,function(){return null})})},function(e,t,n){"use strict";n.d(t,"a",function(){return Pn});var r=n(2),o=n(1),i=n(3),a=Object(i.cn)("MMOrganicSnippet"),c=n(0),s=n.n(c),u=n(148),l=n(58),d=n(1024),f=n(1014),p=n(6),h=n(52),m=(n(875),Object(h.a)("SectionTitle")),v=n(46),b=n(75),g=n(28),y=n(8),O=n(45),w=n(1129),C=n(611),j=n(531),E=n(566),S=n(922),k=n(5),_=n.n(k),P=(n(876),n(915)),I=Object(o.compose)(w.a,C.a,j.a,E.a)(S.a),x=_()(P),R=a("Button"),N=Object(p.withBaobab)({name:"MMOrganicSnippetButton",events:{onClick:Object(p.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return s.a.createElement(I,{className:R,width:"max",theme:"action",size:"m",type:"link",target:"_blank",url:t,onClick:n},x("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),M=(n(874),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),T=Object(u.a)(l.a);function L(e,t,n,r,o,i){return Object(g.b)(e,t,{path:""+Object(y.b)(e)+i,pos:i?n:"",reqid:o},{href:r})}var D,B=Object(p.withBaobab)({name:"OrganicSnippet",events:{onShow:Object(p.logTech)("show",function(e,t){var n=e.props,r=M(t,1)[0],o=n.extra,i=n.pos;if(r&&o)return Object(g.b)(r,{pos:i,type:o.type,view:o.view},void 0,{href:n.url})})}})(function(e){var t=e.url,n=e.text,r=e.domain,o=e.title,i=e.type,s=e.clickSource,u=e.favicon,l=e.pos,h=e.reqid,y=e.commercialPath,w=e.rimPos,C=e.rimid,j=e.path,E=e.extra,S=e.aside,k=e.onShow,_=e.showStoreButton,P=e.minified,I=Object(v.b)();c.useEffect(function(){k&&E&&k(I.organic.shown)},[t,k,E,I.organic.shown]);var x=I.organic,R=x.path,M=x.title,D=x.button,B=c.useMemo(function(){var e=Object(O.a)({dataSource:i,actionType:"greenurl",pos:l,clickSource:s});return"undefined"!==typeof w&&(e.rim_id=C,e.rim_index=w),e},[l,s,i,w,C]),A=c.useMemo(function(){return{attrs:(Object(g.a)(I.organic.path)||{}).attrs}},[I.organic.path]),F=c.useMemo(function(){return{url:t,counter:L(R,B,l,t,h,y),logNode:A}},[t,R,B,t,l,h,y,A]),U=c.useMemo(function(){return j&&j.length?j:[{text:r.toLowerCase()}]},[r,j]),z=c.useMemo(function(){return{name:"title",events:{onClick:Object(p.logClick)(L(M,B,l,t,h,y))},attrs:(Object(g.a)(I.organic.title)||{}).attrs}},[t,B,M,y,t,l,h,I.organic.title]),H=L(D,B,l,t,h,y);return c.createElement("div",{className:a()},c.createElement("div",{className:a("TitleWrap")},c.createElement(T,{className:a("Title",[m]),theme:"normal",url:t,key:l,logNode:z},c.createElement(f.a,null,o)),S&&c.createElement("div",{className:a("Aside")},S)),c.createElement(d.a,{className:a("Path"),favicon:u?c.createElement(b.a,{favicon:u}):void 0,link:F,items:U}),c.createElement("div",{className:a("Text")},c.createElement(f.a,null,n)),!P&&_?c.createElement(N,{url:t,counter:H}):null)}),A=n(34),F=Object(A.e)(function(e){var t,n=Object(y.c)(e),r=Object(y.j)(e)||{},o=r.snippet||{},i=o.title,a=void 0===i?"":i,c=o.url,s=void 0===c?"":c,u=o.text,l=void 0===u?"":u,d=o.domain,f=void 0===d?"":d,p=o.shopScore,h=o.path,m=void 0===h?[]:h,v=o.extra,b=Object(y.d)(e,Object(y.e)(r)),g=r.commercialSource||"market",O=r.isMarketIncut?"/commercial/"+g:"",w=null===(t=e.experiments)||void 0===t?void 0:t.organicSnippetStoreButtonThreshold,C=!1;return(e.globalContext.isCommercialEnabled||e.globalContext.isCommercialQuery)&&w&&p&&!(null===r||void 0===r?void 0:r.marketSnippet)&&(C=p>Number(w)),{title:a,text:l,reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,rimid:r&&r.rimid,commercialPath:O,domain:f,favicon:b&&b.data,showStoreButton:C,url:s,path:m,extra:v}}),U=Object(i.cn)("MMMarketSnippet"),z=n(484),H=n(105),q=n(161),W=n(69),V=n(55),G=n(461),Y=n(467),K=(n(878),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),X=Object(i.cn)("MMBigPrice");!function(e){e[e.none=4]="none",e[e.badge=3]="badge",e[e.oldPrice=2]="oldPrice",e[e.cashbackPoints=1]="cashbackPoints",e[e.cashback=0]="cashback"}(D||(D={}));var Q=function(e){var t=e.className,n=e.value,r=e.currency,o=e.oldValue,i=e.cashback,a=Object(c.useRef)(null),s=Object(c.useRef)(null),u=K(c.useState(4),2),l=u[0],d=u[1],f=c.useMemo(function(){return Object(W.classnames)(X(),t)},[t]);return Object(c.useEffect)(function(){var e,t,n=null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().right,r=null===(t=a.current)||void 0===t?void 0:t.getBoundingClientRect().right;r&&n&&r>n&&l>=0&&d(l-1)}),c.createElement("div",{className:f,ref:s},c.createElement("div",{className:X("Container"),ref:a},l>=D.badge&&o&&c.createElement(G.a,{className:X("Discount"),currentPrice:n,oldPrice:o,size:"xs"}),c.createElement(V.a,{className:X("Price"),groupSeparator:" ",value:n,currency:r,groupLength:3}),l>=D.oldPrice&&o&&c.createElement(V.a,{className:X("OldValue"),isCrossed:!0,groupSeparator:" ",value:o,currency:r,groupLength:3}),l>=D.cashback&&i&&c.createElement(Y.a,{className:X("Cashback"),pointsVisible:l>=D.cashbackPoints,value:i})))},J=Object(p.withBaobab)({name:"MMMarketSnippetImage",events:{onClick:Object(p.logClick)(),onError:Object(p.logClick)()}})(function(e){var t=e.url,n=e.imageUrl,r=e.title,o=e.onClick,i=e.onError;return c.createElement("a",{href:t,className:U("ImageLink"),onClick:o,rel:"noopener",target:"_blank"},c.createElement("img",{className:U("Image"),key:n,src:n,alt:r,onError:i}))});function Z(e,t,n){var r;void 0===n&&(n="");var o=null===(r=null===t||void 0===t?void 0:t.market)||void 0===r?void 0:r[e];if(o)return Object(g.a)(Object(y.a)(o,n))}function $(e){return function(t){var n,r,o=t.props,i=null===(r=null===(n=o.counters)||void 0===n?void 0:n.market)||void 0===r?void 0:r[e],a="shown"===e;if(i)return Object(g.b)(Object(y.a)(i,o.source||""),a?Object(O.b)({pos:o.pos,decodedUrl:o.decodedUrl||o.url,dataSource:o.source}):Object(O.a)({clickSource:"commercial-snippet",dataSource:o.source,actionType:"greenurl",decodedUrl:o.decodedUrl,pos:o.pos}),void 0,{href:a?"":o.url})}}var ee=n(315),te=n(316),ne=Object(ee.a)(te.a),re=function(e){var t=e.value;return c.createElement("div",{className:U("RatingLine")},c.createElement(ne,{type:"market",value:t}))},oe=n(294),ie=(n(883),_()(oe)),ae=Object(p.withBaobab)({name:"button"})(function(e){var t=e.withImage,n=e.theme,o=e.url,i=e.onClick,a=e.logNode,s=e.children,u=e.addonBefore,l=e.addonAfter,d=e.isMarketPlace,f=e.className,p=ie("В магазин",{context:"Надпись на кнопке, которая ведет на сайт продавца товара"});d&&(p=ie("Купить на Маркете",{context:'Надпись на кнопке, которая ведет на товар на "Яндекс.Маркет"'}));var h=Object(r.useComponentRegistry)(U()).Button;return c.createElement(h,{theme:n||"action",className:U("ExternalButton",{withImage:t,theme:n},[f]),size:"l",type:"link",url:o,target:"_blank",onClick:i,logNode:a,children:s,addonAfter:l,addonBefore:u},p)}),ce=n(298),se=Object(i.cn)("ProgressBar"),ue=(n(880),function(e){var t=e.className,n=e.progressPercent;return s.a.createElement(ce.a,{in:void 0!==n&&100!==n,classNames:se(),mountOnEnter:!0,unmountOnExit:!0,timeout:250},s.a.createElement("div",{className:se({},[t]),style:{transitionDuration:(n&&100!==n?2e3:0)+"ms",width:n?n+"%":""}}))}),le=(n(882),function(e){var t=e.offerId,n=e.lr,o=e.clid,i=e.srcPof,a=e.purchaseReferrer,u=e.baseUrl,l=e.visible,d=e.errorTimeout,f=e.onReady,p=e.onChangeCount,h=Object(c.useRef)({}),m=Object(c.useCallback)(function(e){h.current[e]&&window.clearTimeout(h.current[e])},[h]),v=Object(c.useCallback)(function(e){m(t),p(t,e)},[t,p,m]),b=Object(c.useCallback)(function(e){d&&(m(e),h.current[e]=window.setTimeout(function(){return v({offerId:e,count:0,goodsCount:0})},d))},[d,v,m]),g=Object(c.useCallback)(function(e){b(e.offerId),f(e.offerId)},[f,b]),y=Object(r.useComponentRegistry)(U()).MarketCartIframe;return Object(c.useEffect)(function(){return l&&b(t),function(){m(t)}},[l,t,b,m]),l?s.a.createElement("div",{className:U("IframeContainer")},s.a.createElement(y,{visible:!0,className:U("Iframe"),offerId:t,purchaseReferrer:a,clid:o,srcPof:i,urlPath:u,lr:n,onReady:g,onChangeCount:v})):null}),de=n(10),fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function pe(e){var t=e.postfix,n=e.vars,r=e.basePath,o=e.href;r&&Object(de.a)(r+"/"+t,{vars:n,href:o})}n(881);var he=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},me=_()(oe);function ve(e){var t;return{lr:e.globalContext.lr,cart:null===(t=e.config.marketSnippetParams)||void 0===t?void 0:t.cart}}function be(e){var t="done";return void 0===e?t="ready":0===e&&(t="fail"),t}var ge=function(e){var t=e.offerId,n=e.price,o=e.currency,i=e.pos,a=e.url,u=e.decodedUrl,l=e.tooltipScope,d=Object(c.useContext)(A.b),f=d.cache,p=d.updateCache,h=Object(A.d)(ve),m=h.lr,v=h.cart,b=he(Object(c.useState)(be(f[t])),2),g=b[0],y=b[1],w=he(Object(c.useState)(void 0),2),C=w[0],j=w[1],E=he(Object(c.useState)(!1),2),S=E[0],k=E[1],_=Object(c.useRef)(null),P=function(e){var t=e.basePath,n=e.offerId,r=e.price,o=e.currency,i=e.url,a=e.decodedUrl,s=e.clid,u=e.srcPof,l=e.purchaseReferrer,d=e.pos,f=Object(c.useMemo)(function(){return fe(fe({},Object(O.b)({pos:d,decodedUrl:a||i,dataSource:"market-cpa"})),{offerId:n,price:r,currency:o,clid:s,srcPof:u,purchaseReferrer:l})},[n,r,o,d,i,a,s,u,l]),p=Object(c.useMemo)(function(){return fe(fe({},Object(O.a)({clickSource:"commercial-snippet",dataSource:"market-cpa",actionType:"greenurl",decodedUrl:a||i,pos:d})),{offerId:n,price:r,currency:o,clid:s,srcPof:u,purchaseReferrer:l})},[n,r,o,d,i,a,s,u,l]);return{hitInternal:Object(c.useCallback)(function(e,n){pe({postfix:e,basePath:t,href:n,vars:f})},[t,f]),hitExternal:Object(c.useCallback)(function(e,n){pe({postfix:e,basePath:t,href:n,vars:p})},[t,p])}}({basePath:null===v||void 0===v?void 0:v.counterBasePath,offerId:t,price:n,currency:o,url:a,decodedUrl:u,pos:i,clid:null===v||void 0===v?void 0:v.clid,srcPof:null===v||void 0===v?void 0:v.srcPof,purchaseReferrer:null===v||void 0===v?void 0:v.purchaseReferrer}),I=P.hitExternal,x=P.hitInternal,R=Object(r.useComponentRegistry)(U()),N=R.Button,M=R.InfoTooltip,T=Object(c.useCallback)(function(){k(function(e){return e&&x("tooltip/close"),!1})},[x]),L=Object(c.useCallback)(function(){k(function(e){return e||x("tooltip/show"),!0})},[x]),D=Object(c.useCallback)(function(e,n){if(e===t){var r="progress";100===n?r="done":0===n?r="ready":void 0===n&&(r="fail"),y(r),j(n)}},[t]),B=Object(c.useCallback)(function(){y("progress"),j(66),x("click")},[x]),F=Object(c.useCallback)(function(e,t){var n,r=t.goodsCount,o=t.count;r>0?(n=100,x("success")):x("fail"),null===p||void 0===p||p(e,{count:o,goodsCount:r}),D(e,n),L()},[D,p,x,a,L]),z=Object(c.useCallback)(function(e){D(e,90)},[D]),H=Object(c.useCallback)(function(){T(),I("tooltip/leave",null===v||void 0===v?void 0:v.cartUrl)},[T,I,null===v||void 0===v?void 0:v.cartUrl]),q=Object(c.useCallback)(function(){T(),x("tooltip/later")},[T,x]);return Object(c.useEffect)(function(){t&&x("show")},[t,x]),Object(c.useEffect)(function(){t&&(y(be(f[t])),j(0))},[t,f[t]]),v?s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{theme:"ready"===g?"mm-secondary":"pseudo",className:U("AddToCartButton"),size:"l",width:"max",target:"_blank",disabled:"progress"===g,onClick:"ready"===g?B:L,innerRef:_,addonAfter:s.a.createElement(ue,{className:U("ProgressBar"),progressPercent:C})},function(e){switch(e){case"ready":return me("В корзину",{context:"Текст на кнопке добавления товара в карзину. Отображается когда товар не не добавлен"});case"progress":return me("Добавляем",{context:"Текст на кнопке добавления товара в карзину. Отображается когда товар отправлен на добавление в корзину"});case"fail":return me("Не добавлено",{context:"Текст на кнопке добавления товара в карзину. Отображается при ошибке добавления товара в корзину"});case"done":return me("Добавлено",{context:"Текст на кнопке добавления товара в карзину. Отображается при успешном добавления товара в корзину"})}}(g)),s.a.createElement(M,{className:U("InfoTooltip"),visible:S,directions:["bottom-right"],zIndex:1,onClose:T,anchor:_,scope:l,externalUrl:v.cartUrl,internalButtonText:"done"===g?me("Не сейчас",{context:"Текст кнопки информационного попапа, которая его закрывает"}):void 0,externalButtonText:"done"===g?me("Перейти",{context:"Текст кнопки информационного попапа, при клике на которую открывается страница корзинки Яндекс.Маркета"}):void 0,onInternalButtonClick:q,onExternalButtonClick:H},function(e){return"done"===e?me("Товар добавлен в корзину",{context:"Текст информационного попапа при успешном добавлении товара в корзину"}):me("Добавить товар в корзину не получилось, возможно, его уже разобрали.",{context:"Текст информационного попапа при ошибке добавления товара в корзину"})}(g)),s.a.createElement(le,{visible:"progress"===g,offerId:t,purchaseReferrer:v.purchaseReferrer,clid:v.clid,srcPof:v.srcPof,lr:m,errorTimeout:v.errorIframeTimeout,baseUrl:v.cartIframeBaseUrl,onReady:z,onChangeCount:F})):null},ye=(n(879),function(e){var t=e.withImage,n=e.isMarketPlace,r=e.theme,o=e.url,i=e.offerId,a=e.decodedUrl,s=e.pos,u=e.price,l=e.currency,d=e.tooltipScope,f=e.onExternalClick,p=e.logExternalButtonNode,h=e.addonBefore,m=e.addonAfter,v=null;n&&i&&(v=c.createElement(ge,{offerId:i,url:o,decodedUrl:a,currency:l,pos:s,price:u,tooltipScope:d}));var b=c.createElement(ae,{withImage:t,theme:r,url:o,onClick:f,logNode:p,addonBefore:h,isMarketPlace:!v&&n,addonAfter:m});return v?c.createElement("div",{className:U("Buttons")},b,v):b}),Oe=n(1236),we=n(541),Ce=n(1091),je=n(612),Ee=n(47),Se=n(12),ke=(n(884),Object(o.withBemMod)(Object(Se.b)(),{theme:"mm-secondary"})),_e=(n(885),ke),Pe=n(125),Ie=n(38),xe=(n(886),Object(Ie.a)(["type","tone"])),Re=Object(i.cn)("InfoTooltip"),Ne=n(15),Me=n(574),Te=n(575),Le=n(926),De=n(420),Be=n(1083),Ae=n(252),Fe=(n(887),Object(o.withBemMod)(Object(Ne.b)(),{type:"close-filled"})),Ue=n(373),ze=Object(o.compose)(Fe,Ue.a)(Ne.a),He=Object(o.compose)(Le.a,Me.withTargetAnchor,Ae.b,Ae.a,Te.withThemeNormal)(De.a),qe=Object(o.compose)(j.a,C.a,Object(o.composeU)(Be.a,w.a))(S.a),We=new r.Registry({id:Re()});We.set("Popup",He),We.set("Button",qe),We.set("Icon",ze);var Ve=Object(r.withRegistry)(We)(function(e){var t=e.className,n=e.children,o=e.visible,i=e.directions,a=e.zIndex,u=e.internalButtonText,l=e.externalButtonText,d=e.externalUrl,f=e.anchor,p=e.scope,h=e.onClose,m=e.onInternalButtonClick,v=e.onExternalButtonClick,b=Object(r.useComponentRegistry)(Re()),g=b.Popup,y=b.Button,O=b.Icon,w=Object(c.useRef)(0),C=Object(c.useCallback)(function(){w.current&&(window.clearTimeout(w.current),w.current=0,null===h||void 0===h||h())},[h,w]),j=Object(c.useCallback)(function(){C(),w.current=window.setTimeout(C,5e3)},[w,C]),E=u&&m&&s.a.createElement(y,{className:Re("InternalButton"),size:"m",theme:"clear",onClick:m},u),S=l&&v&&d&&s.a.createElement(y,{className:Re("ExternalButton"),size:"m",theme:"action",type:"link",target:"_blank",url:d,onClick:v},l),k=E||S?s.a.createElement("div",{className:Re("Buttons")},E,S):null;return Object(c.useEffect)(function(){return o&&j(),C},[o,j,C]),s.a.createElement(ce.a,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:100,classNames:Re()},s.a.createElement(g,{className:Re({},[t]),visible:o,hasTail:!0,target:"anchor",theme:"normal",tone:"dark",view:"tooltip",directions:i,zIndex:a,onOutsideClick:C,anchor:f,scope:p},s.a.createElement(y,{className:Re("Close"),size:"m",theme:"clear",icon:xe({type:"close-filled",tone:"white"},O),onClick:C}),s.a.createElement("div",{className:Re("Content")},n),k))}),Ge=n(500),Ye=Object(o.composeU)(Ce.a,je.a)(Ee.a),Ke=Object(o.compose)(Object(o.composeU)(_e,Oe.a,w.a),E.a,C.a,we.a)(S.a),Xe=Ve,Qe=Ge.a,Je=new r.Registry({id:U()});Je.set("Button",Ke),Je.set("MarketIcon",Object(Pe.a)({type:"market-logo"})(Ye)),Je.set("InfoTooltip",Xe),Je.set("MarketCartIframe",Qe);n(877);var Ze=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},$e=Object(u.a)(l.a),et=_()(oe),tt=U("ImageContainer"),nt=U("Description"),rt=U("ShopInfo"),ot=U("BigPrice"),it=U("GreenUrl"),at=U("MarketPlaceFavicon"),ct=U("Content"),st=U("Appendix"),ut=U("AppendixDivider"),lt=Object(r.withRegistry)(Je)(function(e){var t=e.source,n=e.theme,o=e.url,i=e.decodedUrl,a=e.domain,u=e.title,l=e.price,f=e.moneyId,p=e.imageUrl,h=e.shopRating,g=e.cashback,y=e.modelRating,O=e.oldPrice,w=e.currency,C=void 0===w?"RUR":w,j=e.text,E=e.onShow,S=e.onButtonClick,k=e.onImageClick,_=e.onPathClick,P=e.onTitleClick,I=e.favicon,x=e.isMarketPlace,R=e.pos,N=e.children,M=e.experiments,T=Object(r.useComponentRegistry)(U()).MarketIcon,L=Object(c.useRef)(null),D=Object(H.decodeHTMLEntities)(u),B=Object(H.decodeHTMLEntities)(j||"");s.a.useEffect(function(){E&&E()},[o,E]);var A=function(e){var t=e.source,n=Object(v.b)(),r=c.useMemo(function(){var e;return{name:"image",attrs:null===(e=Z("image",n,t))||void 0===e?void 0:e.attrs}},[n,t]),o=c.useMemo(function(){var e;return{name:"title",attrs:null===(e=Z("title",n,t))||void 0===e?void 0:e.attrs}},[n,t]),i=c.useMemo(function(){var e;return{name:"path",attrs:null===(e=Z("path",n,t))||void 0===e?void 0:e.attrs}},[n,t]);return{buttonLogNode:c.useMemo(function(){var e;return{name:"button",attrs:null===(e=Z("button",n,t))||void 0===e?void 0:e.attrs}},[n,t]),pathLinkLogNode:i,titleLogNode:o,imageLogNode:r}}({source:t}),F=A.imageLogNode,W=A.titleLogNode,V=A.pathLinkLogNode,G=A.buttonLogNode,Y=Ze(s.a.useState(!1),2),K=Y[0],X=Y[1];Object(z.a)(function(){X(!1)},[p]);var $=Boolean(p&&!K),ee=s.a.useMemo(function(){return[{url:o,text:x?et("Яндекс.Маркет",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}):a,onClick:_,logNode:V}]},[o,a,x,_,V]),te=y&&0!==Number(y),ne=y&&te&&s.a.createElement("div",{className:U("ModelRating",{level:y&&Math.floor(Number(y)),type:$?"image-sticker":"title-suffix"})},function(e){return parseFloat(e).toFixed(1).replace(".",",")}(y)),oe=s.a.createElement("div",{className:tt},s.a.createElement(J,{url:o,imageUrl:p,title:D,onClick:k,onError:function(){return X(!0)},logNode:F}),$&&ne),ie=s.a.createElement($e,{className:U("Title",{withModelRating:!$&&Boolean(ne)},[m]),theme:"normal",url:o,onClick:P,logNode:W},D,!$&&ne),ae=s.a.createElement("div",{className:nt},B),ce=s.a.createElement(re,{value:h}),se=void 0;x?se=s.a.createElement(T,{className:at}):I&&(se=s.a.createElement(b.a,{favicon:I}));var ue=s.a.createElement("div",{className:rt},s.a.createElement(d.a,{className:it,favicon:se,items:ee}),"market"===t&&!x&&ce),le=s.a.createElement(Q,{value:l,oldValue:O,currency:C,cashback:g,className:ot}),de=s.a.createElement(ye,{url:o,decodedUrl:i,withImage:$,isMarketPlace:x,offerId:!M.disableAddToCart&&x?f:void 0,pos:R,price:l,currency:C,tooltipScope:L,onExternalClick:S,logExternalButtonNode:G});return s.a.createElement("div",{className:U({source:t,theme:n,withImage:$,withDescription:!0},[q.a]),ref:L},s.a.createElement("div",{className:ct},s.a.createElement("div",{className:U("Info",{withImage:$})},$&&oe,ie,ue,B?ae:null,le,de)),N&&s.a.createElement("div",{className:st},s.a.createElement("div",{className:ut}),N))}),dt=Object(v.d)(Object(p.withBaobab)({name:"MarketSnippet",events:{onShow:Object(p.logTech)("show",$("shown")),onPathClick:Object(p.logClick)($("path")),onImageClick:Object(p.logClick)($("image")),onTitleClick:Object(p.logClick)($("title")),onButtonClick:Object(p.logClick)($("button"))}})(lt)),ft=n(77),pt=function(){return(pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ht=Object(o.compose)(Object(A.e)(function(e){var t=Object(y.j)(e),n=t&&t.marketSnippet,r=n&&Object(y.d)(e,n.punycode||n.domain),o=(e.config.marketSnippetParams||{}).experiments;return pt(pt({experiments:void 0===o?{}:o},t&&t.marketSnippet),{pos:t&&t.pos,favicon:r&&r.data})}),Object(ft.a)(["domain","title","url","price"])),mt=n(1264),vt=n(518),bt=n(490),gt=n(482),yt=Object(i.cn)("MMViewerTags"),Ot=n(292),wt=n(419),Ct=n(210);n(898);var jt=c.memo(function(e){var t=e.text,n=e.tld,r=e.target,o=e.onClick,i=e.onVisible,a=e.expRedesign,s=c.useMemo(function(){return function(e,t){return Object(Ct.a)("images",e,{text:t,source:"related-duck"})}(n,t)},[n,t]),u=c.useCallback(function(e){return function(e,t){if(e&&e.parentElement){var n=e.parentElement.getBoundingClientRect().bottom;e.getBoundingClientRect().bottom>n||t&&t()}}(e,i)},[i]),l=c.useCallback(function(e){return o&&o(e,s)},[o,s]);return c.createElement("a",{ref:u,className:yt("Item",{expRedesign:a}),href:s,target:r||"_blank",onClick:l},t)}),Et=Object(p.withBaobab)({name:"tag"})(jt),St=c.memo(function(e){var t=e.expRedesign,n=e.className;return c.createElement("span",{className:yt("Item",{blink:!0,expRedesign:t},[n])})}),kt={more:{icon:s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd"},s.a.createElement("path",{d:"M8.75 0.5L5 4.1L1.25 0.5L0.5 1.22L5 5.5L9.5 1.22L8.75 0.5Z"})),width:10,height:6}},_t=function(e){var t=e.className,n=e.icon,r=kt[n],o=r.icon,i=r.width,a=r.height;return s.a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+i+" "+a,width:12,height:12},o)},Pt=(n(899),function(e){var t=e.onClick;return s.a.createElement("div",{className:yt("Item",{expRedesign:!0},[yt("ItemMore")]),onClick:t},s.a.createElement(_t,{className:yt("ItemMoreIcon"),icon:"more"}))}),It=(n(897),Object(i.cn)("MMViewerTagsPlaceholder")),xt=function(e){for(var t=e.lines,n=void 0===t?1:t,r=new Array(n),o=0;o<n;o++)r[o]=s.a.createElement(s.a.Fragment,{key:o},s.a.createElement(St,{expRedesign:!0,className:It("Item",{small:o%2===1})}),s.a.createElement(St,{expRedesign:!0,className:It("Item",{small:o%2===0})}));return s.a.createElement("div",{className:It()},r)},Rt=(n(896),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Nt=function(){return(Nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Mt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Tt=Object(i.cn)("MMViewerTags");var Lt=function(e){var t=Object(y.j)(e),n=Object(y.c)(e);return{reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,rimid:t&&t.rimid,openServiceOnNewTab:e.config.openServiceOnNewTab,tld:e.globalContext.tld,tagsItem:Object(Ot.h)(e,Object(Ot.i)(Object(y.j)(e))),expRedesignLines:function(e){var t=e.globalContext,n=e.experiments,r=void 0===n?{}:n;if("number"!==typeof r.duckRedesign)return;if(t.isCommercialEnabled||t.isCommercialQuery)return 0;return r.duckRedesign}(e)}};var Dt,Bt=function(e){return Object(A.e)(Lt)(e)}(function(e){var t=Object(p.withBaobab)({name:"tags"})(e);return function(e){return 0===e.expRedesignLines?null:c.createElement(v.a,null,function(n){return c.createElement(t,Nt({logNode:{events:{onTagShow:Object(p.logTech)("show",function(e,t){var r=Mt(t,2),o=r[0],i=r[1];return Object(g.b)(n.tagsShown,o,i)})}},tagClickedCounter:n.tagsClicked},e))})}}(function(e){function t(t){var n=e.call(this,t)||this;return n.visibleTagsCount=0,n.onTagVisible=n.onTagVisible.bind(n),n.handleMore=n.handleMore.bind(n),n}return Rt(t,e),t.prototype.handleMore=function(){var e=this.props,t=e.reqid,n=e.pos;Object(de.a)("/image/new/preview/tags/more",{reqid:t,vars:{pos:n}})},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.tagsItem,n=e.reqid,r=e.rimPos,o=e.pos,i=e.rimid,a=e.onTagShow;if(t&&t.data&&t.data.length&&this.shownData!==t.data){if(a){var c={pos:o,visibleTags:this.visibleTagsCount};"undefined"!==typeof r&&(c.rim_id=i,c.rim_index=r),a(c,{reqid:n})}this.shownData=t.data}},t.prototype.render=function(){var e=this.props,t=e.tagsItem,n=e.expRedesignLines,r=Boolean(n);return this.visibleTagsCount=0,t?r?t.data&&t.data.length?c.createElement("div",{className:Tt({expRedesign:!0})},c.createElement(wt.a,{items:this.renderItems(),more:c.createElement(Pt,{onClick:this.handleMore}),margin:6,itemMinWidth:65,lines:n})):null:t.data&&t.data.length?c.createElement("div",{className:Tt()},this.renderItems()):null:c.createElement("div",{className:Tt()},r?c.createElement(xt,{lines:n}):c.createElement(c.Fragment,null,c.createElement(St,null)," ",c.createElement(St,null),c.createElement(St,null)," ",c.createElement(St,null)))},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.tagsItem,r=t.expRedesignLines,o=t.reqid,i=t.rimPos,a=t.rimid,s=t.pos,u=t.tagClickedCounter,l=t.onTagClick,d=t.tld,f=Boolean(r),h=Object(g.a)(u),m={pos:s};return"undefined"!==typeof i&&(m.rim_id=a,m.rim_index=i),n&&n.data&&n.data.length?n.data.map(function(t,n){return c.createElement(Et,{onVisible:e.onTagVisible,onClick:l,tld:d,key:t,text:t,target:e.props.openServiceOnNewTab?"_blank":"_self",expRedesign:f,logNode:{attrs:h&&h.attrs,events:{onClick:Object(p.logClick)(Object(g.b)(u,Nt(Nt({},m),{"tag-position":n,text:t}),{reqid:o,pos:s}))}}})}):[]},t.prototype.onTagVisible=function(){this.visibleTagsCount++},t}(c.Component))),At=n(167),Ft=n(483),Ut=n(22),zt=n(209),Ht=Object(i.cn)("MMSchemaOrgSnippet"),qt=n(1017),Wt=n(388),Vt=(n(892),Object(qt.a)(Wt.a)),Gt=function(e){var t=e.url,n=e.onClick,r=e.logNode,o=e.children,i=e.minified,a=Ht("Title",{minified:i},[m]);return c.createElement(Vt,{className:a,theme:"normal",url:t,onClick:n,logNode:r},o)},Yt=n(283),Kt=n(295),Xt=(n(893),_()(Kt)),Qt=Ht("GreenUrl"),Jt=Ht("GreenUrlLine"),Zt=Ht("Favicon"),$t=Ht("GreenUrlSeparator"),en=((Dt={})[Yt.a.inStock]=Xt("В наличии",{context:"Товар есть в наличии"}),Dt[Yt.a.preOrder]=Xt("Предзаказ",{context:"Товар доступен по предзаказу"}),Dt[Yt.a.soldOut]=Xt("Товар закончился",{context:"Товара нет в наличии"}),Dt),tn=function(e){var t=e.availability,n=t&&en[t];return n?c.createElement(c.Fragment,null,c.createElement("div",{className:$t}),c.createElement("div",{className:Ht("Availability",{type:t})},n)):null},nn=Object(p.withBaobab)({name:"MMSchemaOrgSnippetGreenUrl",events:{onClick:Object(p.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.domain,r=e.onClick,o=e.favicon,i=e.availability,a=c.useMemo(function(){return{name:"path",attrs:e.logNode&&e.logNode.attrs}},[e.logNode]),s=c.useMemo(function(){return[{url:t,text:n,onClick:r}]},[t,n,r]);return c.createElement("div",{className:Jt},c.createElement(d.a,{logNode:a,className:Qt,favicon:o?c.createElement(b.a,{className:Zt,favicon:o}):void 0,items:s}),c.createElement(tn,{availability:i}))}),rn=(n(894),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),on=_()(Kt),an=Ht("Description"),cn=Ht("ReadMore"),sn=Object(qt.a)(Wt.a),un=Object(p.withBaobab)({name:"MMSchemaOrgSnippetDescription",events:{onExpand:Object(p.logClick)(function(e){var t=e.props;return Object(g.b)(t.readMoreCounter,{action:"expand"})}),onCollapse:Object(p.logClick)(function(e){var t=e.props;return Object(g.b)(t.readMoreCounter,{action:"collapse"})})}})(function(e){var t=e.text,n=e.onExpand,r=e.onCollapse,o=e.fullText,i=void 0===o?"":o,a=e.readMoreEnabled,s=(void 0===a||a)&&Boolean(i)&&i.length!==t.length,u=rn(c.useState(!0),2),l=u[0],d=u[1],p=c.useCallback(function(){l?n&&n():r&&r(),d(!l)},[l,n,r]);return s?c.createElement("div",{className:an},c.createElement(f.a,{start:"<hl>",end:"</hl>"},l?t:i),c.createElement(sn,{onClick:p,className:cn,theme:"normal"},l?on("Читать еще",{context:"Развернуть описание схема-орг сниппета"}):on("Скрыть",{context:"Свернуть описание схема-орг сниппета"}))):c.createElement("div",{className:an},c.createElement(f.a,{start:"<hl>",end:"</hl>"},t))}),ln=(n(895),Object(o.compose)(w.a,C.a,we.a,E.a)(S.a)),dn=Ht("Button"),fn=_()(Kt),pn=Object(p.withBaobab)({name:"MMSchemaOrgSnippetButton",events:{onClick:Object(p.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return s.a.createElement(ln,{className:dn,theme:"action",width:"max",size:"l",type:"link",target:"_blank",url:t,onClick:n},fn("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),hn=(n(891),n(371)),mn=function(){return(mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},vn=Ht("Content"),bn=Ht("Info"),gn=Ht("ShopInfo"),yn=Ht("HeaderLine"),On=Ht("TitlePriceSeparator"),wn=Ht("PriceWrap"),Cn=Ht("Price"),jn=function(e){return{pinned:Number(Boolean(e.minified)),availability:e.availability}},En=Object(o.compose)(v.d,Object(p.withBaobab)({name:"MMSchemaOrgSnippetPresenter",events:{onShow:Object(p.logClick)(function(e){var t,n=e.props;return Object(g.b)(null===(t=n.counters.schemaOrg)||void 0===t?void 0:t.shown,mn(mn({},jn(n)),Object(O.b)({dataSource:n.type,pos:n.pos,decodedUrl:n.url})))})}}))(function(e){var t,n,r,o,i,a,s=e.minified,u=void 0!==s&&s,l=e.onShow,d=e.favicon,f=e.domain,h=e.title,m=e.type,v=e.clickSource,b=e.url,y=e.price,w=e.currency,C=e.text,j=e.availability,E=e.fullText,S=e.pos,k=e.counters,_=e.aside,P=c.useCallback(function(t){return Object(g.b)(t,mn(mn({},jn(e)),Object(O.a)({pos:S,clickSource:v,dataSource:m,actionType:"greenurl"})),void 0,{href:b})},[S,u,j,v,m,b]);return c.useEffect(function(){l&&l()},[b,l]),c.createElement("div",{className:Ht({minified:u},[q.a])},c.createElement("div",{className:vn},c.createElement("div",{className:bn},c.createElement("div",{className:Ht("HeaderWrap")},c.createElement("div",{className:yn},c.createElement(Gt,{minified:u,url:b,logNode:mn(mn({name:"MMSchemaOrgSnippetTitle"},Object(g.a)(null===(t=k.schemaOrg)||void 0===t?void 0:t.title)||{}),{events:{onClick:Object(p.logClick)(P(null===(n=k.schemaOrg)||void 0===n?void 0:n.title))}})},h),u?c.createElement("span",{className:On},"–"):null,u?c.createElement(V.a,{className:Cn,value:y,currency:w||"RUR"}):null),_&&c.createElement("div",{className:Ht("Aside")},_)),c.createElement("div",{className:gn},c.createElement(nn,{logNode:Object(g.a)(null===(r=k.schemaOrg)||void 0===r?void 0:r.path),counter:P(null===(o=k.schemaOrg)||void 0===o?void 0:o.path),availability:j,favicon:d,url:b,domain:f})),u?c.createElement(hn.a,{minified:!0}):null,u?null:c.createElement(c.Fragment,null,C?c.createElement(un,{key:b,text:C,fullText:E,readMoreEnabled:!0,readMoreCounter:P(null===(i=k.schemaOrg)||void 0===i?void 0:i.readMore)}):null,c.createElement(hn.a,null),c.createElement("div",{className:wn},c.createElement(Q,{className:Cn,value:y,currency:w||"RUR"})),c.createElement(pn,{url:b,counter:P(null===(a=k.schemaOrg)||void 0===a?void 0:a.button)})))))}),Sn=function(){return(Sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kn=Object(o.compose)(Object(A.e)(function(e){var t=Object(y.j)(e),n=t&&t.schemaOrgSnippet,r=n&&Object(y.d)(e,n.punycode||n.domain);return n&&"schemaorg"===n.source?Sn(Sn({},t&&t.schemaOrgSnippet),{shownImage:t,pos:t&&t.pos,favicon:r&&r.data}):{}}),Object(ft.a)(["source"])),_n=Object(o.compose)(kn)(En),Pn=new r.Registry({id:Object(h.a)()}),In=Object(o.compose)(gt.a,Object(o.composeU)(bt.a,vt.a))(mt.a);Pn.set(a(),F(B)),Pn.set(U(),ht(dt)),Pn.set(Object(mt.b)(),In),Pn.set(Ht(),_n),Pn.set(yt(),Bt),Pn.set(Object(At.a)(),Ft.a),Pn.set(Object(Ut.a)(),zt.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return Me});var r=n(0),o=n.n(r),i=n(1),a=n(5),c=n.n(a),s=n(6),u=n(47),l=(n(807),Object(i.createClassNameModifier)(Object(u.b)(),{type:"favorites-empty"})),d=(n(808),Object(i.createClassNameModifier)(Object(u.b)(),{type:"favorites-filled"})),f=n(46),p=n(54),h=n(189),m=n(28),v=n(49),b=n(1234),g=n(2),y=n(567),O=n(350),w=n(9),C=n(3),j=Object(C.cn)("FavoritesIframe"),E=(n(809),function(e){var t=e.iframeUrl,n=e.zIndex,r=e.status,i=e.onIframeLoad,a=Object(g.useComponentRegistry)(j()).Spin;return o.a.createElement(o.a.Fragment,null,"load"===r?o.a.createElement(a,{progress:!0,view:"default",size:"m"}):null,t?o.a.createElement("div",{className:j("Content")},o.a.createElement("iframe",{src:t,style:{zIndex:n},onWheel:w.a,onLoad:i,"aria-hidden":!0})):null)}),S=n(11),k=function(){if(S.a){var e=document.body;e&&(e.style.overflow="hidden")}},_=(n(810),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),P=n(811),I=function(e){function t(t){var n=e.call(this,t)||this;return n.container=o.a.createRef(),n.win=window,n.state={saved:!1,cardData:void 0},n.loadIframeFirstTime=n.loadIframeFirstTime.bind(n),n.loadIframe=n.loadIframe.bind(n),n.onIframeLoad=n.onIframeLoad.bind(n),n.getLoaderUrl=n.getLoaderUrl.bind(n),n.getIframeUrl=n.getIframeUrl.bind(n),n.getRPCBridge=n.getRPCBridge.bind(n),n.modalClose=n.modalClose.bind(n),n}return _(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.status;t!==e.status&&"load"===t&&(this.setState({saved:!1,cardData:void 0}),this.loadIframeFirstTime()),"ready"===t&&k()},t.prototype.onIframeLoad=function(e){if(e&&e.target&&this.rpcBridge){var t=e.target;this.rpcBridge.contrAgent.win=t.contentWindow,this.rpcBridge.onIframeLoad()}},t.prototype.getIframeUrl=function(){var e=this.props,t=e.source_type,n=e.iframeOrigin,r=void 0===n?window.location.origin:n,o=e.iframePath;return(this.state.iframeUrl||r+o)+(t?"&source_type="+t:"")},t.prototype.getRPCBridge=function(){return this.rpcBridge?this.rpcBridge:new P(this,{url:this.state.iframeUrl})},t.prototype.getLoaderUrl=function(){var e=this.props,t=e.loaderUrl,n=e.baseUrl,r=e.loaderVersion;return t||n+"/iframe-loader/'"+r+"/index.min.js"},t.prototype.loadIframe=function(e){var t=this;k(),this.setState({iframeUrl:e||this.getIframeUrl()},function(){t.currentIframeUrl=t.state.iframeUrl,t.rpcBridge=t.getRPCBridge(),t.rpcBridge.pushMessagesToStack=!0})},t.prototype.removeIfame=function(){this.rpcBridge&&(this.rpcBridge.clean(),this.rpcBridge=void 0,this.currentIframeUrl=void 0)},t.prototype.loadIframeFirstTime=function(e){if((this.currentIframeUrl&&e&&this.currentIframeUrl!==e||!e&&this.currentIframeUrl!==this.getIframeUrl())&&this.removeIfame(),void 0!==this.rpcBridge)return this.ready();this.loadIframe(e)},t.prototype.ready=function(){this.addCard(),this.props.readyIframe()},t.prototype.close=function(e){this.cardSaved(e,this.modalClose)},t.prototype.cardSaved=function(e,t){void 0===t&&(t=w.a),e&&e.card&&e.card.board?this.setState({saved:!0,cardData:e},t):this.setState({saved:!1,cardData:void 0},t)},t.prototype.addCard=function(){var e=this.rpcBridge,t=this.props,n=t.card,r=t.sourceName,o=t.onEditCard,i=t.onAddCard;n&&n.task_id?o():i(),void 0!==e&&e.invokeMethod("pdb-add-card",{card:n,sourceName:r})},t.prototype.modalClose=function(){var e=this.state,t=e.cardData,n=e.saved,r=this.props,o=r.onOutsideClick,i=r.closeIframe,a=r.onNoAction;o(),function(){if(S.a){var e=document.body;e&&(e.style.overflow="")}}(),n||(i({eventName:"closed"}),a()),n&&t&&t.card&&i({eventName:"saved",card:t.card})},t.defaultProps={zIndex:110002,baseUrl:"https://yastatic.net/q/global-notifications",loaderVersion:"v0.0.3",iframePath:"/collections/add/?bus=2"},t}(o.a.Component),x=n(709),R=n(921),N=n(71),M=n(1262),T=n(1145),L=Object(i.compose)(x.a,R.a)(N.a),D=Object(i.compose)(M.a)(T.a),B=new g.Registry({id:j()});B.set("Spin",L),B.set("BottomSheet",function(){return null}),B.set("Modal",D);n(812);var A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.status,r=t.zIndex,i=this.state.iframeUrl;return o.a.createElement(g.ComponentRegistryConsumer,{id:j()},function(t){var a=t.Modal;return o.a.createElement(a,{className:j({theme:"normal"}),visible:"hidden"!==n,onClose:e.modalClose,theme:"normal",zIndex:r},o.a.createElement(E,{iframeUrl:i,status:n,zIndex:r,onIframeLoad:e.onIframeLoad}))})},t}(I),U=Object(g.withRegistry)(B)(F),z=n(911),H=Object(C.cn)("FavoritesPopup"),q=(n(813),c()(z)),W=Object(r.memo)(function(){var e=Object(g.useComponentRegistry)(H()).Spin;return o.a.createElement("div",{className:H("Description",{type:"slim"})},o.a.createElement("div",{className:H("Progress")},o.a.createElement(e,{className:H("Spin"),progress:!0,view:"default",size:"xxs"}),q("Добавляем в избранное...")))}),V=Object(r.memo)(function(e){var t=e.onOutsideClick,n=e.onLinkClick,r=e.onEditButtonClick,i=e.board,a=e.loginUrl,c=e.avatar,s=e.avatarId,u=e.loggedIn,l=Object(g.useComponentRegistry)(H()),d=l.Button,f=l.Link,p=l.UserPic;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:H("Description")},c&&o.a.createElement(p,{size:"m",avatarId:s}),o.a.createElement("div",{className:H("Message")},q("Добавлено в избранное:"),o.a.createElement(f,{theme:"strong",onClick:n,href:i&&i.url,className:H("CollectionName")},i.title))),o.a.createElement("div",{className:H("Buttons")},o.a.createElement(d,{className:H("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:u?r:t},q(u?"Изменить":"Не сейчас")),o.a.createElement(d,{className:H("Button",{theme:"action"}),size:"m",theme:"clear",type:"link",target:u?"_target":"",url:u?null===i||void 0===i?void 0:i.url:a},q(u?"Перейти":"Войти и изменить"))))}),G=Object(r.memo)(function(e){var t=e.removeMessage,n=e.isRemoved,r=t||q("Видео удалено из избранного");return o.a.createElement("div",{className:H("Description",{type:"slim"})},o.a.createElement("div",{className:H("Message")},n?r:q("Не удалось добавить в избранное")))}),Y=function(e){var t=e.className,n=e.onOutsideClick,i=e.status,a=e.visible,c=e.loggedIn,s=e.onClickEdit,u=e.board,l=e.tone,d=e.loginUrl,f=e.anchor,p=e.scope,h=e.position,m=e.mainOffset,v=e.secondaryOffset,b=e.tailOffset,y=e.removeMessage,O=e.fixed,w=void 0===O||O,C=e.avatar,j=e.zIndex,E=e.directions,S=void 0===E?["bottom-center","bottom-left","bottom-right"]:E,k=e.avatarId,_=void 0===k?"0/0-0":k,P=e.hasTail,I=e.onClose,x=e.onLinkClick,R=Object(g.useComponentRegistry)(H()).Popup,N=Object(r.useCallback)(function(){n(),I()},[n,I]),M="saved"===i,T="progress"===i,L="removed"===i,D="error"===i,B=L||D||T,A=Object(r.useMemo)(function(){var e={};return w&&(e.position="fixed"),e},[w]);return o.a.createElement(R,{className:H({tone:l},[t]),visible:a,onClose:n,directions:S,theme:"normal",tone:l,view:"tooltip",zIndex:j||3300,target:"anchor",anchor:f,scope:p,hasTail:P,position:h,style:A,mainOffset:m,secondaryOffset:v,tailOffset:b},o.a.createElement("div",{className:H("Close",{center:B}),title:"Закрыть",onClick:N}),T?o.a.createElement(W,null):null,M?o.a.createElement(V,{onOutsideClick:n,onLinkClick:x,onEditButtonClick:s,loginUrl:d,board:u,avatar:C,avatarId:_,loggedIn:c}):null,L||D?o.a.createElement(G,{removeMessage:y,isRemoved:L}):null)},K=n(529),X=n(919),Q=n(420),J=n(1230),Z=n(740),$=n(1231),ee=n(1083),te=n(531),ne=n(611),re=n(922),oe=n(1232),ie=n(1233),ae=n(252),ce=Object(i.compose)(K.a,ae.b,ae.a,X.a)(Q.a),se=Object(i.compose)(J.a)(Z.a),ue=Object(i.compose)(x.a,$.a)(N.a),le=Object(i.compose)(ee.a,te.a,ne.a)(re.a),de=Object(i.compose)(oe.a)(ie.a),fe=new g.Registry({id:H()});fe.set("Popup",ce),fe.set("Link",se),fe.set("Spin",ue),fe.set("Button",le),fe.set("UserPic",de);n(821);var pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},he=Object(g.withRegistry)(fe)(function(e){return o.a.createElement(Y,pe({},e,{mainOffset:25,hasTail:!0}))}),me=new g.Registry({id:Object(O.a)()});me.set("FavoritesIframe",U),me.set("FavoritesPopup",he);var ve=Object(g.withRegistry)(me)(y.Favorites),be=(n(822),function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),ge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var ye=function(e){return function(t){return o.a.createElement(b.FavoritesContext.Consumer,null,function(n){return o.a.createElement(e,be({},t,{cache:n.cache[t.card.doc_id]||{isSaved:t.isFavorite},onStatusChange:n.changeStatus}))})}}(function(e){var t=e.onStatusChange,n=e.onFavoritesSaved,i=e.onFavoritesRemove,a=e.cache,c=e.card,s=ge(e,["onStatusChange","onFavoritesSaved","onFavoritesRemove","cache","card"]),u=Object(r.useCallback)(function(){t(c.doc_id,{cardId:c.id,isSaved:!0}),n()},[c.doc_id,c.id,t,n]),l=Object(r.useCallback)(function(){t(c.doc_id,{cardId:c.id,isSaved:!1}),null===i||void 0===i||i()},[c.doc_id,c.id,t,i]);return o.a.createElement(ve,be({},s,{card:c,isFavorite:a.isSaved,onFavoritesRemove:l,onFavoritesSaved:u}))}),Oe=n(247);var we=n(22),Ce=(n(806),n(50)),je=n(166),Ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=function(){return(Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ke=c()(je),_e=Object(h.a)(p.b),Pe=Object(i.composeU)(l,d)(u.a),Ie=Object(we.a)("AddToCollection"),xe=Object(we.a)("FavoritesPopup"),Re=function(e){var t=e.vars,n=e.reqid,o=e.text,i=e.innerRef,a=e.onClick;return r.createElement(f.a,null,function(e){return r.createElement(_e,{className:Ie,text:o,title:ke("В избранном",{context:"Всплывающая подсказка при наведении мышью на кнопку добавления в коллекцию"}),icon:r.createElement(Pe,{type:"favorites-filled"}),onClick:a,forwardRef:i,logNode:{events:{onClick:Object(s.logClick)(Object(m.b)(e.favoriteRemove,t,{reqid:n}))}}})})},Ne=function(e){var t=e.onClick,n=e.vars,o=e.reqid,i=e.text,a=e.innerRef;return r.createElement(f.a,null,function(e){return r.createElement(_e,{className:Ie,text:i,title:ke("В избранное",{context:"Всплывающая подсказка при наведении мышью на кнопку добавления в коллекцию"}),icon:r.createElement(Pe,{type:"favorites-empty"}),onClick:t,forwardRef:a,logNode:{events:{onClick:Object(s.logClick)(Object(m.b)(e.favoriteAdd,n,{reqid:o}))}}})})},Me=function(e){function t(t){var n=e.call(this,t)||this;return n.state={itemSavedToFavorite:!1,wasMounted:!1},n.wasMounted=!1,n.domNode=r.createRef(),n.getAddButton=n.getAddButton.bind(n),n.getRemoveButton=n.getRemoveButton.bind(n),n}return Ee(t,e),t.prototype.componentDidMount=function(){this.setState({wasMounted:!0})},t.prototype.componentWillUnmount=function(){this.setState({wasMounted:!1})},t.prototype.render=function(){var e,t=this.props,n=t.image,o=t.loggedIn,i=t.loginUrl,a=t.isFavorite,c=t.view,s=t.tld,u=t.avatarId,l=Boolean("compact"===c&&n.previewUrl);return e=this.state.wasMounted?r.createElement(ye,{hidePopupOnDocIdUpdate:!0,avatar:!0,fixedPopup:!1,loginUrl:i,card:function(e){var t=function(e){if(e)return e.dups&&e.dups.length?e.dups:e.images&&e.images.length?e.images:e.preview&&e.preview.length?e.preview:void 0}(e),n=Object(Oe.a)(e),r=n.title||"",o=t&&t[0],i=o?o.origin&&o.origin.url||o.url:"";return{doc_id:e.docid,description:r,content:(t||[]).map(function(e){return{source_type:"image",source:{url:function(e){return e?e.origin&&e.origin.url||e.url:""}(e)}}}),source_meta:{page_title:r,page_url:n.url||e.imgHref||i,page_domain:n.domain||""}}}(n),sourceName:"lego_img_viewer",loggedIn:Boolean(o),removeFrom:this.getRemoveButton,add:this.getAddButton,isFavorite:a,popupScope:this.domNode,popupClassName:xe,popupDirections:l?["bottom-center"]:["bottom-right"],popupSecondaryOffset:l?0:-19,popupTailOffset:l?30:19,removeMessage:ke("Картинка удалена из избранного",{context:"Сообщение об удалении из избранного"}),tld:s,tone:"dark",successTimeout:5e3,zIndex:1,avatarId:u,onLinkClick:v.a,onClosePopup:v.a,onCloseNoAction:v.a,onAddCard:v.a,onEditCard:v.a,onClickEdit:v.a,onFavoritesSaved:v.a,onFavoritesRemove:v.a}):a?this.getRemoveButton({}):this.getAddButton({onClick:v.a}),r.createElement("span",{ref:this.domNode,className:Object(we.a)("AddToCollectionWrapper",{view:c,wide:n.previewUrl?void 0:"yes"})},e)},t.prototype.getAddButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,c=e.innerRef,s=e.onClick;return t=a===Ce.b.twoLines&&o.previewUrl?"":ke("В избранное",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/t/--SfEefx43bpv7"}),r.createElement(Ne,{text:t,vars:{pos:o.pos},reqid:i,onClick:s,innerRef:c})},t.prototype.getRemoveButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,c=e.innerRef;return t=a===Ce.b.twoLines&&o.previewUrl?"":ke("В избранном",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqY"}),r.createElement(Re,Se({text:t,vars:{pos:o.pos},reqid:i,innerRef:c},e))},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(1),o=n(337),i=n(107),a=(n(778),Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"left"})),c=(Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"right"}),Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"both"}),n(779),Object(r.withBemMod)(Object(i.a)(),{vertical:!0})),s=n(0),u=n.n(s),l=n(3),d=Object(l.cn)("MMThumbImage"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=(n(777),function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),h=function(e,t){return function(n){var r=t(n);return function(t){return t.fit===e?u.a.createElement(r,f({},t)):u.a.createElement(n,f({},t))}}}("square",function(e){return function(t){var n=t.width,r=void 0===n?0:n,o=t.height,i=void 0===o?0:o,a=t.targetSize,c=t.fit,l=t.src,f=t.className,h=Object(s.useMemo)(function(){return function(e,t,n){var r;if(t&&e&&t>e&&t>n&&(r=(t/.02618-e/.02)/(t-n)),r)return r+"%"}(r,i,a)},[r,i,a]),m=i<a||r<a,v=i<a,b=Object(s.useMemo)(function(){return{yCentered:v,small:m}},[m,v]),g=Object(s.useMemo)(function(){return{backgroundPositionY:h,backgroundImage:"url("+l+")"}},[h,l]);return u.a.createElement(e,p({},t,{className:d({fit:c},[f])}),u.a.createElement("div",{className:d("Image",b),style:g}))}}),m=n(4),v=Object(l.cn)("Cover"),b=v("StickersWrapper"),g=(n(775),u.a.memo(function(e){var t=e.top,n=e.topLeft,r=e.topRight,o=e.bottom,i=e.bottomLeft,a=e.bottomRight;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement("div",{className:v("Sticker",{top:!0})},t),n&&u.a.createElement("div",{className:v("Sticker",{topLeft:!0})},n),r&&u.a.createElement("div",{className:v("Sticker",{topRight:!0})},r),o&&u.a.createElement("div",{className:v("Sticker",{bottom:!0})},o),i&&u.a.createElement("div",{className:v("Sticker",{bottomLeft:!0})},i),a&&u.a.createElement("div",{className:v("Sticker",{bottomRight:!0})},a))})),y=(n(776),u.a.memo(function(e){var t=e.className,n=e.height,r=e.children,o=e.forwardRef,i=e.onHover,a=e.wrapHeight,c=Object(m.__rest)(e,["className","height","children","forwardRef","onHover","wrapHeight"]),l=Object(s.useCallback)(function(e){i&&i("mouseenter"===e.type,o)},[i,o]),d=u.a.createElement(g,Object(m.__assign)({},c));return u.a.createElement("div",{className:v(null,[t]),ref:o,style:{height:n},onMouseEnter:i?l:void 0,onMouseLeave:i?l:void 0},r&&u.a.createElement("div",{className:v("Content")},r),"undefined"!==typeof a?u.a.createElement("div",{className:b,style:{height:a}},d):d)})),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},C=n(2),j=n(162),E=new C.Registry({id:Object(j.a)()}),S=function(e){return function(t){var n=t.stickers,r=w(t,["stickers"]),o=u.a.createElement(e,O({},r));return n?u.a.createElement(y,O({},n),o):o}}(h(function(e){var t=e.className,n=e.children;return u.a.createElement("div",{className:d({},[t])},n)})),k=Object(r.compose)(a,c)(o.a);E.set("Gallery",k),E.set("Thumb",S)},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(32),i=(n(397),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(13),s=n(27),u=n(32);function l(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function d(e){return e?(e.nodeName||"").toLowerCase():null}function f(e){return"html"===d(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function p(e){var t=d(e);if(t&&["html","body"].indexOf(t)>=0)return e.ownerDocument.body;if(function(e){return e instanceof l(e).HTMLElement}(e)){var n=function(e){return l(e).getComputedStyle(e)}(e),r=n.overflow,o=n.overflowX,i=n.overflowY;if(/auto|scroll|overlay|hidden/.test(r+i+o))return e}return p(f(e))}var h=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},m=function(e,t){return e.indexOf("-"+t)>0},v={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(c.a)()?document.body:null}},b={top:-9999,left:-9999},g=Object(a.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(o.createRef)(),n.tailRef=Object(o.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=p(t),o="body"===d(r),i=n.concat(r);return o?i:i.concat(e(f(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return h(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):h(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(m(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):m(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):m(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),h(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),m(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):m(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):m(n,"center")&&h(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,o=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),a=Object(r.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(c.a)()&&void 0!==o&&o(this.getPossibleDrawingParams()),i.a.createElement(e,Object(r.__assign)({},a,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(s.a)(this.popupRef,this.props.innerRef),tailRef:Object(s.a)(this.tailRef,this.props.tailRef),position:b}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,o={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},i=this.getPopupDimensions(this.popupRef),a=this.getAnchorDimensions(this.props.anchor),c=this.getViewportDimensions(),s=this.getScopeDimensions(this.props.scope),u=0;try{for(var l=Object(r.__values)(e),d=l.next();!d.done;d=l.next()){var f=d.value,p=this.getPopupPosition(f,a,i),h=this.getViewportFactor(p,c,i);if((h>u||this.state.direction===f)&&(o.popupPosition={top:p.top-(s.top+window.pageYOffset),left:p.left-(s.left+window.pageXOffset)},o.direction=f,u=h),u>.99)break}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(o.tailPosition=this.getTailPosition(o.direction,a,i)),o},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,c=i.height;t.area=r*o,t.height=Math.round(c),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return h(e,"bottom")?r.top=t.top+t.height+o.main:h(e,"top")?r.top=t.top-n.height-o.main:h(e,"left")?r.left=t.left-n.width-o.main:h(e,"right")&&(r.left=t.left+t.width+o.main),m(e,"right")?r.left=t.left+t.width-n.width-o.secondary:m(e,"left")?r.left=t.left+o.secondary:m(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:m(e,"top")?r.top=t.top+o.secondary:m(e,"center")&&(h(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:h(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,c=a?i:i/2,s=this.getOffsets();if(h(e,"bottom")?r.top=-c:h(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-c):h(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-c):h(e,"right")&&(r.left=-c),m(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-c-s.tail;else if(m(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-c+s.tail;else if(m(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-c-s.tail;else if(m(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-c+s.tail;else if(m(e,"center")){var u=a?c/2:c;h(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+s.tail:r.top=Math.ceil(n.popupHeight/2)-u+s.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),c=Math.max(e.top,t.top+o.viewport),s=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&c<s&&(r=(a-i)*(s-c)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),c=Math.floor(i.height),s=Math.floor(h(this.state.direction,"top")?a:a+c);if(s<n||n+r<s)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),f=Math.floor(i.width),p=Math.floor(h(this.state.direction,"left")?d:d+f);if(!(p>=u&&u+l>=p))return!1}return!0},n}(o.PureComponent)).defaultProps=v,t})},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(331),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(290),Object(r.withBemMod)(Object(o.b)(),{size:"l"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){r.useEffect(e,[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var r=n(0);t.useFirstMountState=function(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markup=function(e,t){for(var n,r,o=t.delimiters,i=t.highlighter,a=t.textPreprocessor,c=o.start,s=o.end,u=[],l=[],d=0,f=0,p=0,h=function(t){var o=!1===r?n:e.indexOf(c,t),i=!0===r?n:e.indexOf(s,t);return o>-1&&(o<i||-1===i)?(n=i,r=!0,d=c.length,o):(n=o,r=!1,d=s.length,i)},m=h(0);m>-1;){if(f!==m&&l.push(a(e.substring(f,m))),r)u.push(l),l=[];else if(u.length){var v=l;l=u.pop(),v.length&&l.push(i(v,p++))}m=h(f=m+d)}var b=e.substring(f);for(b&&l.push(a(b));u.length;)v=l,l=u.pop(),v.length&&l.push(i(v,p++));return l}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";var r;!function(e){e[e.disabled=0]="disabled",e[e.enabled=1]="enabled"}(r||(r={}))},function(e,t){},function(e,t,n){"use strict";var r,o;!function(e){e.organic="organic",e.wizard="wizard",e.adv="adv"}(r||(r={})),function(e){e.adv="banner"}(o||(o={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(112),s=(n(816),Object(a.withBemMod)(Object(c.b)(),{theme:"strong"},function(e){return function(t){t.theme;var n=Object(r.__rest)(t,["theme"]);return i.a.createElement(e,Object(r.__assign)({},n))}}))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(120),s=(n(829),Object(a.withBemMod)(Object(c.b)(),{theme:"strong"},function(e){return function(t){t.theme;var n=Object(r.__rest)(t,["theme"]);return i.a.createElement(e,Object(r.__assign)({},n))}}))},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(343),Object(r.withBemMod)(Object(o.b)(),{width:"max"}))},function(e,t,n){"use strict";n.d(t,"Favorites",function(){return l});var r=n(0),o=n.n(r),i=n(2),a=n(568),c=n(569),s=n(350),u=(n(562),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),l=function(e){function t(t){var n=e.call(this,t)||this;return n.innerRef=o.a.createRef(),n.state={isSaved:Boolean(n.props.isFavorite),popupVisible:!1,statusIframe:"hidden",cacheBoard:{}},n.controller=new c.a,n.onClickAdd=n.onClickAdd.bind(n),n.onClickRemove=n.onClickRemove.bind(n),n.handleClickEdit=n.handleClickEdit.bind(n),n.showProgressPopup=n.showProgressPopup.bind(n),n.hidePopup=n.hidePopup.bind(n),n.hideIframe=n.hideIframe.bind(n),n.loadIframe=n.loadIframe.bind(n),n.readyIframe=n.readyIframe.bind(n),n.closeIframe=n.closeIframe.bind(n),n}return u(t,e),t.prototype.componentDidUpdate=function(e){"saved"!==this.state.popupStatus&&"removed"!==this.state.popupStatus&&this.hideTimeout&&window.clearTimeout(this.hideTimeout),e.card.doc_id!==this.props.card.doc_id?(this.updateItemCachedState(),this.props.hidePopupOnDocIdUpdate&&(window.clearTimeout(this.hideTimeout),this.hidePopup())):this.props.isFavorite!==e.isFavorite&&this.forceUpdateItemCachedState(Boolean(this.props.isFavorite))},t.prototype.onClickAdd=function(){var e=this,t=this.props,n=t.card,r=t.loggedIn,o=t.sourceName,i=this.state.cacheBoard;!i[n.content[0].source_type]&&r||this.showProgressPopup(),this.controller.createCard(n,r,i,o).then(function(t){"saved"===t.eventName&&e.handlerFavoritesSaved(t),"iframe"===t.eventName&&e.loadIframe(t)})},t.prototype.onClickRemove=function(){var e=this,t=this.props,n=t.card,r=t.sourceName;this.controller.removeCard(n.doc_id,n,{byTaskId:!1},r).then(function(t){e.handlerFavoritesRemoved(t)})},t.prototype.handleClickEdit=function(){this.state.card&&this.loadIframe({card:this.state.card,fav:!0}),this.props.onClickEdit()},t.prototype.showProgressPopup=function(){this.setState({popupStatus:"progress",popupVisible:!0})},t.prototype.hidePopup=function(){this.setState({popupVisible:!1})},t.prototype.hideIframe=function(){this.setState({statusIframe:"hidden"})},t.prototype.loadIframe=function(e){this.setState({statusIframe:"load",card:e.card})},t.prototype.readyIframe=function(){this.setState({statusIframe:"ready",popupVisible:!1})},t.prototype.closeIframe=function(e){this.setState({statusIframe:"hidden"}),"saved"===e.eventName&&this.handlerFavoritesSaved(e)},t.prototype.handlerFavoritesSaved=function(e){var t=this,n=this.props.card,r=e&&e.card;if(n&&n.doc_id&&r&&r.doc_id&&n.doc_id!==r.doc_id)r.failed||this.controller.setCache(r.doc_id,{card_id:r.id,isSaved:!0});else if(r&&r.failed)this.setState({popupStatus:"error",popupVisible:!0,card:void 0});else{var o=this.state.cacheBoard;r&&r.board&&r.content[0].source_type&&r.board.id&&(o[r.content[0].source_type]=r.board.id),this.setState({popupStatus:"saved",popupVisible:!0,isSaved:!0,card:r,cacheBoard:o},function(){t.props.successTimeout&&(window.clearTimeout(t.hideTimeout),t.hideTimeout=window.setTimeout(t.hidePopup,t.props.successTimeout))}),this.props.onFavoritesSaved()}},t.prototype.handlerFavoritesRemoved=function(e){var t,n,r=this,o=this.props.card,i=e&&e.card;if(o&&o.doc_id&&i&&i.doc_id&&o.doc_id!==i.doc_id)i.failed||this.controller.setCache(i.doc_id,{card_id:i.id,isSaved:!1});else if(null===i||void 0===i?void 0:i.failed)this.setState({popupStatus:"error",popupVisible:!0,card:void 0});else{var a=this.state.cacheBoard;this.setState({popupStatus:"removed",statusIframe:"hidden",popupVisible:!0,isSaved:!1,card:i,cacheBoard:a},function(){r.props.successTimeout&&(window.clearTimeout(r.hideTimeout),r.hideTimeout=window.setTimeout(r.hidePopup,r.props.successTimeout))}),null===(n=(t=this.props).onFavoritesRemove)||void 0===n||n.call(t)}},t.prototype.updateItemCachedState=function(){var e,t=this.props.card.doc_id,n=!!this.controller.hasCachedState(t)&&Boolean(null===(e=this.controller.getCache(this.props.card.doc_id))||void 0===e?void 0:e.isSaved);this.state.isSaved!==n&&this.setState({isSaved:n})},t.prototype.forceUpdateItemCachedState=function(e){var t=this,n=this.props.card;this.setState({isSaved:e},function(){t.controller.setCache(n.doc_id,{card_id:n.id,isSaved:e})})},t.prototype.render=function(){var e=this,t=this.props,n=t.removeFrom,r=t.add,c=t.loggedIn,u=t.loginUrl,l=t.popupAnchor,d=t.popupScope,f=t.popupClassName,p=t.popupDirections,h=t.removeMessage,m=t.avatar,v=t.fixedPopup,b=t.zIndex,g=t.tone,y=t.avatarId,O=t.sourceName,w=t.onEditCard,C=t.onAddCard,j=t.onCloseNoAction,E=t.onLinkClick,S=t.onClosePopup,k=t.popupSecondaryOffset,_=t.popupTailOffset,P=this.state,I=P.isSaved,x=P.popupStatus,R=P.popupVisible,N=P.statusIframe,M=P.card;return o.a.createElement(i.ComponentRegistryConsumer,{id:Object(s.a)()},function(t){var i=t.FavoritesIframe,s=t.FavoritesPopup;return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.a,{innerRef:e.innerRef,removeFrom:n({onClick:e.onClickRemove}),add:r({onClick:e.onClickAdd}),isSaved:I}),o.a.createElement(s,{className:f,anchor:l||e.innerRef,scope:d,fixed:v,status:x,visible:R,loggedIn:c,tone:g,directions:p,loginUrl:u,board:M&&M.board,onClickEdit:e.handleClickEdit,onOutsideClick:e.hidePopup,onClose:S,onLinkClick:E,avatar:m,removeMessage:h,avatarId:y,zIndex:b,secondaryOffset:k,tailOffset:_}),o.a.createElement(i,{status:N,card:M,sourceName:O,readyIframe:e.readyIframe,closeIframe:e.closeIframe,onOutsideClick:e.hideIframe,onEditCard:w,onAddCard:C,onNoAction:j}))})},t}(o.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n.n(r),i=function(e){var t=e.isSaved,n=e.removeFrom,r=e.add,i=e.innerRef;return o.a.createElement("span",{ref:i},t?n:r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(){function e(){this.cache={},this.cacheBoardTypes={}}return e.prototype.createCard=function(e,t,n,o){var i=this,a=!1;if(!e||!e.doc_id)return new Promise(function(t){t({eventName:"saved",card:r(r({},e),{failed:!0})})});if("undefined"!==typeof t&&(a=!t),n[e.content[0].source_type]||a){var c=r(r({},e),{board:n&&n[e.content[0].source_type]});return this.favoritesRequest("POST",c,void 0,o).then(function(t){return i.favoritesRequestSuccess("create",e.doc_id,t.task_id),t}).then(function(t){return i.favoritesRequestFinally("create",e.doc_id,e,t)})}return new Promise(function(t){t({eventName:"iframe",card:e,fav:!0})})},e.prototype.addCard=function(e,t,n,o){var i=this,a=r({},t);return a.board=n,this.favoritesRequest("POST",a,void 0,o).then(function(t){return i.favoritesRequestSuccess("create",e,t.task_id),t}).then(function(n){return i.favoritesRequestFinally("create",e,t,n)})},e.prototype.removeCard=function(e,t,n,r){var o=this,i=this.getCache(e),a=i?i.card_id:void 0;return!a&&t&&t.card_id&&(a=t.card_id),a?this.favoritesRequest("DELETE",{},a,r).then(function(t){return o.favoritesRequestSuccess("remove",e,t.task_id),t}).then(function(n){return o.favoritesRequestFinally("remove",e,t,n)}):this.oldRemoveCard(e,t,n)},e.prototype.oldRemoveCard=function(e,t,n){var o=this,i=r({},t);if(n&&n.byTaskId){var a=this.getCache(e);i.task_id=a&&a.task_id}return fetch("/collections/api/favorites/cards/",{credentials:"same-origin",method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(t){return o.favoritesRequestSuccess("remove",e,t.task_id),t}).then(function(n){return o.favoritesRequestFinally("remove",e,t,n)})},e.prototype.moveCollectionsCard=function(e,t,n){var r=this;if(t&&e.card_id)return this.favoritesRequest("PATCH",{board_id:t},e.card_id,n).then(function(t){return r.favoritesRequestSuccess("move",e.item_id,t.task_id),t}).then(function(t){return r.favoritesRequestFinally("move",e.item_id,e,t)})},e.prototype.favoritesRequest=function(e,t,n,r){var o="/collections/api/v1.0/cards"+(n?"/"+n:"")+"?source_name="+(r||"serp-components")+"&source_version=video-viewer&ui=common";return this.getCrf().then(function(n){return fetch(o,{credentials:"same-origin",method:e,headers:{"Content-Type":"application/json","x-csrftoken":n["csrf-token"]},body:JSON.stringify(t)}).then(function(e){return e.json()})})},e.prototype.favoritesRequestSuccess=function(e,t,n){"create"===e&&this.setCache(t,{task_id:n})},e.prototype.favoritesRequestFinally=function(e,t,n,o){var i="create"===e||"move"===e?"saved":"removed",a=Boolean(o&&o.id);return o?("remove"!==e?this.setCache(t,{card_id:o.id,isSaved:a||this.hasCollectionCard(t)}):this.setCache(t,{isSaved:!1}),{eventName:i,card:r(r({},n),{id:o.id,item_id:t,failed:!a,card_id:o.id,task_id:o.task_id,board:o.board})}):{eventName:i,card:r(r({},n),{failed:!0})}},e.prototype.getCrf=function(){var e=this,t=this.crfToken&&this.crfToken.expires;return t&&1e3*Number(new Date(Number(t)))>Number(new Date)?new Promise(function(t){t(e.crfToken)}):fetch("/collections/api/v1.0/csrf-token",{credentials:"same-origin",method:"get",headers:{contentType:"application/json"}}).then(function(e){return e.json()}).then(function(t){return e.crfToken=t,t})},e.prototype.getCache=function(e){return this.cache[e]||null},e.prototype.setCache=function(e,t,n){var r=this.cache[e]||{},o=this.cacheBoardTypes||{};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);n&&(o[n.sourceType]=n.boardId),this.cache[e]=r,this.cacheBoardTypes=o},e.prototype.hasCachedState=function(e){var t=this.getCache(e);return Boolean(t)&&"isSaved"in t},e.prototype.hasCollectionCard=function(e){var t=this.getCache(e);return Boolean(t&&t.isSaved)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),o=n(187),i=new r.Registry({id:Object(o.b)()})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){var t=e.logged,n=e.counterParams,r=void 0===n?{}:n;this.logged=t,this.params=r}return e.prototype.send=function(e,t,n){var r=(this.logged?"-authorized=1":"-authorized=0")+(n?","+n:"");this.counter(e,r,t,this.params)},e.prototype.counter=function(e,t,n,r){r=r||{};var o,i=["reqid","yuid","serpid","service","ui"].reduce(function(e,t){return e+(r[t]?"/"+t+"="+r[t]:"")},"");window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTable&&(o=window.Ya.SerpContext.noSignTechTable);var a=window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTables||{};a.favorites&&(o=a.favorites);var c=document&&document.location&&document.location.host&&document.location.host.match(/^.*(\..+)$/),s="//yandex"+(c&&c[1]||".ru")+"/clck/click/pid=902/cid="+n+"/dtype=stred"+(e?"/path="+e:"")+(t?"/vars="+t:"")+i+(o?"/table="+o:"");(new Date).getTime(),document.location.href,document.createElement("IMG").setAttribute("src",s)},e}()},function(e,t,n){"use strict";function r(e){var t=!1;try{var n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();if(!r)return!1;r.removeAllRanges(),r.addRange(n),t=document.execCommand("copy"),r.removeAllRanges()}catch(e){return!1}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.copyToBufferFromHtml=r,t.copyToBuffer=function(e){var t=document.createElement("div");t.textContent=e,document.body.appendChild(t);var n=r(t);return document.body.removeChild(t),n}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(0),s=n(101),u=[],l=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function f(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach(function(r){var o=d(e[r]);o.loading?t.loading=!0:(t.loaded[r]=o.loaded,t.error=o.error),n.push(o.promise),o.promise.then(function(e){t.loaded[r]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=Promise.all(n).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function p(e,t){return c.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function h(e,t){var d,f;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var h=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:p,webpack:null,modules:null},t),m=null;function v(){return m||(m=e(h.loader)),m.promise}return u.push(v),"function"===typeof h.webpack&&l.push(function(){if(function(e){return"object"===r(n.m)&&e().every(function(e){return"undefined"!==typeof e&&"undefined"!==typeof n.m[e]})}(h.webpack))return v()}),f=d=function(t){function n(r){o(this,n);var a=i(this,t.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0,timedOut:!1}),m=e(h.loader),a._loadModule()},v(),a.state={error:m.error,pastDelay:!1,timedOut:!1,loading:m.loading,loaded:m.loaded},a}return a(n,t),n.preload=function(){return v()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(h.modules)&&h.modules.forEach(function(t){e.context.loadable.report(t)}),m.loading){"number"===typeof h.delay&&(0===h.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},h.delay)),"number"===typeof h.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},h.timeout));var t=function(){e._mounted&&(e.setState({error:m.error,loaded:m.loaded,loading:m.loading}),e._clearTimeouts())};m.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?c.createElement(h.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?h.render(this.state.loaded,this.props):null},n}(c.Component),d.contextTypes={loadable:s.shape({report:s.func.isRequired})},f}function m(e){return h(d,e)}m.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return h(f,e)};var v=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return c.Children.only(this.props.children)},t}(c.Component);function b(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then(function(){if(e.length)return b(e)})}v.propTypes={report:s.func.isRequired},v.childContextTypes={loadable:s.shape({report:s.func.isRequired}).isRequired},m.Capture=v,m.preloadAll=function(){return new Promise(function(e,t){b(u).then(e,t)})},m.preloadReady=function(){return new Promise(function(e,t){b(l).then(e,e)})},e.exports=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTargetAnchor=void 0;var r=n(4),o=r.__importStar(n(0)),i=n(1),a=n(245),c=n(513),s=n(480),u=n(888),l=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},d=function(e,t){return e.indexOf("-"+t)>0},f={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:a.canUseDOM()?document.body:null}},p={top:-9999,left:-9999};t.withTargetAnchor=i.withBemMod(s.cnPopup(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=o.createRef(),n.tailRef=o.createRef(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=u.listScrollParents(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return l(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):l(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(d(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):d(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):d(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),l(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),d(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):d(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):d(n,"center")&&l(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return r.__extends(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,i=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),s=r.__rest(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return a.canUseDOM()&&void 0!==i&&i(this.getPossibleDrawingParams()),o.default.createElement(e,r.__assign({},s,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:c.mergeAllRefs(this.popupRef,this.props.innerRef),tailRef:c.mergeAllRefs(this.tailRef,this.props.tailRef),position:p}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,o={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},i=this.getPopupDimensions(this.popupRef),a=this.getAnchorDimensions(this.props.anchor),c=this.getViewportDimensions(),s=this.getScopeDimensions(this.props.scope),u=0;try{for(var l=r.__values(e),d=l.next();!d.done;d=l.next()){var f=d.value,p=this.getPopupPosition(f,a,i),h=this.getViewportFactor(p,c,i);if((h>u||this.state.direction===f)&&(o.popupPosition={top:p.top-(s.top+window.pageYOffset),left:p.left-(s.left+window.pageXOffset)},o.direction=f,u=h),u>.99)break}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(o.tailPosition=this.getTailPosition(o.direction,a,i)),o},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,c=i.height;t.area=r*o,t.height=Math.round(c),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return l(e,"bottom")?r.top=t.top+t.height+o.main:l(e,"top")?r.top=t.top-n.height-o.main:l(e,"left")?r.left=t.left-n.width-o.main:l(e,"right")&&(r.left=t.left+t.width+o.main),d(e,"right")?r.left=t.left+t.width-n.width-o.secondary:d(e,"left")?r.left=t.left+o.secondary:d(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:d(e,"top")?r.top=t.top+o.secondary:d(e,"center")&&(l(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:l(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,c=a?i:i/2,s=this.getOffsets();if(l(e,"bottom")?r.top=-c:l(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-c):l(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-c):l(e,"right")&&(r.left=-c),d(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-c-s.tail;else if(d(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-c+s.tail;else if(d(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-c-s.tail;else if(d(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-c+s.tail;else if(d(e,"center")){var u=a?c/2:c;l(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+s.tail:r.top=Math.ceil(n.popupHeight/2)-u+s.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),c=Math.max(e.top,t.top+o.viewport),s=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&c<s&&(r=(a-i)*(s-c)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),c=Math.floor(i.height),s=Math.floor(l(this.state.direction,"top")?a:a+c);if(s<n||n+r<s)return!1;var u=Math.floor(t.left),d=Math.floor(t.width),f=Math.floor(i.left),p=Math.floor(i.width),h=Math.floor(l(this.state.direction,"left")?f:f+p);if(!(h>=u&&u+d>=h))return!1}return!0},n}(o.PureComponent)).defaultProps=f,t})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withThemeNormal=void 0;var r=n(1),o=n(480);n(889),t.withThemeNormal=r.withBemMod(o.cnPopup(),{theme:"normal"})},,function(e,t,n){"use strict";n.d(t,"a",function(){return $});var r=n(0),o=n.n(r),i=n(5),a=n.n(i),c=n(1),s=n(3),u=n(126),l=(n(828),Object(c.withBemMod)(Object(u.b)(),{theme:"normal"})),d=n(4),f=n(190),p=n(211);function h(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function m(e){return e?(e.nodeName||"").toLowerCase():null}function v(e){return"html"===m(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function b(e){var t=m(e);if(t&&["html","body"].indexOf(t)>=0)return e.ownerDocument.body;if(function(e){return e instanceof h(e).HTMLElement}(e)){var n=function(e){return h(e).getComputedStyle(e)}(e),r=n.overflow,o=n.overflowX,i=n.overflowY;if(/auto|scroll|overlay|hidden/.test(r+i+o))return e}return b(v(e))}var g,y=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},O=function(e,t){return e.indexOf("-"+t)>0},w={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(f.a)()?document.body:null}},C={top:-9999,left:-9999},j=Object(c.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(r.createRef)(),n.tailRef=Object(r.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=b(t),o="body"===m(r),i=n.concat(r);return o?i:i.concat(e(v(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return y(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):y(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(O(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):O(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):O(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),y(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),O(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):O(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):O(n,"center")&&y(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(d.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,r=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),i=Object(d.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(f.a)()&&void 0!==r&&r(this.getPossibleDrawingParams()),o.a.createElement(e,Object(d.__assign)({},i,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(p.a)(this.popupRef,this.props.innerRef),tailRef:Object(p.a)(this.tailRef,this.props.tailRef),position:C}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,r={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},o=this.getPopupDimensions(this.popupRef),i=this.getAnchorDimensions(this.props.anchor),a=this.getViewportDimensions(),c=this.getScopeDimensions(this.props.scope),s=0;try{for(var u=Object(d.__values)(e),l=u.next();!l.done;l=u.next()){var f=l.value,p=this.getPopupPosition(f,i,o),h=this.getViewportFactor(p,a,o);if((h>s||this.state.direction===f)&&(r.popupPosition={top:p.top-(c.top+window.pageYOffset),left:p.left-(c.left+window.pageXOffset)},r.direction=f,s=h),s>.99)break}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(r.tailPosition=this.getTailPosition(r.direction,i,o)),r},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,c=i.height;t.area=r*o,t.height=Math.round(c),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return y(e,"bottom")?r.top=t.top+t.height+o.main:y(e,"top")?r.top=t.top-n.height-o.main:y(e,"left")?r.left=t.left-n.width-o.main:y(e,"right")&&(r.left=t.left+t.width+o.main),O(e,"right")?r.left=t.left+t.width-n.width-o.secondary:O(e,"left")?r.left=t.left+o.secondary:O(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:O(e,"top")?r.top=t.top+o.secondary:O(e,"center")&&(y(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:y(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,c=a?i:i/2,s=this.getOffsets();if(y(e,"bottom")?r.top=-c:y(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-c):y(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-c):y(e,"right")&&(r.left=-c),O(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-c-s.tail;else if(O(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-c+s.tail;else if(O(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-c-s.tail;else if(O(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-c+s.tail;else if(O(e,"center")){var u=a?c/2:c;y(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+s.tail:r.top=Math.ceil(n.popupHeight/2)-u+s.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),c=Math.max(e.top,t.top+o.viewport),s=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&c<s&&(r=(a-i)*(s-c)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),c=Math.floor(i.height),s=Math.floor(y(this.state.direction,"top")?a:a+c);if(s<n||n+r<s)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),f=Math.floor(i.width),p=Math.floor(y(this.state.direction,"left")?d:d+f);if(!(p>=u&&u+l>=p))return!1}return!0},n}(r.PureComponent)).defaultProps=w,t}),E=n(579),S=n(564),k=(n(830),n(583)),_=n(1235),P=n(250),I=(n(833),Object(c.withBemMod)(Object(P.b)(),{size:"xxs"})),x=n(130),R=(n(836),function(e){var t=e.side,n=e.provider,r=Object(d.__rest)(e,["side","provider"]);return n(M("Icon",{side:t},[r.className]))}),N=(n(837),function(e){var t=e.children,n=e.className,r=Object(d.__rest)(e,["children","className"]);return o.a.createElement("span",Object(d.__assign)({},r,{className:M("Text",null,[n])}),t)}),M=(n(835),Object(s.cn)("Button2")),T={autoComplete:"off",pressKeys:[x.a.SPACE,x.a.ENTER],prvntKeys:[],as:"button",type:"button"},L=((g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(r.createRef)(),t.onKeyDown=function(e){Object(x.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(x.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,a=e.children,c=e.icon,s=e.iconLeft,u=e.iconRight,l=e.progress,f=e.disabled,h=e.as,m=e.type,v=e.className,b=e.innerRef,g=e.controlRef,y=e.title,O=e.role,w=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(d.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),C=this.state.pressed,j=h;w["string"===typeof h?"ref":"innerRef"]=Object(p.a)(this.internalInnerRef,b,g);var E=s||c;return o.a.createElement(j,Object(d.__assign)({},w,{type:m,disabled:Boolean(l||f),className:M({checked:i,progress:l,pressed:C},[v]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,"aria-pressed":i,"aria-disabled":f,autoComplete:r,title:y,role:O,"aria-busy":l}),n,E&&o.a.createElement(R,{provider:E,side:a&&s?"left":void 0}),u&&o.a.createElement(R,{provider:u,side:a?"right":void 0}),a&&o.a.createElement(N,null,a),t)},t}(r.PureComponent)).displayName=M(),g.defaultProps=T,g),D=(n(834),Object(c.withBemMod)(M(),{theme:"clear"})),B=(n(838),n(839),Object(c.withBemMod)(M(),{theme:"action"})),A=(n(840),n(841),Object(c.withBemMod)(M(),{size:"m"})),F=Object(c.withBemMod)(M(),{type:"link"},function(e){return function(t){t.type;var n=t.target,r=t.rel,i=t.url,a=t.disabled,c=t.tabIndex,s=Object(d.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),u=r;return"_blank"===n&&void 0!==r&&-1===r.indexOf("noopener")&&(u=r+" noopener"),o.a.createElement(e,Object(d.__assign)({},s,{rel:u,target:n,disabled:a,pressKeys:[x.a.ENTER],href:a?void 0:i,tabIndex:a?-1:c,type:null,autoComplete:null,as:"a"}))}}),U=(n(842),n(823),Object(c.withBemMod)(Object(E.b)(),{view:"tooltip"})),z=(n(826),Object(c.withBemMod)(Object(E.b)(),{tone:"blue"})),H=n(912),q=(n(827),a()(H)),W=Object(c.compose)(U,l,j,Object(c.composeU)(z))(E.a),V=Object(c.compose)(S.a)(k.a),G=Object(c.compose)(_.a,I)(P.a),Y=Object(c.compose)(Object(c.composeU)(D,B),A,F)(L),K=Object(s.cn)("FavoritesPopup"),X=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Progress")},o.a.createElement(G,{className:K("Spin"),progress:!0,view:"default",size:"xxs"}),q("Добавляем в коллекцию...")))},Q=function(e){var t=e.onEditButtonClick,n=e.onLinkClick,r=e.board;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},q("Добавлено в")," ",o.a.createElement(V,{theme:"strong",onClick:n,href:r&&r.url,className:K("CollectionName")},r&&r.title))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},q("Изменить")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:r&&r.url,target:"_blank"},q("Перейти"))))},J=function(e){var t=e.onClose,n=e.board,r=e.onLinkClick,i=e.loginUrl;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},q("Добавлено в")," ",o.a.createElement(V,{theme:"strong",onClick:r,href:n&&n.url,className:K("CollectionName")},n&&n.title)),o.a.createElement("div",{className:K("SubMessage")},q("Войдите, чтобы добавить в другую коллекцию"))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},q("Не сейчас")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:i},q("Войти и изменить"))))},Z=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("ErrorMessage")},q("Не удалось добавить в коллекцию")))},$=function(e){var t=e.anchor,n=e.scope,i=e.onClose,a=e.status,c=e.loggedIn,s=e.onClickEdit,u=e.board,l=e.counter,d=e.tone,f=e.loginUrl,p=e.mainOffset,h=e.zIndex,m=e.className,v=Object(r.useCallback)(function(){i(),l.send("1352.1382.2052.486","73362","-type=cross")},[i,l]),b=Object(r.useCallback)(function(){l.send("1352.1382.2052.486","73362","-type=cross")},[l]),g=Object(r.useCallback)(function(){s(),l.send("1352.1382.2052.2818","73320")},[s,l]),y=Object(r.useRef)(a);return"hidden"!==a&&(y.current=a),o.a.createElement(W,{className:K({tone:d},[m]),visible:"hidden"!==a,anchor:t,scope:n,onClose:i,target:"anchor",directions:["bottom-center","bottom-left","bottom-right"],theme:"normal",tone:d,view:"tooltip",zIndex:void 0===h?110001:h,mainOffset:p,hasTail:!0},o.a.createElement("div",{className:K("Close"),title:"Закрыть",onClick:v}),"progress"===y.current?o.a.createElement(X,null):null,"saved"!==y.current||c?null:o.a.createElement(J,{onClose:i,onLinkClick:b,loginUrl:f,board:u}),"saved"===y.current&&c?o.a.createElement(Q,{onEditButtonClick:g,onLinkClick:b,board:u}):null,"error"===a?o.a.createElement(Z,null):null)}},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(3),s=n(2),u=(n(846),Object(c.cn)("Modal")),l=function(e){var t=e.children,n=e.className,a=e.contentVerticalAlign,c=void 0===a?"middle":a,l=e.hasAnimation,d=void 0===l||l,f=e.visible,p=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(s.useComponentRegistry)(u()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:u({visible:f,hasAnimation:d},[n]),visible:f,unstable_hostRef:m,onClick:p}),i.a.createElement("div",{className:u("Table")},i.a.createElement("div",{className:u("Cell",{align:c})},i.a.createElement("div",{ref:m,className:u("Content")},t))),i.a.createElement("div",{className:u("Overlay")}))};l.displayName=u();n(845);var d=Object(a.withBemMod)(u(),{theme:"normal"}),f=(n(847),n(579)),p=new s.Registry({id:u()});p.set("Popup",f.a);var h=Object(s.withRegistry)(p)(l),m=n(1235),v=n(250),b=(n(848),Object(a.withBemMod)(Object(v.b)(),{size:"m"})),g=(n(843),n(844)),y=Object(a.compose)(d)(h),O=Object(a.compose)(m.a,b)(v.a),w=Object(c.cn)("FavoritesIframe"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.win=window,n.state={saved:!1,cardData:void 0},n.loadIframeFirstTime=n.loadIframeFirstTime.bind(n),n.loadIframe=n.loadIframe.bind(n),n.onIframeLoad=n.onIframeLoad.bind(n),n.getLoaderUrl=n.getLoaderUrl.bind(n),n.getIframeUrl=n.getIframeUrl.bind(n),n.getRPCBridge=n.getRPCBridge.bind(n),n.modalClose=n.modalClose.bind(n),n}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.status!==e.status&&"load"===this.props.status&&(this.setState({saved:!1,cardData:void 0}),this.loadIframeFirstTime())},t.prototype.loadIframeFirstTime=function(e){if((this.currentIframeUrl&&e&&this.currentIframeUrl!==e||!e&&this.currentIframeUrl!==this.getIframeUrl())&&this.removeIfame(),void 0!==this.rpcBridge)return this.ready();this.loadIframe(e)},t.prototype.removeIfame=function(){this.rpcBridge&&(this.rpcBridge.clean(),this.rpcBridge=void 0,this.currentIframeUrl=void 0)},t.prototype.loadIframe=function(e){var t=this;this.setState({iframeUrl:e||this.getIframeUrl()},function(){t.currentIframeUrl=t.state.iframeUrl,t.rpcBridge=t.getRPCBridge(),t.rpcBridge.pushMessagesToStack=!0})},t.prototype.getRPCBridge=function(){return this.rpcBridge?this.rpcBridge:new g(this,{url:this.state.iframeUrl})},t.prototype.onIframeLoad=function(e){if(e&&e.target&&this.rpcBridge){var t=e.target;this.rpcBridge.contrAgent.win=t.contentWindow,this.rpcBridge.onIframeLoad()}},t.prototype.getLoaderUrl=function(){var e=this.props,t=e.loaderUrl,n=e.baseUrl,r=e.loaderVersion;return t||n+"/iframe-loader/'"+r+"/index.min.js"},t.prototype.getIframeUrl=function(){var e=this.props,t=e.source_type,n=e.iframeOrigin,r=void 0===n?location.origin:n,o=e.iframePath;return(this.state.iframeUrl||r+o)+(t?"&source_type="+t:"")},t.prototype.ready=function(){this.addCard(),this.props.readyIframe()},t.prototype.close=function(e){this.cardSaved(e,this.modalClose)},t.prototype.cardSaved=function(e,t){void 0===t&&(t=function(){}),e&&e.card&&e.card.board?this.setState({saved:!0,cardData:e},t):this.setState({saved:!1,cardData:void 0},t)},t.prototype.addCard=function(){this.props.card&&this.props.card.task_id?this.props.counter.send("1352.1544.487.2818","73311"):this.props.counter.send("1352.1544.487.160","73310"),void 0!==this.rpcBridge&&this.rpcBridge.invokeMethod("pdb-add-card",{card:this.props.card,sourceName:this.props.sourceName})},t.prototype.modalClose=function(){var e=this.state,t=e.cardData,n=e.saved;this.props.onClose(),n||(this.props.closeIframe({eventName:"closed"}),this.props.counter.send("1352.1544.486.3177","73319")),n&&t&&t.card&&this.props.closeIframe({eventName:"saved",card:t.card})},t.prototype.render=function(){var e=this.props,t=e.status,n=e.zIndex,r=this.state.iframeUrl,o={display:"block",width:"100%",height:"100%",zIndex:n,border:0,transform:"translate3d(0px, 0px, 0px)"};return i.a.createElement(y,{className:w({theme:"normal"}),visible:"hidden"!==t,onClose:this.modalClose,theme:"normal",zIndex:n},"load"===t?i.a.createElement(O,{progress:!0,view:"default",size:"m"}):null,r?i.a.createElement("div",{className:w("Content")},i.a.createElement("iframe",{src:r,style:o,onWheel:function(){},onLoad:this.onIframeLoad,"aria-hidden":!0})):null)},t.defaultProps={zIndex:110002,baseUrl:"https://yastatic.net/q/global-notifications",loaderVersion:"v0.0.3",iframePath:"/collections/add/?bus=2"},t}(i.a.Component)},function(e,t,n){"use strict";n.d(t,"b",function(){return o.b}),n.d(t,"a",function(){return u});var r=n(2),o=n(126),i=n(4),a=n(0),c=n.n(a),s=(n(825),new r.Registry({id:Object(o.b)()}));s.set("Tail",function(e){var t=e.className,n=e.innerRef,r=e.children,a=Object(i.__rest)(e,["className","innerRef","children"]);return c.a.createElement("div",Object(i.__assign)({},a,{className:Object(o.b)("Tail",null,[t]),ref:n}),r)});var u=Object(r.withRegistry)(s)(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4);var o="undefined"!==typeof window&&window.document&&window.document.createElement;var i=n(849),a=function(){function e(){}return e.getInstance=function(){if(!o)throw new Error("Нельзя иметь инстанс FavoritesController на сервере");return this.instance||(this.instance=new e),this.instance},e.prototype.createCard=function(e,t,n,o,i){var a=this,c=!1;if(!e||!e.doc_id)return new Promise(function(t){t({eventName:"saved",card:Object(r.__assign)(Object(r.__assign)({},e),{failed:!0})})});if("undefined"!==typeof t&&(c=!t),n[e.content[0].source_type]||c){var s=Object(r.__assign)(Object(r.__assign)({},e),{board:n&&n[e.content[0].source_type]});return this.favoritesRequest("POST",s,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e.doc_id,t.task_id,o),t}).then(function(t){return a.favoritesRequestFinally("create",e.doc_id,e,t,o)})}return new Promise(function(t){t({eventName:"iframe",card:e,fav:!0})})},e.prototype.addCard=function(e,t,n,o,i){var a=this,c=Object(r.__assign)({},t);return c.board=n,this.favoritesRequest("POST",c,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e,t.task_id,o),t}).then(function(n){return a.favoritesRequestFinally("create",e,t,n,o)})},e.prototype.removeCard=function(e,t,n,r,o){var i=this,a=n.cardId||void 0;return!a&&t&&t.card_id&&(a=t.card_id),a?this.favoritesRequest("DELETE",{},a,o).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,r),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,r)}):this.oldRemoveCard(e,t,n,r)},e.prototype.oldRemoveCard=function(e,t,n,o){var i=this,a=Object(r.__assign)({},t);return n&&n.byTaskId&&(a.task_id=n.taskId),fetch("/collections/api/favorites/cards/",{credentials:"same-origin",method:"DELETE",headers:{contentType:"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,o),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,o)})},e.prototype.moveCollectionsCard=function(e,t,n,r){var o=this;if(t&&e.card_id)return this.favoritesRequest("PATCH",{board_id:t},e.card_id,r).then(function(t){return o.favoritesRequestSuccess("move",e.item_id,t.task_id,n),t}).then(function(t){return o.favoritesRequestFinally("move",e.item_id,e,t,n)})},e.prototype.favoritesRequest=function(e,t,n,r){var o="/collections/api/v1.0/cards"+(n?"/"+n:"")+"?source_name="+(r||"serp-components")+"&source_version="+i+"&ui=common";return this.getCrf().then(function(n){return fetch(o,{credentials:"same-origin",method:e,headers:{"Content-Type":"application/json","x-csrftoken":n["csrf-token"]},body:JSON.stringify(t)}).then(function(e){return e.json()})})},e.prototype.favoritesRequestSuccess=function(e,t,n,r){"create"===e&&r(t,{taskId:n})},e.prototype.favoritesRequestFinally=function(e,t,n,o,i){var a="create"===e||"move"===e?"saved":"removed",c=Boolean(o&&o.id);if(!o)return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{failed:!0})};if("remove"!==e){var s={cardId:o.id};c&&(s.isSaved=c),i(t,s)}else i(t,{isSaved:!1});return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{id:o.id,item_id:t,failed:!c,card_id:o.id,task_id:o.task_id,board:o.board})}},e.prototype.getCrf=function(){var e=this,t=this.crfToken&&this.crfToken.expires;return t&&1e3*Number(new Date(Number(t)))>Number(new Date)?new Promise(function(t){t(e.crfToken)}):fetch("/collections/api/v1.0/csrf-token",{credentials:"same-origin",method:"get",headers:{contentType:"application/json"}}).then(function(e){return e.json()}).then(function(t){return e.crfToken=t,t})},e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(e){var t=Object(r.useRef)();return Object(r.useEffect)(function(){t.current=e}),t.current}},function(e,t,n){"use strict";n(552);var r=n(120);n.d(t,"a",function(){return r.a})},,,,,,function(e,t,n){n.r(t);var r=n(3026);n.d(t,"tr",function(){return r.a})},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(21),s=n(12),u=Object(a.withBemMod)(Object(s.b)(),{type:"link"},function(e){return function(t){t.type;var n=t.target,o=t.rel,a=t.url,s=t.disabled,u=t.tabIndex,l=Object(r.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),d=o;return"_blank"===n&&void 0!==o&&-1===o.indexOf("noopener")&&(d=o+" noopener"),i.a.createElement(e,Object(r.__assign)({},l,{rel:d,target:n,disabled:s,pressKeys:[c.a.ENTER],href:s?void 0:a,tabIndex:s?-1:u,type:null,autoComplete:null,as:"a"}))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(47),i=(n(546),Object(r.createClassNameModifier)(Object(o.b)(),{type:"market-logo"}))},function(e,t,n){n.r(t);var r=n(2954);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(2972);n.d(t,"tr",function(){return r.a})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){n.r(t);var r=n(2819);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(2855);n.d(t,"tr",function(){return r.a})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(e){var t=Object(r.useRef)(e&&e.current);return Object(r.useEffect)(function(){e&&(e.current=t.current)},[e]),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(15),i=(n(368),Object(r.withBemMod)(Object(o.b)(),{type:"arrow"}))},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(71),i=(n(376),Object(r.withBemMod)(Object(o.b)(),{position:"center"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(71),i=(n(378),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},function(e,t,n){},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),o=n(0),i=n.n(o),a=n(65),c=n(27),s={},u={zIndexGroupLevel:0},l=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentZIndex=0,e.innerRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.updateZIndexPosition()},n.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&this.updateZIndexPosition()},n.prototype.componentWillUnmount=function(){0!==this.currentZIndex&&this.releaseZIndex(this.props.zIndexGroupLevel,this.currentZIndex)},n.prototype.render=function(){var t=this.props,n=(t.zIndexGroupLevel,Object(r.__rest)(t,["zIndexGroupLevel"]));return i.a.createElement(e,Object(r.__assign)({},n,{innerRef:Object(c.a)(this.innerRef,this.props.innerRef)}))},n.prototype.updateZIndexPosition=function(){var e=this;requestAnimationFrame(function(){var t=e.props,n=t.visible,r=t.zIndexGroupLevel;n&&0===e.currentZIndex?e.currentZIndex=e.captureZIndex(r):n||(e.currentZIndex=e.releaseZIndex(r,e.currentZIndex)),n&&(null!==e.innerRef.current?e.innerRef.current.style.zIndex=String(e.currentZIndex):e.updateZIndexPosition())})},n.prototype.captureZIndex=function(e){var t=s[e];void 0===t&&(t=[1e3*(e+1)],s[e]=t);var n=t[t.length-1]+1;return t.push(n),n},n.prototype.releaseZIndex=function(e,t){var n=s[e];return void 0!==n&&n.length>1&&n.splice(n.indexOf(t),1),0},n}(o.PureComponent)).displayName="withZIndex("+Object(a.a)(e)+")",t.defaultProps=u,t}},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerManager=void 0;var r=n(4),o=r.__importStar(n(0)),i=n(367),a=n(255);t.LayerManager=function(e){var n=e.visible,c=e.onClose,s=e.children,u=e.essentialRefs,l=a.useUniqId("layer"),d=i.usePreviousValue(n),f=i.usePreviousValue(c),p=o.useCallback(function(e){var n=e.key;if("Escape"===n||"Esc"===n){var o=r.__read(t.LayerManager.stack[t.LayerManager.stack.length-1]||[],2),i=o[0],a=o[1];i===l&&void 0!==a&&a(e,"esc")}},[]),h=o.useCallback(function(e){var n=r.__read(t.LayerManager.stack[t.LayerManager.stack.length-1]||[],3),o=n[0],i=n[1],a=n[2];o===l&&void 0!==i&&void 0!==a&&(a.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||i(e,"click"))},[]);return o.useEffect(function(){(c!==f&&void 0!==c&&t.LayerManager.stack.forEach(function(e,n){r.__read(e,2)[1]===f&&(t.LayerManager.stack[n][1]=c)}),n!==d&&void 0!==c)&&(n?(t.LayerManager.stack.push([l,c,u]),document.addEventListener("keyup",p),document.addEventListener("mousedown",h)):(r.__read(t.LayerManager.stack[t.LayerManager.stack.length-1]||[],1)[0]===l&&requestAnimationFrame(function(){return t.LayerManager.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",h)))},[d,n,c,f]),o.useEffect(function(){return function(){requestAnimationFrame(function(){return t.LayerManager.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",h)}},[]),o.default.createElement(o.default.Fragment,null,s)},t.LayerManager.stack=[],t.LayerManager.displayName="LayerManager"},,function(e,t,n){"use strict";n(280),n(457);var r=n(112);n.d(t,"a",function(){return r.a})},,,,,,,,,,,,function(e,t,n){},,,,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){function n(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage),this.pushMessagesToStack=!1,this._messagesStack=[]}n.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=void 0,this.contrAgent=void 0,this._resultCallbacks=void 0,this._resultCallbacksIndex=0},onIframeLoad:function(){this._messagesStack.reverse().forEach(this._onMessage),this._messagesStack=[],this.pushMessagesToStack=!1},_onMessage:function(e){if(this.contrAgent&&this.contrAgent.win&&e.source===this.contrAgent.win){var t,n=e.data;try{n=JSON.parse(n)}catch(e){return}if(n.methodCall){if(this.contrAgent.url||(this.contrAgent.url=e.origin),this.agent[n.methodCall]){var r,o=n.params;t=n.resultCallbackIndex?this._deInstrumentCallback(n.resultCallbackIndex):[],n.paramsCallbackIndex&&(o=[].concat(o,this._deInstrumentCallback(n.paramsCallbackIndex))),r=this.agent[n.methodCall].apply(this.agent,[].concat(o)),n.resultCallbackIndex&&t(r)}}else n.returnCall&&(t=this._idObjToCallback(n.resultCallbackIndex))&&t.apply(this.agent,[].concat(n.params))}else this.pushMessagesToStack&&this._messagesStack.push(e)},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var r;if(e){var o,i=t&&t.pop();"function"===typeof i?o=this._instrumentCallback(i):t&&t.push(i),r={methodCall:e,params:t,paramsCallbackIndex:o,resultCallbackIndex:n&&this._instrumentCallback(n)}}else r={returnCall:!0,params:t,resultCallbackIndex:n};r=JSON.stringify(r),this.contrAgent.win.postMessage(r,this.contrAgent.url)}},e.exports=n},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){function n(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage),this.pushMessagesToStack=!1,this._messagesStack=[]}n.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=void 0,this.contrAgent=void 0,this._resultCallbacks=void 0,this._resultCallbacksIndex=0},onIframeLoad:function(){this._messagesStack.reverse().forEach(this._onMessage),this._messagesStack=[],this.pushMessagesToStack=!1},_onMessage:function(e){if(this.contrAgent&&this.contrAgent.win&&e.source===this.contrAgent.win){var t,n=e.data;try{n=JSON.parse(n)}catch(e){return}if(n.methodCall){if(this.contrAgent.url||(this.contrAgent.url=e.origin),this.agent[n.methodCall]){var r,o=n.params;t=n.resultCallbackIndex?this._deInstrumentCallback(n.resultCallbackIndex):[],n.paramsCallbackIndex&&(o=[].concat(o,this._deInstrumentCallback(n.paramsCallbackIndex))),r=this.agent[n.methodCall].apply(this.agent,[].concat(o)),n.resultCallbackIndex&&t(r)}}else n.returnCall&&(t=this._idObjToCallback(n.resultCallbackIndex))&&t.apply(this.agent,[].concat(n.params))}else this.pushMessagesToStack&&this._messagesStack.push(e)},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var r;if(e){var o,i=t&&t.pop();"function"===typeof i?o=this._instrumentCallback(i):t&&t.push(i),r={methodCall:e,params:t,paramsCallbackIndex:o,resultCallbackIndex:n&&this._instrumentCallback(n)}}else r={returnCall:!0,params:t,resultCallbackIndex:n};r=JSON.stringify(r),this.contrAgent.win.postMessage(r,this.contrAgent.url)}},e.exports=n},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e){e.exports=JSON.parse('{"version":"2.1.0"}')},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o(e){return e?(e.nodeName||"").toLowerCase():null}function i(e){return"html"===o(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function a(e){var t=o(e);if(t&&["html","body"].indexOf(t)>=0)return e.ownerDocument.body;if(function(e){return e instanceof r(e).HTMLElement}(e)){var n=function(e){return r(e).getComputedStyle(e)}(e),c=n.overflow,s=n.overflowX,u=n.overflowY;if(/auto|scroll|overlay|hidden/.test(c+u+s))return e}return a(i(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.listScrollParents=void 0,t.listScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=a(t),c="body"===o(r),s=n.concat(r);return c?s:s.concat(e(i(r)))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){n.r(t);var r=n(2999);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3017);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3035);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3053);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3062);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3080);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3098);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3107);n.d(t,"tr",function(){return r.a})},function(e,t,n){n.r(t);var r=n(3134);n.d(t,"tr",function(){return r.a})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(32),i=(n(451),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(71),i=(n(453),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},function(e,t,n){"use strict";n(280),n(454);var r=n(12);n.d(t,"a",function(){return r.a})},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(4),o=n(0),i=n.n(o),a=n(21),c=n(65),s=n(27),u=n(13),l="pointerdown",d="pointerup";Object(u.a)()&&(window.PointerEvent||(l="mousedown",d="mouseup",window.MouseEvent||(d="click")));var f={ignoreRefs:[]},p=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetRef=Object(o.createRef)(),e.pointerDownEventSource=null,e.onPointerDown=function(t){e.pointerDownEventSource=t.target},e.onPointerUp=function(t){var n=Object(r.__spread)(e.props.ignoreRefs,[e.targetRef]);void 0!==e.props.onOutsideClick&&n.every(function(n){return null!==n.current&&!n.current.contains(e.pointerDownEventSource)&&!n.current.contains(t.target)})&&e.props.onOutsideClick(t),e.pointerDownEventSource=null},e.onKeyDown=function(t){void 0!==e.props.onEscapeKeyDown&&Object(a.b)(t.keyCode,[a.a.ESC])&&e.props.onEscapeKeyDown(t)},e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.subscribeToEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.componentDidUpdate=function(e){!e.visible&&this.props.visible?this.subscribeToEvents():e.visible&&!this.props.visible&&this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=(t.ignoreRefs,Object(r.__rest)(t,["ignoreRefs"]));return i.a.createElement(e,Object(r.__assign)({},n,{targetRef:Object(s.a)(this.targetRef,this.props.targetRef)}))},n.prototype.subscribeToEvents=function(){document.addEventListener(l,this.onPointerDown),document.addEventListener(d,this.onPointerUp),document.addEventListener("keydown",this.onKeyDown)},n.prototype.unsubscribeFromEvents=function(){document.removeEventListener(l,this.onPointerDown),document.removeEventListener(d,this.onPointerUp),document.removeEventListener("keydown",this.onKeyDown)},n.displayName="withOutsideClick("+Object(c.a)(e)+")",n.defaultProps=f,n}(o.PureComponent)}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(264),o=(n(548),r.a)},function(e,t,n){"use strict";var r=n(332);n.d(t,"a",function(){return r.a});n(549)},function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return O});var r,o=n(2),i=n(6);!function(e){e.image="image",e.path="path",e.title="title",e.container="container"}(r||(r={}));var a=n(28),c=n(45),s=n(265),u=n(1),l=n(1017),d=n(388),f=n(1024),p=n(55),h=n(24),m=Object(u.compose)(l.a)(d.a),v=new o.Registry({id:h.a}).fill({Link:m,Price:p.a,Path:f.a});n(550);function b(e,t){return Object(i.logClick)(function(n){var r=n.props,o=r.extendedClickArea,i=r.counters,s=r.source,u=r.pos,l=r.link,d=r.decodedLink,f=t||r.enabledWhenExtendedClickArea;if(o&&f||!o&&!f)return Object(a.b)(null===i||void 0===i?void 0:i.click,Object(c.a)({actionType:"greenurl",clickSource:"similar_offers",dataSource:s,clickArea:e,decodedUrl:d,pos:u}),void 0,{href:l})})}var g=Object(i.withBaobab)({name:"offer",events:{onImageClick:b(r.image,!1),onPathClick:b(r.path,!1),onTitleClick:b(r.title,!1),onContainerClick:b(r.container,!0)}}),y=Object(o.withRegistry)(v)(s.a),O=g(y)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(71),i=(n(509),Object(r.withBemMod)(Object(o.b)(),{size:"l"}))},function(e,t,n){"use strict";var r=n(244);n.d(t,"a",function(){return r.a});n(512)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n.n(r),i=n(138),a=n(105);var c=o.a.memo(function(e){return o.a.createElement(o.a.Fragment,null,Object(i.markup)(e.children,function(e){var t={};return(e.end||e.start)&&(t.delimiters={start:e.start||i.HIGHLIGHT_OPEN,end:e.end||i.HIGHLIGHT_CLOSE}),e.highlighter&&(t.highlighter=e.highlighter),e.textPreprocessor?t.textPreprocessor=e.textPreprocessor:e.ignoreHTMLEntities||(t.textPreprocessor=a.decodeHTMLEntities),t}(e)))})},,,function(e,t,n){"use strict";var r=n(148);n.d(t,"a",function(){return r.a});n(551)},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),o=n(150),i=n(64),a=n(388),c=n(227),s=(n(553),new r.Registry({id:i.c}).set("Link",Object(c.a)(a.a))),u=(n(554),Object(r.withRegistry)(s)(o.a))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(415),o=n.n(r),i=n(0),a=n(154),c=n(321);t.a=function(){var e=Object(a.a)(),t=Object(c.a)({value:void 0,error:void 0,noUserInteraction:!0}),n=t[0],r=t[1];return[n,Object(i.useCallback)(function(t){var n,i;if(e())try{if("string"!==typeof t&&"number"!==typeof t){var a=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void r({value:t,error:a,noUserInteraction:!0})}if(""===t)return a=new Error("Cannot copy empty string to clipboard."),void r({value:t,error:a,noUserInteraction:!0});i=t.toString(),n=o()(i),r({value:i,error:void 0,noUserInteraction:n})}catch(a){r({value:i,error:a,noUserInteraction:n})}},[])]}},,function(e,t,n){"use strict";var r=n(0),o="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,i=n(62),a={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};t.a=i.a&&window.ResizeObserver?function(){var e=Object(r.useState)(null),t=e[0],n=e[1],i=Object(r.useState)(a),c=i[0],s=i[1],u=Object(r.useMemo)(function(){return new window.ResizeObserver(function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,o=t.width,i=t.height,a=t.top,c=t.left,u=t.bottom,l=t.right;s({x:n,y:r,width:o,height:i,top:a,left:c,bottom:u,right:l})}})},[]);return o(function(){if(t)return u.observe(t),function(){u.disconnect()}},[t]),[n,c]}:function(){return[function(){},a]}},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(400);n.d(t,"a",function(){return r.a});n(676)},,,,function(e,t,n){"use strict";var r=n(382);n.d(t,"a",function(){return r.a});n(679)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(4),o=n(0),i=n.n(o),a=n(1),c=n(2),s=n(335),u=n(276),l=n(17),d=n(390),f=Object(a.compose)(Object(c.withRegistry)(d.a),s.a,u.a)(function(e){var t=e.className,n=e.hovered,o=Object(r.__rest)(e,["className","hovered"]);return i.a.createElement(l.a,Object(r.__assign)({},o,{className:Object(l.b)({hovered:n},[t])}))})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(47),i=(n(684),Object(r.createClassNameModifier)(Object(o.b)(),{type:"turbo"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(1),i=n(24),a=(n(688),function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),c=Object(o.withBemMod)(Object(i.b)(),{theme:"v2"},function(e){return function(t){return r.createElement(e,a({},t))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(374);n.d(t,"a",function(){return r.a});n(710)},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),o=n(72),i=n(420),a=new r.Registry({id:Object(o.b)()});a.set("Popup",i.a);var c=Object(r.withRegistry)(a)(o.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(17),i=(n(762),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},,,,,function(e,t,n){"use strict";var r=n(563);n.d(t,"a",function(){return r.a});n(817)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(71),i=(n(818),Object(r.withBemMod)(Object(o.b)(),{size:"xxs"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(187),i=(n(819),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(570),i=n(187),a=Object(r.withRegistry)(o.a)(i.a)},function(e,t,n){"use strict";var r=n(4),o=n(0),i=n.n(o),a=n(577),c=n(578),s=n(580),u=n(571),l=n(347),d=n(565);n.o(d,"FavoritesContext")&&n.d(t,"FavoritesContext",function(){return d.FavoritesContext}),n.o(d,"FavoritesContextProvider")&&n.d(t,"FavoritesContextProvider",function(){return d.FavoritesContextProvider}),n.d(t,"FavoritesContext",function(){return l.a}),n.d(t,"FavoritesContextProvider",function(){return l.b});!function(e){function t(t){var n=e.call(this,t)||this;return n.addRef=i.a.createRef(),n.gotoRef=i.a.createRef(),n.state={statusPopup:"hidden",statusIframe:"hidden",cacheBoard:{}},n.counter=new u.a({logged:t.loggedIn,counterParams:t.counterParams}),n.onClickAdd=n.onClickAdd.bind(n),n.onClickEdit=n.onClickEdit.bind(n),n.showProgressPopup=n.showProgressPopup.bind(n),n.hidePopup=n.hidePopup.bind(n),n.hideIframe=n.hideIframe.bind(n),n.loadIframe=n.loadIframe.bind(n),n.readyIframe=n.readyIframe.bind(n),n.closeIframe=n.closeIframe.bind(n),n}Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.controller=s.a.getInstance()},t.prototype.componentDidUpdate=function(e){e.card.doc_id!==this.props.card.doc_id&&(this.hidePopup(),this.hideIframe())},t.prototype.onClickAdd=function(){var e=this;this.showProgressPopup(),this.controller.createCard(this.props.card,this.props.loggedIn,this.state.cacheBoard,this.props.onStatusChange,this.props.sourceName).then(function(t){"saved"===t.eventName&&e.handlerFavoritesSaved(t),"iframe"===t.eventName&&e.loadIframe(t)})},t.prototype.onClickEdit=function(){this.state.card&&this.loadIframe({card:this.state.card,fav:!0})},t.prototype.showProgressPopup=function(){this.setState({statusPopup:"progress"})},t.prototype.hidePopup=function(){this.setState({statusPopup:"hidden"})},t.prototype.hideIframe=function(){this.setState({statusIframe:"hidden"})},t.prototype.loadIframe=function(e){this.setState({statusIframe:"load",card:e.card})},t.prototype.readyIframe=function(){this.setState({statusIframe:"ready",statusPopup:"hidden"})},t.prototype.closeIframe=function(e){if(this.setState({statusIframe:"hidden"}),"saved"===e.eventName){if(e.card&&e.card.id){var t=e.card.doc_id,n=e.card.id;this.props.onStatusChange(t,{cardId:n,isSaved:!0})}this.handlerFavoritesSaved(e)}},t.prototype.handlerFavoritesSaved=function(e){if(e&&e.card&&e.card.failed)this.setState({statusPopup:"error",card:void 0});else{var t=this.state.cacheBoard;e.card&&e.card.board&&e.card.content[0].source_type&&e.card.board.id&&(t[e.card.content[0].source_type]=e.card.board.id),this.setState({statusPopup:"saved",card:e.card,cacheBoard:t}),this.props.onStatusChange(this.props.card.doc_id,{isSaved:!0}),this.counter.send("1352.1382.2052","73312")}},t.prototype.render=function(){var e=this.props,t=e.goTo,n=e.add,r=e.isFavorite,o=e.loggedIn,s=e.tone,u=e.loginUrl,l=e.scope,d=e.popupMainOffset,f=e.popupClassName,p=e.popupZIndex,h=e.cache,m=this.state,v=m.statusPopup,b=m.statusIframe,g=m.card,y=r||h.isSaved,O=y?t({innerRef:this.gotoRef}):n({onClick:this.onClickAdd,innerRef:this.addRef});return i.a.createElement(i.a.Fragment,null,O,i.a.createElement(a.a,{className:f,anchor:y?this.gotoRef:this.addRef,scope:l,status:v,loggedIn:o,tone:s,loginUrl:u,board:g&&g.board,counter:this.counter,onClickEdit:this.onClickEdit,onClose:this.hidePopup,mainOffset:d,zIndex:p}),i.a.createElement(c.a,{status:b,card:g,sourceName:this.props.sourceName,counter:this.counter,readyIframe:this.readyIframe,closeIframe:this.closeIframe,onClose:this.hideIframe}))}}(i.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(250),i=(n(831),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},function(e,t,n){"use strict";var r=n(481);n.d(t,"a",function(){return r.a});n(890)},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(72),i=(n(782),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}));n(783)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(17),i=(n(868),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}));n(869)},function(e,t,n){"use strict";n.d(t,"c",function(){return s.b}),n.d(t,"b",function(){return p.b}),n.d(t,"a",function(){return g});var r=n(2),o=n(1),i=n(6),a=n(28),c=n(45),s=n(262),u=n(935),l=n(936),d=n(1092),f=n(937),p=n(66),h=new r.Registry({id:p.a}),m=Object(o.compose)(u.a,Object(o.composeU)(l.a,d.a))(f.b);h.set("OfferCard",m);var v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},g=Object(o.compose)(Object(i.withBaobab)({name:"similar-offers",events:{onShow:Object(i.logTech)("show",function(e,t){var n,r=e.props,o=b(t,1)[0];return Object(a.b)(null===(n=r.counters)||void 0===n?void 0:n.show,v({count:String(o.count)},Object(c.b)({decodedUrls:o.decodedUrls})))})}}),Object(r.withRegistry)(h))(s.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(83),e.exports=n(1881)},function(e,t,n){"use strict";n.r(t),n.d(t,"App",function(){return i});var r=n(25),o=n(499),i=Object(r.b)("ImagesViewer")(o.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"от {value}":"min. {value}"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"б.p.":"BYN","грн.":"UAH","долл.":"USD","евро":"EUR","руб.":"RUB","тнг.":"KZT"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"{count} балл":{one:"{count} балл",some:"{count} балла",many:"{count} баллов",none:""}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Цена и наличие товара могли измениться":"Ürünün fiyatı veya stok durumu değişmiş olabilir"}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Похожие товары":"Benzer ürünler"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Еще {count} предложение":{one:"{count} teklif daha",some:"{count} teklif daha",many:"{count} teklif daha",none:""},"Свернуть":"Daralt","Яндекс.Маркет":"Yandex.Market"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Нет в продаже":"Satılmıyor"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Яндекс.Маркет":"Yandex.Market","от {value}":"{value} ve üzeri"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Не удалось получить результаты":"Sonuçlar alınamadı","Проверьте соединение с интернетом":"İnternet bağlantınızı kontrol edin"}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Пожаловаться":"Şikayet et"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Открыть в полноэкранном режиме":"Tam ekran modunda aç","Поиск по фрагменту картинки":"Görsel parçasına göre arama","Распознать товары на картинке":"Görseldeki ürünleri tanı"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Закрыть":"Kapat","Запустить":"Başlat","Остановить":"Durdur"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Не удалось загрузить картинку, возможно, она есть на {link}":"Görsel yüklenemedi; {link} bulmayı deneyin","сайте":"sitesinde","сервисе Яндекс.Картинки":"Yandex.Görsel servisinde"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Искать":"Bul","Отменить":"İptal","Укажите выше область для поиска по картинке":"Görsel arama için yukarıda bölümü belirtin"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В избранное":"Favoriler'e ekle","В избранном":"Favoriler'de","Другие размеры и похожие":"Benzer ve diğer boyutlar","Картинка удалена из избранного":"Görsel Favoriler'den silindi","Купить оригинал картинки":"Görseli satın al","На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование":"Fotobank sitesinde{br0}orijinal görseller ve{br1}kullanım haklarını alabilirsiniz","Открыть":"Aç","Отправить":"Gönder","Похожие":"Benzer"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Видео удалено из избранного":"Video Favoriler'den silindi","Войти и изменить":"Giriş yap ve değiştir","Добавлено в избранное:":"Favoriler'e eklendi:","Добавляем в избранное...":"Favoriler'e ekleniyor...","Изменить":"Değiştir","Не сейчас":"Şimdi değil","Не удалось добавить в избранное":"Favoriler'e eklenemedi","Перейти":"Git"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Добавлено в":"Buraya eklendi:","Войдите, чтобы добавить в другую коллекцию":"Başka koleksiyona eklemek için giriş yapın","Войти и изменить":"Giriş yap ve değiştir","Добавляем в коллекцию...":"Koleksiyona ekleniyor...","Изменить":"Değiştir","Не сейчас":"Şimdi değil","Не удалось добавить в коллекцию":"Koleksiyona eklenemedi","Перейти":"Git"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Картинка сохранена":"Görsel kaydedildi","Купить еще место":"Daha fazla alan al","Не получается, попробуйте позже или сохраните картинку на компьютер":"Kaydedilemiyor; daha sonra deneyin veya görseli bilgisayara kaydedin","Нет места на Яндекс.Диске":"Yandex.Disk'te alan yok","Сохранить":"Kaydet","Сохранить на диск":"Disk'e kaydet","Сохраняем картинку":"Görsel kaydediliyor"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Скопировать ссылку":"Bağlantıyı kopyala","Ссылка скопирована":"Bağlantı kopyalandı"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Войдите в Яндекс, и поиск станет лучше":"Daha iyi arama sonuçları elde etmek için Yandex hesabınıza giriş yapın","Войдите в Яндекс, чтобы сохранить картинку":"Görseli kaydetmek için Yandex'e giriş yapın","Мои Яндекс.Картинки":"Yandex.Görsellerim","Не сейчас":"Şimdi değil"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В других магазинах":"Diğer mağazalarda"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Mağazaya git"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Mağazaya git","В корзину":"Add to cart","Добавить товар в корзину не получилось, возможно, его уже разобрали.":"Couldn't add to cart. The product may be sold out.","Добавлено":"Added","Добавляем":"Adding","Магазин на Маркете":"Yandex.Market mağazası","Не сейчас":"Not now","Не добавлено":"Not added","Перейти":"Go to site","Покупка на Маркете":"Yandex Market'te satın alım","Товар добавлен в корзину":"Added to cart","Яндекс.Маркет":"Yandex.Market"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Mağazaya git","В наличии":"Stokta","Предзаказ":"Ön sipariş","Скрыть":"Gizle","Товар закончился":"Stokta yok","Читать еще":"Daha fazla"}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Связанные картинки":"İlgili görseller"}}]);