window.jQuery&&window.jQuery.fn.bem&&window.bemhtml&&BEM.DOM.decl({block:"i-react-ajax-adapter"},{_request:function(e,a){var t=e.url||BEM.blocks["i-global"].param("router").search,r=$.extend({ctx:this,cache:!1,url:t},e.requestParams),n=$.extend({type:e.type,subtype:e.subtype},e.adapterParams);return BEM.create("i-request_type_bem",r).block({block:"i-react-ajax-adapter:ajax"},function(e){e&&e.params&&e.params.ok?a(null,e):a(new Error("Adapter result is not ok"))},function(e){var t;t=e?e.statusText+": "+e.responseText:"Adapter result is not ok",a(new Error(t))},n).get(BEM.blocks["i-url-controller"].mergePassedUrlParams(e.args))},_onAjaxRequest:function(e,a){var t=this;a=a||$.noop,this._request(e,function(e,r){t._onAjaxRequestSuccess(e,r,a)})},_onAjaxRequestSuccess:function(e,a,t){e?t(e):t(null,a.params.adapterData)},_onAjaxRender:function(e,a,t){if(e){var r=this;t=t||$.noop,a.adapterParams=a.adapterParams||{},a.adapterParams.preventAjaxMethod=!0,this._request(a,function(a,n){r._onAjaxRenderSuccess(a,n,e,t)})}else t(new Error("Container not found"))},_onAjaxRenderSuccess:function(e,a,t,r){if(e)r(e);else if(a.html){var n=$(t);Ya.reactBus.emit("react-adapter:unmount",n.get(0)),BEM.DOM.update(n,a.html,function(){Ya.reactBus.emit("react-adapter:mount",n.get(0)),r(null)})}else r(new Error("Empty html in response"))}},{live:function(){this.liveInitOnReactBusEvent("react-ajax-adapter:request",function(e,a){this._onAjaxRequest(e,a)}).liveInitOnReactBusEvent("react-ajax-adapter:render",function(e,a,t){this._onAjaxRender(e,a,t)}).liveInitOnChannelEvent("i-react-ajax-adapter","render",function(e,a){this._onAjaxRender(a.container,a.params,a.callback)})}});